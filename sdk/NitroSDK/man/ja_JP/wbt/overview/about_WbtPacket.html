<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<META name="GENERATOR" content="IBM WebSphere Studio Homepage Builder Version 7.0.0.0 for Windows">
<META http-equiv="Content-Style-Type" content="text/css">
<TITLE>WBT使用時のパケットの流れ</TITLE>
<LINK rel="stylesheet" href="../../css/nitro.css" type="text/css">
</HEAD>
<BODY>
<H1 align="left">WBT使用時のパケットの流れ</H1>
<H2>説明</H2>
<P>
WBTを使用した際のダウンロード、及びアップロード時のパケットの流れを、以下に図として示します。<BR>
<BR>
<FONT color="red"><B>(注意)親子間では半二重通信なのでアップロード、ダウンロードが同時に発生した場合は子機側からみてアップロードが優先されます。</B></FONT><BR>
</P>
<HR>
<P><B>ダウンロード時のパケットの流れ</B></P>
<P>
ダウンロード時に親子間でやり取りされるパケットの流れについて図で示します。
</P>
<BLOCKQUOTE><IMG src="image_WBT_Download.GIF" border="0"></BLOCKQUOTE>

<HR>
<P><B>アップロード時のパケットの流れ</B></P>
<P>
処理の流れは基本的にダウンロードの処理が親子反転しただけですが、
アップロードは、親機にダウンロードをしてもらわなければいけないので、子機はアップロードしたいタイミングで親機へ
 WBT_PutUserData を用いてブロック情報を送って知らせる必要があります。<BR>
（もし、アップロードするタイミングが RequestSync 後すぐであり、アップロードするブロックも固定であるなら、
RequestSync の受信コールバックで WBT_GetBlockInfo を呼び出してもかまいません。）<BR>
アップロード時に親子間でやり取りされるパケットの流れについて図で示します。<BR>
</P>
<BLOCKQUOTE><IMG src="image_WBT_Upload.GIF" border="0"></BLOCKQUOTE>

<H2>参照</H2>
<P><CODE><A href="../list_wbt.html">WBT関数一覧</A><BR>
</CODE></P>
<H2>履歴</H2>
<P>
2006/03/13 初版</P>
</BODY>
</HTML>