
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<META name="GENERATOR" content="IBM WebSphere Studio Homepage Builder Version 7.0.0.0 for Windows">
<META http-equiv="Content-Style-Type" content="text/css">
<TITLE>NITRO-SDK CHANGELOG</TITLE>
</HEAD>
<BODY>
<HR>
<H1>NITRO-SDK 変更履歴</H1>
<HR>

<DL>
  <DT><A href="#sdk_4_02">■NITRO-SDK 4.2 正式版</A> (2007/12/10)
  <DD><A href="#note51-01">Note 51-01: (WBT) WBT_CancelCurrentCommand 関数の不具合修正</A>
  <DD><A href="#KnownIssues_4_02">SDK 4.2 正式版での既知の問題点</A>
</DL>

<DL>
  <DT><A href="#sdk_4_02_rc">■NITRO-SDK 4.2 RC</A> (2007/11/28)
  <DD><A href="#note50-01">Note 50-01: (MI) LZ77 圧縮の拡張フォーマットを追加</A>
  <DD><A href="#note50-02">Note 50-02: (GX) GX_SetVCount 関数の修正</A>
  <DD><A href="#note50-03">Note 50-03: (MATH) fft-2 サンプルデモの変更と修正</A>
  <DD><A href="#note50-04">Note 50-04: (MI) ハフマン圧縮の不具合修正</A>
  <DD><A href="#note50-05">Note 50-05: (OS) Vカウントアラームの不具合修正</A>
  <DD><A href="#note50-06">Note 50-06: (PM) PM_GoSleepMode 関数前後のチック値不整合の修正</A>
  <DD><A href="#note50-07">Note 50-07: (PRC) サンプルデモ用ツール pdic2c.pl の修正</A>
  <DD><A href="#note50-08">Note 50-08: (TOOL) ntrcomp.exe での LZ77 圧縮に指定できるパラメータを廃止</A>
  <DD><A href="#note50-09">Note 50-09: (TOOL) ntrcomp.exe でのテキスト出力時にエンディアン指定を追加</A>
  <DD><A href="#note50-10">Note 50-10: (TOOL) ntrcomp.exe でのデータサイズアライメントに8,16,32を追加</A>
  <DD><A href="#note50-11">Note 50-11: (TOOL) ntrcomp.exe に解凍オプションを追加</A>
  <DD><A href="#note50-12">Note 50-12: (WBT) 複数子機へのブロック転送に関する不具合修正</A>
  <DD><A href="#note50-13">Note 50-13: (WM) WM_SetMPDataToPort* 関数の送信サイズ制限の変更</A>
  <DD><A href="#note50-14">Note 50-14: (WM) dataSharing-model サンプルデモの修正</A>
  <DD><A href="#note50-15">Note 50-15: (WM) wmPadRead-child サンプルデモの変更と修正</A>
  <DD><A href="#note50-16">Note 50-16: (WM) 子機送信容量の制限の緩和</A>
  <DD><A href="#note50-17">Note 50-17: (WM) 受信専用モードの初期化関数の追加</A>
  <DD><A href="#KnownIssues_4_02_rc">SDK 4.2 RCでの既知の問題点</A>
</DL>

<DL>
  <DT><A href="#sdk_4_02_pr">■NITRO-SDK 4.2 PR</A> (2007/10/22)
  <DD><A href="#note49-01">Note 49-01: (CARD) FLASH デバイス用書き込み関数の追加</A>
  <DD><A href="#note49-02">Note 49-02: (CARD) 新規バックアップデバイスへの対応</A>
  <DD><A href="#note49-03">Note 49-03: (CARD) 非同期バックアップ関数の不具合修正</A>
  <DD><A href="#note49-04">Note 49-04: (DevEnv) make によるビルドにおけるファイル名の統合</A>
  <DD><A href="#note49-05">Note 49-05: (GX) GX_SetVCount 関数の修正</A>
  <DD><A href="#note49-06">Note 49-06: (MATH) thumb ライブラリにおける MATH_CountLeadingZeros 関数の実装の変更</A>
  <DD><A href="#note49-07">Note 49-07: (MATH) サンプルデモの修正</A>
  <DD><A href="#note49-08">Note 49-08: (MB) MB_EndToIdle 関数に関する不具合修正</A>
  <DD><A href="#note49-09">Note 49-09: (MB) アイコンデータに関するドキュメント追記</A>
  <DD><A href="#note49-10">Note 49-10: (MB) メモリファイルからの動的読み込みに関する不具合の修正</A>
  <DD><A href="#note49-11">Note 49-11: (MB) 擬似マルチブート子機でのコールバック引数の値を修正</A>
  <DD><A href="#note49-12">Note 49-12: (MB) 配信中のライブラリ終了に関する不具合修正</A>
  <DD><A href="#note49-13">Note 49-13: (OS) OS_SetPeriodicVAlarm 関数の修正</A>
  <DD><A href="#note49-14">Note 49-14: (OS) OS_SetThreadDestructor 関数のリファレンス修正</A>
  <DD><A href="#note49-15">Note 49-15: (PM) LCD 制御関数の修正</A>
  <DD><A href="#note49-16">Note 49-16: (PRC) 図形認識ライブラリ解説ドキュメントの更新</A>
  <DD><A href="#note49-17">Note 49-17: (TP) 自動サンプリングで使用する V カウント割り込みの修正</A>
  <DD><A href="#note49-18">Note 49-18: (WBT) ヘッダファイルの修正</A>
  <DD><A href="#note49-19">Note 49-19: (WBT) 転送データ準備の遅延で生じる無限ループ不具合の修正</A>
  <DD><A href="#note49-20">Note 49-20: (WFS) WFS 子機の終了処理に関する注意事項の追記</A>
  <DD><A href="#note49-21">Note 49-21: (WFS) WFS_ExecuteRomServerThread 関数のメモリリーク修正</A>
  <DD><A href="#note49-22">Note 49-22: (WFS) カードアクセス中のブロック転送処理に関する不具合修正</A>
  <DD><A href="#note49-23">Note 49-23: (WM) MP 通信中のパラメータ変更に関する不具合修正</A>
  <DD><A href="#note49-24">Note 49-24: (WM) V ブランク同期での V カウントの変動幅の調整</A>
  <DD><A href="#note49-25">Note 49-25: (WM) ball サンプルデモの廃止</A>
  <DD><A href="#note49-26">Note 49-26: (WM) サンプルデモの修正</A>
  <DD><A href="#note49-27">Note 49-27: (WM) 接続直後の子機への Sequential 通信の不具合</A>
  <DD><A href="#note49-28">Note 49-28: (その他) ヘッダファイル依存関係の不具合修正</A>
  <DD><A href="#KnownIssues_4_02_pr">SDK 4.2 PRでの既知の問題点</A>
</DL>

<DL>
  <DT><A href="#sdk_4_01">■NITRO-SDK 4.1 正式版</A> (2007/07/10)
  <DD><A href="#note48-01">Note 48-01: (CARD) ROM 転送関数の内部修正</A>
  <DD><A href="#note48-02">Note 48-02: (DevEnv) C++ コンストラクタや StaticInitializer の AUTOLOAD 対応</A>
  <DD><A href="#note48-03">Note 48-03: (DevEnv) 拡張メモリへの Autoload 適用時のアリーナ先頭アドレスの修正</A>
  <DD><A href="#KnownIssues_4_01">SDK 4.1 正式版での既知の問題点</A>
</DL>

<DL>
  <DT><A href="#sdk_4_01_rc">■NITRO-SDK 4.1 RC</A> (2007/06/15)
  <DD><A href="#note47-01">Note 47-01: (CARD) キャッシュ無効化処理切り替え用関数の追加</A>
  <DD><A href="#note47-02">Note 47-02: (MI) アロケータ構造体の追加</A>
  <DD><A href="#note47-03">Note 47-03: (PM) LCD off 期間の調整</A>
  <DD><A href="#note47-04">Note 47-04: (TOOL) makerom.exe の -M オプションの動作不良の修正</A>
  <DD><A href="#note47-05">Note 47-05: (WFS) WFS ライブラリの正式公開</A>
  <DD><A href="#note47-06">Note 47-06: (WM) WM_IsExistAllowedChannel 関数の不具合修正</A>
  <DD><A href="#KnownIssues_4_01_rc">SDK 4.1 RCでの既知の問題点</A>
</DL>

<DL>
  <DT><A href="#sdk_4_01_pr">■NITRO-SDK 4.1 PR</A> (2007/05/18)
  <DD><A href="#note46-01">Note 46-01: (CARD) CARD_UnlockBackup 関数の修正</A>
  <DD><A href="#note46-02">Note 46-02: (CARD) キャッシュ無効化処理切り替え用関数の追加</A>
  <DD><A href="#note46-03">Note 46-03: (CARD) マイクサンプリング中にカードを抜いた際の不具合修正</A>
  <DD><A href="#note46-04">Note 46-04: (CARD) 新規バックアップデバイスへの対応</A>
  <DD><A href="#note46-05">Note 46-05: (CTRDG) CTRDG_GetPhiClock 関数の追加 </A>
  <DD><A href="#note46-06">Note 46-06: (DevEnv) ビルド変数 MAKELCF_FORMAT の定義変更および説明文の追加</A>
  <DD><A href="#note46-07">Note 46-07: (FS) FS_LoadOverlay 関数の修正</A>
  <DD><A href="#note46-08">Note 46-08: (GX) GX_SetVCount 関数の変更</A>
  <DD><A href="#note46-09">Note 46-09: (GX) Sub_Double3D サンプルデモの修正</A>
  <DD><A href="#note46-10">Note 46-10: (MB) DS ダウンロードプレイ子機デバッグ用プログラムの更新</A>
  <DD><A href="#note46-11">Note 46-11: (MB) MB_FakeSetCompareGGIDCallback 関数の追加</A>
  <DD><A href="#note46-12">Note 46-12: (MI) MI_SetMainMemoryPriority 関数のリファレンス修正</A>
  <DD><A href="#note46-13">Note 46-13: (MI) デバイスアクセス用ユーティリティ機能の追加</A>
  <DD><A href="#note46-14">Note 46-14: (MIC) MICAutoParam 構造体のリファレンスマニュアルの説明追記</A>
  <DD><A href="#note46-15">Note 46-15: (MIC) mic-2 サンプルデモの修正</A>
  <DD><A href="#note46-16">Note 46-16: (MTX) 行列関数に関する整理</A>
  <DD><A href="#note46-17">Note 46-17: (OS) OS_ResetSystem 関数の修正</A>
  <DD><A href="#note46-18">Note 46-18: (STD) 書式文字列関数の追加</A>
  <DD><A href="#note46-19">Note 46-19: (TOOL) makelcf SPECFILE の SearchSymbol 文の処理の不具合修正</A>
  <DD><A href="#note46-20">Note 46-20: (TOOL) makerom の 2Gbit ROM 正式サポート</A>
  <DD><A href="#note46-21">Note 46-21: (WFS) WFS ライブラリのテスト公開</A>
  <DD><A href="#note46-22">Note 46-22: (WM) WM_ERRCODE_OVER_MAX_ENTRY の発生条件に関する説明追記</A>
  <DD><A href="#note46-23">Note 46-23: (WM) WM_StartMPEx 関数での設定値の影響を一時的なものに変更</A>
  <DD><A href="#note46-24">Note 46-24: (WM) WM_StartMPEx 関数のオプション処理の変更</A>
  <DD><A href="#note46-25">Note 46-25: (WM) Wii との MP 通信における不具合修正</A>
  <DD><A href="#note46-26">Note 46-26: (WM) wmPadRead-child デモの追加</A>
  <DD><A href="#KnownIssues_4_01_pr">SDK 4.1 PRでの既知の問題点</A>
</DL>

<DL>
  <DT><A href="#sdk_4_00">■NITRO-SDK 4.0 正式版</A> (2007/02/15)
  <DD><A href="#note45-01">Note 45-01: (DevEnv) ソースコードの書式統一</A>
  <DD><A href="#note45-02">Note 45-02: (その他) アイコンデータの更新</A>
  <DD><A href="#KnownIssues_4_00">SDK 4.0 正式版での既知の問題点</A>
</DL>

<DL>
  <DT><A href="#sdk_4_00_rc">■NITRO-SDK 4.0 RC</A> (2007/01/22)
  <DD><A href="#note44-01">Note 44-01: (ENV) ENV ライブラリの修正</A>
  <DD><A href="#note44-02">Note 44-02: (FX) FX_AsinIdx 関数および FX_AcosIdx 関数の追加</A>
  <DD><A href="#note44-03">Note 44-03: (GX) GXBg23Control256x16Affine 構造体の追加</A>
  <DD><A href="#note44-04">Note 44-04: (GX) GX_SetVCount 関数のリファレンス修正</A>
  <DD><A href="#note44-05">Note 44-05: (MB) MB_End 関数の不具合修正</A>
  <DD><A href="#note44-06">Note 44-06: (MB) mb_child_simple.srl プログラムの修正</A>
  <DD><A href="#note44-07">Note 44-07: (OS) IRQ ハンドラの修正</A>
  <DD><A href="#note44-08">Note 44-08: (OS) 拡張言語対応アプリケーション作成に関するドキュメントを追加</A>
  <DD><A href="#note44-09">Note 44-09: (PM) LCD off 期間の調整</A>
  <DD><A href="#note44-10">Note 44-10: (TOOL) makebanner のリファレンスマニュアルの説明追加</A>
  <DD><A href="#note44-11">Note 44-11: (TOOL) makelcf のデフォルト IRQ スタックサイズ変更</A>
  <DD><A href="#KnownIssues_4_00_rc">SDK 4.0 RCでの既知の問題点</A>
</DL>

<DL>
  <DT><A href="#sdk_4_00_pr">■NITRO-SDK 4.0 PR</A> (2006/11/27)
  <DD><A href="#note43-01">Note 43-01: (CARD) DMA 転送中にカードを抜くと画像が乱れる不具合の修正</A>
  <DD><A href="#note43-02">Note 43-02: (CARD) カードの抜け検出方法に関する不具合修正</A>
  <DD><A href="#note43-03">Note 43-03: (CP) divider.h の修正</A>
  <DD><A href="#note43-04">Note 43-04: (DevEnv) NITRO-SDK パッケージのビルドに使用する CodeWarrior のバージョン変更</A>
  <DD><A href="#note43-05">Note 43-05: (DevEnv) enum を常に int サイズに変更</A>
  <DD><A href="#note43-06">Note 43-06: (GX) G3*_Vtx10 関数のリファレンス修正</A>
  <DD><A href="#note43-07">Note 43-07: (MB) ダウンロード中に蓋を閉じカードを抜いた際の不具合修正</A>
  <DD><A href="#note43-08">Note 43-08: (MB) MB_FakeSetVerboseScanCallback 関数の追加</A>
  <DD><A href="#note43-09">Note 43-09: (OS) OSOwnerInfo 構造体、OS_GetOwnerInfo 関数の変更</A>
  <DD><A href="#note43-10">Note 43-10: (OS) OS_Init 関数の V カウント調整</A>
  <DD><A href="#note43-11">Note 43-11: (OS) OS_TPrintfEx, OS_TVPrintfEx, OS_VSNPrintfEx 関数の追加</A>
  <DD><A href="#note43-12">Note 43-12: (OS) 拡張言語コードの韓国語対応</A>
  <DD><A href="#note43-13">Note 43-13: (PM) ストリーム再生中のカード抜け発生時に、電源が OFF されない不具合の修正</A>
  <DD><A href="#note43-14">Note 43-14: (SND) SND_FlushCommand 関数のスレッドセーフ化</A>
  <DD><A href="#note43-15">Note 43-15: (STD) STD_CopyLString, STD_CopyLStringZeroFill 関数の修正</A>
  <DD><A href="#note43-16">Note 43-16: (STD) Scanf 関数の文字クラス対応</A>
  <DD><A href="#note43-17">Note 43-17: (TOOL) bash の仕様変更への対応</A>
  <DD><A href="#note43-18">Note 43-18: (TOOL) makerom のリファレンスマニュアルの記述修正</A>
  <DD><A href="#note43-19">Note 43-19: (WM) サンプルデモの修正</A>
  <DD><A href="#KnownIssues_4_00_pr">SDK 4.0 PRでの既知の問題点</A>
</DL>

<DL>
  <DT><A href="#sdk_3_02">■NITRO-SDK 3.2 正式版</A> (2006/08/28)
  <DD><A href="#note42-01">Note 42-01: (CARD) CARD_GetRomHeader 関数のリファレンス修正</A>
  <DD><A href="#note42-02">Note 42-02: (GX) AntiAlias サンプルデモの修正</A>
  <DD><A href="#note42-03">Note 42-03: (OS) 関数コスト計測におけるバッファ溢れチェックの追加</A>
  <DD><A href="#note42-04">Note 42-04: (PM) ワイヤレス通信中のカード抜け発生時における不具合修正</A>
  <DD><A href="#note42-05">Note 42-05: (WM) サンプルデモの修正</A>
  <DD><A href="#KnownIssues_3_02">SDK 3.2 正式版での既知の問題点</A>
</DL>

<DL>
  <DT><A href="#sdk_3_02_rc2">■NITRO-SDK 3.2 RC2</A> (2006/08/17)
  <DD><A href="#note41-01">Note 41-01: (CARD) ワイヤレス通信中のカード抜け発生時に電源が OFF されない不具合の修正</A>
  <DD><A href="#note41-02">Note 41-02: (CP) CP_RestoreContext 関数内でのウェイトの追加</A>
  <DD><A href="#note41-03">Note 41-03: (CP) 割り込み内での除算器の使用に関する注意の追加</A>
  <DD><A href="#note41-04">Note 41-04: (CTRDG) カートリッジの活線挿抜に関する不具合修正</A>
  <DD><A href="#note41-05">Note 41-05: (OS) OS_SleepThreadDirect 関数の追加</A>
  <DD><A href="#note41-06">Note 41-06: (OS) スレッド切り替え処理の内部修正</A>
  <DD><A href="#note41-07">Note 41-07: (OS) 起動時の Vカウント調整</A>
  <DD><A href="#note41-08">Note 41-08: (PRC) 除算器に関するスレッドセーフ化</A>
  <DD><A href="#note41-09">Note 41-09: (STD) 文字コード変換関数の仕様変更</A>
  <DD><A href="#note41-10">Note 41-10: (WBT) WBT_CMD_REQ_GET_BLOCK_DONE 通知の不具合修正</A>
  <DD><A href="#note41-11">Note 41-11: (WBT) サンプルデモの修正</A>
  <DD><A href="#note41-12">Note 41-12: (WM) WM_SetWEPKey/Ex 関数の修正</A>
  <DD><A href="#note41-13">Note 41-13: (WM) wepMode のリセット処理の修正</A>
  <DD><A href="#note41-14">Note 41-14: (WM) wepMode 設定に関する不具合の修正</A>
  <DD><A href="#note41-15">Note 41-15: (WM) サンプルデモの修正</A>
  <DD><A href="#KnownIssues_3_02_rc2">SDK 3.2 RC2での既知の問題点</A>
</DL>

<DL>
  <DT><A href="#sdk_3_02_rc">■NITRO-SDK 3.2 RC</A> (2006/07/25)
  <DD><A href="#note40-01">Note 40-01: (CARD) カード抜け発生時に電源が OFF されないという不具合修正</A>
  <DD><A href="#note40-02">Note 40-02: (DevEnv) テンプレートファイルによる ITCM/DTCM 使用サイズ判定処理の不備</A>
  <DD><A href="#note40-03">Note 40-03: (MATH) MATHCompareFunc のリファレンス修正</A>
  <DD><A href="#note40-04">Note 40-04: (MATH) MATH_QSortStackSize 関数の変更</A>
  <DD><A href="#note40-05">Note 40-05: (MB) multiboot-PowerSave サンプルの修正</A>
  <DD><A href="#note40-06">Note 40-06: (MB) ライフタイム初期値の変更</A>
  <DD><A href="#note40-07">Note 40-07: (STD) 文字コード変換関数の修正</A>
  <DD><A href="#note40-08">Note 40-08: (VIB) VIB ライブラリの修正</A>
  <DD><A href="#note40-09">Note 40-09: (WM) サンプルデモの修正</A>
  <DD><A href="#note40-10">Note 40-10: (WM) 通信終了時の新規接続禁止</A>
  <DD><A href="#KnownIssues_3_02_rc">SDK 3.2 RCでの既知の問題点</A>
</DL>


<DL>
  <DT><A href="#sdk_3_02_pr">■NITRO-SDK 3.2 PR</A> (2006/07/07)
  <DD><A href="#note39-01">Note 39-01: (CARD) 抜け検出処理の修正</A>
  <DD><A href="#note39-02">Note 39-02: (CTRDG) AGB バックアップアクセス関数のリファレンス修正</A>
  <DD><A href="#note39-03">Note 39-03: (CTRDG) ドキュメントの修正</A>
  <DD><A href="#note39-04">Note 39-04: (DevEnv) make システムの共通定義ファイルにおいて古い CodeWarrior のサポートを停止</A>
  <DD><A href="#note39-05">Note 39-05: (MATH) MATH_QSort 関数の修正</A>
  <DD><A href="#note39-06">Note 39-06: (MI) LZ77圧縮時のオーバーアクセス不具合の修正</A>
  <DD><A href="#note39-07">Note 39-07: (MI) エンディアン変換関数の 8bit 版を追加</A>
  <DD><A href="#note39-08">Note 39-08: (OS) OS_InitException 関数の修正</A>
  <DD><A href="#note39-09">Note 39-09: (OS) 関数コスト計測の修正</A>
  <DD><A href="#note39-10">Note 39-10: (PM) LCD OFF 時にカードが抜けた場合、電源 OFF されないという不具合の修正</A>
  <DD><A href="#note39-11">Note 39-11: (PM) PM_GoSleepMode 関数のリファレンス修正</A>
  <DD><A href="#note39-12">Note 39-12: (PM) スリープモード後の RTC アラーム割り込み不具合の修正</A>
  <DD><A href="#note39-13">Note 39-13: (STD) STD_CopyLString 関数のリファレンス修正</A>
  <DD><A href="#note39-14">Note 39-14: (STD) STD_CopyLString 関数の仕様変更と STD_CopyLStringZeroFill 関数の追加</A>
  <DD><A href="#note39-15">Note 39-15: (STD) ShiftJIS <-> Unicode 変換関数の追加</A>
  <DD><A href="#note39-16">Note 39-16: (TOOL) CodeWarrior 2.x 用のオーバーレイ関連の新機能への対応</A>
  <DD><A href="#note39-17">Note 39-17: (TOOL) compstatic ツールのリファレンス修正</A>
  <DD><A href="#note39-18">Note 39-18: (TOOL) makerom の新仕様の 1Gbit/2Gbit ROM サポート</A>
  <DD><A href="#note39-19">Note 39-19: (TOOL) 有効な ROM パラメータの組み合わせの判定処理の追加</A>
  <DD><A href="#note39-20">Note 39-20: (WM) WFS サンプルデモの修正</A>
  <DD><A href="#note39-21">Note 39-21: (WM) WM_EndDataSharing 関数の変更</A>
  <DD><A href="#note39-22">Note 39-22: (WM) Wii との通信におけるリンクレベル値の調整</A>
  <DD><A href="#note39-23">Note 39-23: (WM) サンプルデモの修正</A>
  <DD><A href="#note39-24">Note 39-24: (WM) 初期化・終了関数の不具合修正</A>
  <DD><A href="#note39-25">Note 39-25: (WM) 初期化関数内のポートコールバック初期化の不具合修正</A>
  <DD><A href="#note39-26">Note 39-26: (WM) 切断時の不正な動作の修正</A>
  <DD><A href="#KnownIssues_3_02_pr">SDK 3.2 PRでの既知の問題点</A>
</DL>

<DL>
  <DT><A href="#sdk_3_01">■NITRO-SDK 3.1 正式版</A> (2006/05/02)
  <DD><A href="#note38-01">Note 38-01: (CARD) ROM の DMA 転送に関する修正</A>
  <DD><A href="#note38-02">Note 38-02: (CTRDG) AGB バックアップアクセス関数の追加</A>
  <DD><A href="#note38-03">Note 38-03: (CTRDG) CTRDG_SetPhiClock 関数, CTRDG_GetPhiClock 関数の追加</A>
  <DD><A href="#note38-04">Note 38-04: (FS) ROM アーカイブの内部修正</A>
  <DD><A href="#note38-05">Note 38-05: (FX) FX_Mul 関数の変更 </A>
  <DD><A href="#note38-06">Note 38-06: (FX) VEC_Normalize 関数の修正</A>
  <DD><A href="#note38-07">Note 38-07: (GX) G2_SetBlendAlpha 関数のリファレンスに記述の追加</A>
  <DD><A href="#note38-08">Note 38-08: (MATH) MATHCompareFunc のリファレンス修正</A>
  <DD><A href="#note38-09">Note 38-09: (MI) MI_CompressLZ 関数の圧縮不具合修正</A>
  <DD><A href="#note38-10">Note 38-10: (OS) OS_GetConsoleType 関数の修正</A>
  <DD><A href="#note38-11">Note 38-11: (OS) exceptionDisplay-2 サンプルデモの修正</A>
  <DD><A href="#note38-12">Note 38-12: (PRC) デモ用の図形辞書データの修正</A>
  <DD><A href="#KnownIssues_3_01">SDK 3.1 正式版での既知の問題点</A>
</DL>

<DL>
  <DT><A href="#sdk_3_01_rc">■NITRO-SDK 3.1 RC</A> (2006/04/11)
  <DD><A href="#note37-01">Note 37-01: (CARD) 新規バックアップデバイスへの対応</A>
  <DD><A href="#note37-02">Note 37-02: (DevEnv) .itcm.bss/.dtcm.bss/.wram.bss セクションの追加</A>
  <DD><A href="#note37-03">Note 37-03: (DevEnv) modulerules.cctype.CW の修正</A>
  <DD><A href="#note37-04">Note 37-04: (FX) MTX_Copy* 関数のリファレンス追加</A>
  <DD><A href="#note37-05">Note 37-05: (GX) G3OP_DUMMY_COMMAND の追加</A>
  <DD><A href="#note37-06">Note 37-06: (GX) ジオメトリコマンドサイクル一覧の修正</A>
  <DD><A href="#note37-07">Note 37-07: (MI) エンディアンを考慮するメモリアクセス関数の追加</A>
  <DD><A href="#note37-08">Note 37-08: (OS) OS_CheckHeap 関数の修正</A>
  <DD><A href="#note37-09">Note 37-09: (OS) アリーナの概要修正</A>
  <DD><A href="#note37-10">Note 37-10: (OS) スタックの8バイトアラインメント対応</A>
  <DD><A href="#note37-11">Note 37-11: (PM) PM_ForceToPowerOff 関数及び PM_ForceToPowerOffAsync 関数の修正</A>
  <DD><A href="#note37-12">Note 37-12: (SND) SND_SetTrackMuteEx 関数の追加</A>
  <DD><A href="#note37-13">Note 37-13: (TOOL) attachsign ツールのリファレンス修正</A>
  <DD><A href="#note37-14">Note 37-14: (TOOL) ppmconv ツールで読み込めない PPM ファイルがあった不具合の修正</A>
  <DD><A href="#note37-15">Note 37-15: (VIB) pulse_vib サンプルデモの修正</A>
  <DD><A href="#note37-16">Note 37-16: (WM) dataShare-Model サンプルデモの修正</A>
  <DD><A href="#note37-17">Note 37-17: (WM) wireless-all サンプルデモの追加</A>
  <DD><A href="#note37-18">Note 37-18: (WM) サンプルデモの修正</A>
  <DD><A href="#KnownIssues_3_01_rc">SDK 3.1 RCでの既知の問題点</A>
</DL>

<DL>
  <DT><A href="#sdk_3_01_pr">■NITRO-SDK 3.1 PR</A> (2006/03/14)
  <DD><A href="#note36-01">Note 36-01: (ARM7) コンポーネントでの抜け検出自動処理の改善</A>
  <DD><A href="#note36-02">Note 36-02: (CARD) CARD_CheckPulledOut 関数の内部修正</A>
  <DD><A href="#note36-03">Note 36-03: (CTRDG) AGB カートリッジ領域へのアクセス制限強化</A>
  <DD><A href="#note36-04">Note 36-04: (CTRDG) CTRDG_CheckPulledOut 関数の追加</A>
  <DD><A href="#note36-05">Note 36-05: (GX) 2D_CharBg_Direct サンプルデモの修正</A>
  <DD><A href="#note36-06">Note 36-06: (GX) G2_GetBG2ScrPtr 関数及び G2_GetBG3ScrPtr 関数のリファレンス修正</A>
  <DD><A href="#note36-07">Note 36-07: (MB) MB_FAKESCAN_PARENT_BEACON 通知の追加</A>
  <DD><A href="#note36-08">Note 36-08: (MB) MB_ReadMultiBootParentBssDesc 関数の動作変更</A>
  <DD><A href="#note36-09">Note 36-09: (MB) クローンブートサンプル親機への再接続時のリトライ不具合の修正</A>
  <DD><A href="#note36-10">Note 36-10: (MB) ドキュメントの更新</A>
  <DD><A href="#note36-11">Note 36-11: (MIC) 自動サンプリング時の制限の明記</A>
  <DD><A href="#note36-12">Note 36-12: (PM) PMAmpGain 列挙型に関する不具合修正</A>
  <DD><A href="#note36-13">Note 36-13: (PM) PM_ForceToPowerOff 関数及び PM_ForceToPowerOffAsync 関数の変更</A>
  <DD><A href="#note36-14">Note 36-14: (TOOL) makerom におけるワイルドカードによるファイル指定時の ROM 内収録順序の固定</A>
  <DD><A href="#note36-15">Note 36-15: (VIB) VIB ライブラリの追加</A>
  <DD><A href="#note36-16">Note 36-16: (WBT) WFS サンプルモジュールの修正</A>
  <DD><A href="#note36-17">Note 36-17: (WBT) 関数リファレンスの修正</A>
  <DD><A href="#note36-18">Note 36-18: (WBT) 関数リファレンス概要追加</A>
  <DD><A href="#note36-19">Note 36-19: (WM) MP 通信中の子機の Null 応答に関する仕様変更</A>
  <DD><A href="#note36-20">Note 36-20: (WM) WMGameInfo 構造体の定義変更</A>
  <DD><A href="#note36-21">Note 36-21: (WM) WM_IsValidGameBeacon, WM_IsValidGameInfo 関数の追加</A>
  <DD><A href="#note36-22">Note 36-22: (WM) minPollBmpMode の不具合の修正</A>
  <DD><A href="#note36-23">Note 36-23: (WM) ドキュメントの更新</A>
  <DD><A href="#note36-24">Note 36-24: (その他) マクロの記述修正</A>
  <DD><A href="#KnownIssues_3_01_pr">SDK 3.1 PRでの既知の問題点</A>
</DL>

<DL>
  <DT><A href="#sdk_3_00">■NITRO-SDK 3.0 正式版</A> (2006/01/16)
  <DD><A href="#note35-01">Note 35-01: (CARD) 関数リファレンス概要追加</A>
  <DD><A href="#note35-02">Note 35-02: (DevEnv) packnlf ツールのリファレンスマニュアル追加</A>
  <DD><A href="#note35-03">Note 35-03: (DevEnv) ソースコードの書式統一</A>
  <DD><A href="#note35-04">Note 35-04: (MI) MI_CompressLZFast 関数, ntrcomp.exe の LZ 圧縮不具合修正</A>
  <DD><A href="#note35-05">Note 35-05: (OS) OS_ResetSystem 関数の不具合修正</A>
  <DD><A href="#note35-06">Note 35-06: (OS) 中国版起動画面の修正</A>
  <DD><A href="#note35-07">Note 35-07: (PRC) デモ用の図形辞書データの修正</A>
  <DD><A href="#note35-08">Note 35-08: (WM) サンプルデモのデバッグ文字列の表示修正</A>
  <DD><A href="#note35-09">Note 35-09: (WM) 内部の通信パラメータの補正</A>
  <DD><A href="#KnownIssues_3_00">SDK 3.0 正式版での既知の問題点</A>
</DL>

<DL>
  <DT><A href="#sdk_3_00_rc3">■NITRO-SDK 3.0 RC3</A> (2005/12/26)
  <DD><A href="#note34-01">Note 34-01: (MATH) ビット演算関数の追加</A>
  <DD><A href="#note34-02">Note 34-02: (MB) MB_ReadSegment関数の省メモリ指定時の不具合の修正</A>
  <DD><A href="#note34-03">Note 34-03: (MB) 悪条件下でのMP通信効率の改善</A>
  <DD><A href="#note34-04">Note 34-04: (OS) DC_TouchRange関数のリファレンス修正</A>
  <DD><A href="#note34-05">Note 34-05: (OS) OS_CreateThread 関数の修正</A>
  <DD><A href="#note34-06">Note 34-06: (WBT) wbt-1 サンプルデモの修正</A>
  <DD><A href="#note34-07">Note 34-07: (WBT) ユーザコールバックの不具合修正</A>
  <DD><A href="#note34-08">Note 34-08: (WM) MP 通信パラメータの不具合修正</A>
  <DD><A href="#note34-09">Note 34-09: (WM) WH に関するパラメータ設定方法の変更</A>
  <DD><A href="#note34-10">Note 34-10: (WM) 通信切断時の内部動作の改善</A>
  <DD><A href="#KnownIssues_3_00_rc3">SDK 3.0 RC3での既知の問題点</A>
</DL>

<DL>
  <DT><A href="#sdk_3_00_rc2">■NITRO-SDK 3.0 RC2</A> (2005/12/05)
  <DD><A href="#note33-01">Note 33-01: (CARD) バックアップ操作関数の不具合修正</A>
  <DD><A href="#note33-02">Note 33-02: (CTRDG) AGBカートリッジのアクセス許可関数の追加</A>
  <DD><A href="#note33-03">Note 33-03: (DevEnv) SDK バージョン比較用マクロの追加</A>
  <DD><A href="#note33-04">Note 33-04: (DevEnv) SDK_INLINE, SDK_DECL_INLINE の追加</A>
  <DD><A href="#note33-05">Note 33-05: (DevEnv) makebanner ツールの修正</A>
  <DD><A href="#note33-06">Note 33-06: (DevEnv) ntexconv の更新</A>
  <DD><A href="#note33-07">Note 33-07: (DevEnv) packnlf ツールの追加</A>
  <DD><A href="#note33-08">Note 33-08: (MB) MBP サンプルモジュールの修正</A>
  <DD><A href="#note33-09">Note 33-09: (MB) MB_FAKE_WORK_SIZEの定義を追加</A>
  <DD><A href="#note33-10">Note 33-10: (MB) 親機ビーコンのフラグに関する不具合修正</A>
  <DD><A href="#note33-11">Note 33-11: (MI)MI_CompressLZFast関数の追加</A>
  <DD><A href="#note33-12">Note 33-12: (OS) ARM7デバッグ出力自動化ビルドスイッチの追加</A>
  <DD><A href="#note33-13">Note 33-13: (OS) Ｖブランク待ち関数の定義変更</A>
  <DD><A href="#note33-14">Note 33-14: (OS) サンプルデモからの OS_InitPrintServer, OS_PrintServer 関数の削除</A>
  <DD><A href="#note33-15">Note 33-15: (OS) サンプルデモからの PXI_Init 関数の削除</A>
  <DD><A href="#note33-16">Note 33-16: (OS) サンプルデモの SVC_WaitVBlankIntr 関数の変更</A>
  <DD><A href="#note33-17">Note 33-17: (OS) 拡張メイン RAM アリーナの開始位置修正</A>
  <DD><A href="#note33-18">Note 33-18: (WBT) WFS サンプルモジュールの修正</A>
  <DD><A href="#note33-19">Note 33-19: (WBT) WFS 関連サンプルデモの修正</A>
  <DD><A href="#note33-20">Note 33-20: (WM) 2D_CharBg_3, Sub_CharBg_3 サンプルデモの更新</A>
  <DD><A href="#note33-21">Note 33-21: (WM) MP通信のタイミング設定関数の追加</A>
  <DD><A href="#note33-22">Note 33-22: (WM) MP通信の送信サイズ設定関数の追加</A>
  <DD><A href="#note33-23">Note 33-23: (WM) MP通信間隔の制御機能の追加</A>
  <DD><A href="#note33-24">Note 33-24: (WM) dataShare-Model サンプルデモの更新</A>
  <DD><A href="#note33-25">Note 33-25: (WM) dataShare-Model サンプルデモの表示修正</A>
  <DD><A href="#note33-26">Note 33-26: (WM) フレームあたりの最大MP通信回数の設定値の追加</A>
  <DD><A href="#note33-27">Note 33-27: (WM) 受信強度レベルの仕様変更</A>
  <DD><A href="#note33-28">Note 33-28: (WM) 送受信サイズの事前チェックを無効化するオプションの追加</A>
  <DD><A href="#note33-29">Note 33-29: (WM) 無線通信のイベントカウンタに関する注意</A>
  <DD><A href="#KnownIssues_3_00_rc2">SDK 3.0 RC2での既知の問題点</A>
</DL>

<DL>
  <DT><A href="#sdk_3_00_rc">■NITRO-SDK 3.0 RC</A> (2005/11/07)
  <DD><A href="#note32-01">Note 32-01: (CARD) EEPROM デバイス操作の内部処理修正</A>
  <DD><A href="#note32-02">Note 32-02: (CARD) ROM アクセス後の抜け検出処理の追加</A>
  <DD><A href="#note32-03">Note 32-03: (CARD) 新規バックアップデバイスへの対応</A>
  <DD><A href="#note32-04">Note 32-04: (DevEnv) #pragma define_section のパラメータ修正</A>
  <DD><A href="#note32-05">Note 32-05: (DevEnv) ENV ライブラリ用リソースデータ変換ツールの追加</A>
  <DD><A href="#note32-06">Note 32-06: (DevEnv) NITRO-SDK パッケージ作成スクリプトの修正</A>
  <DD><A href="#note32-07">Note 32-07: (DevEnv) SDK パッケージのビルドに使用した CodeWarrior のバージョンの変更</A>
  <DD><A href="#note32-08">Note 32-08: (DevEnv) コンパイルターゲットに関するリファレンス追加</A>
  <DD><A href="#note32-09">Note 32-09: (ENV) ENV ライブラリのリファレンス追加</A>
  <DD><A href="#note32-10">Note 32-10: (ENV) ENV ライブラリの変更</A>
  <DD><A href="#note32-11">Note 32-11: (GX) G3BS_LoadMtx43 関数の修正</A>
  <DD><A href="#note32-12">Note 32-12: (GX) Sub_Double3D サンプルデモの再修正</A>
  <DD><A href="#note32-13">Note 32-13: (MATH) MATH_QSort 関数の不具合修正</A>
  <DD><A href="#note32-14">Note 32-14: (OS) ARM7 専用WRAMアリーナの HI アドレス計算の修正</A>
  <DD><A href="#note32-15">Note 32-15: (OS) OS_GetTotalOccupiedSize 関数の追加</A>
  <DD><A href="#note32-16">Note 32-16: (OS) OS_PutString 関数の修正</A>
  <DD><A href="#note32-17">Note 32-17: (OS) SDK_COMPILER_ASSERT の追加</A>
  <DD><A href="#note32-18">Note 32-18: (OS) Vブランク待ち関数の改良</A>
  <DD><A href="#note32-19">Note 32-19: (OS) キャッシュ関数の引数 const 化</A>
  <DD><A href="#note32-20">Note 32-20: (OS) スタック溢れチェック関数の修正</A>
  <DD><A href="#note32-21">Note 32-21: (OS) 引数データバッファ切り換えのサポート</A>
  <DD><A href="#note32-22">Note 32-22: (OS) 実時間とチック値の変換マクロの修正</A>
  <DD><A href="#note32-23">Note 32-23: (OS) 中国版起動画面の更新</A>
  <DD><A href="#note32-24">Note 32-24: (OS)　終了するスレッドを含むスレッドキュー操作の修正</A>
  <DD><A href="#note32-25">Note 32-25: (PRC) サンプルツール pdic2c.pl の修正</A>
  <DD><A href="#note32-26">Note 32-26: (RTC) RTC の曜日情報取得の変更</A>
  <DD><A href="#note32-27">Note 32-27: (SND) SND_CalcDecibel 関数に引数0を入れたとき適切な値を返さない問題を修正</A>
  <DD><A href="#note32-28">Note 32-28: (STD) STD ライブラリの追加</A>
  <DD><A href="#note32-29">Note 32-29: (WBT) GetBlock 要求通知の不具合修正</A>
  <DD><A href="#note32-30">Note 32-30: (WBT) WFS サンプルモジュールの修正</A>
  <DD><A href="#note32-31">Note 32-31: (WM) WM テストツールの更新</A>
  <DD><A href="#note32-32">Note 32-32: (WM) WM_SetLifeTime 関数のリファレンス記述の修正</A>
  <DD><A href="#note32-33">Note 32-33: (WM) mongoose コンポーネントの改良</A>
  <DD><A href="#note32-34">Note 32-34: (WM) port 受信コールバックに通知する情報の追加</A>
  <DD><A href="#note32-35">Note 32-35: (WM) port 受信コールバックの初期化時の通知を追加</A>
  <DD><A href="#note32-36">Note 32-36: (WM) テスト用 API の追加</A>
  <DD><A href="#note32-37">Note 32-37: (WM) 子機が WM_EndMP 関数を呼ぶとワイヤレス通信機能が停止する不具合の修正</A>
  <DD><A href="#note32-38">Note 32-38: (WM) 自ら切断した場合の切断通知の追加</A>
  <DD><A href="#note32-39">Note 32-39: (WM) 接続と切断に関する内部動作の再修正</A>
  <DD><A href="#KnownIssues_3_00_rc">SDK 3.0 RCでの既知の問題点</A>
</DL>

<DL>
  <DT><A href="#sdk_3_00_pr4">■NITRO-SDK 3.0 PR4</A> (2005/09/08)
  <DD><A href="#note31-01">Note 31-01: (CARD) CARD_CancelBackupAsync 関数の追加</A>
  <DD><A href="#note31-02">Note 31-02: (CARD) FRAM デバイス操作の内部処理修正</A><font size="-1"color="#808080"> (NITRO-SDK 2.2 正式版 で公開済)</font size>
  <DD><A href="#note31-03">Note 31-03: (CARD) エラーコード CARD_RESULT_NO_RESPONSE の追加</A>
  <DD><A href="#note31-04">Note 31-04: (DevEnv) lsf ファイルにおけるオーバーレイグループのサポート</A>
  <DD><A href="#note31-05">Note 31-05: (DevEnv) makelcf における特定のセクション名での不具合の修正</A>
  <DD><A href="#note31-06">Note 31-06: (DevEnv) makelcf の修正</A>
  <DD><A href="#note31-07">Note 31-07: (DevEnv) ツールコマンド loadrun, nitrorun の追加</A>
  <DD><A href="#note31-08">Note 31-08: (ENV) 環境リソースライブラリ libenv*.a の追加</A>
  <DD><A href="#note31-09">Note 31-09: (FS) FS_EndOverlay関数の修正</A><font size="-1"color="#808080"> (NITRO-SDK 2.2 正式版 で公開済)</font size>
  <DD><A href="#note31-10">Note 31-10: (FS) ドキュメントの修正</A><font size="-1"color="#808080"> (NITRO-SDK 2.2 正式版 で公開済)</font size>
  <DD><A href="#note31-11">Note 31-11: (FX) FX_FX64C_TO_F32 マクロの修正</A>
  <DD><A href="#note31-12">Note 31-12: (FX) FX_InvSqrt 関数の不具合修正</A><font size="-1"color="#808080"> (NITRO-SDK 2.2 正式版 で公開済)</font size>
  <DD><A href="#note31-13">Note 31-13: (MB) MB_GetMultiBootDownloadParameter 関数の追加</A><font size="-1"color="#808080"> (NITRO-SDK 2.2 正式版 で公開済)</font size>
  <DD><A href="#note31-14">Note 31-14: (NVRAM) NVRAM からデータを読み出す際のエラー判定に関する不具合の修正</A>
  <DD><A href="#note31-15">Note 31-15: (OS) ARM7 側のデバッグ出力関数のリファレンス追加</A><font size="-1"color="#808080"> (NITRO-SDK 2.2 正式版 で公開済)</font size>
  <DD><A href="#note31-16">Note 31-16: (OS) DTCM アリーナの上位アドレス不具合の修正</A>
  <DD><A href="#note31-17">Note 31-17: (OS) NitroStaticInit 関数のリファレンス追加</A><font size="-1"color="#808080"> (NITRO-SDK 2.2 正式版 で公開済)</font size>
  <DD><A href="#note31-18">Note 31-18: (OS) OSThread 関連の関数の引数 const 型の整理</A>
  <DD><A href="#note31-19">Note 31-19: (OS) OS_GetOpt 関数の追加</A>
  <DD><A href="#note31-20">Note 31-20: (SND) キャッシュ無効化処理の最適化</A><font size="-1"color="#808080"> (NITRO-SDK 2.2 正式版 で公開済)</font size>
  <DD><A href="#note31-21">Note 31-21: (WM) MP 通信時の切断検知処理の不具合修正</A><font size="-1"color="#808080"> (NITRO-SDK 2.2 正式版 で公開済)</font size>
  <DD><A href="#note31-22">Note 31-22: (WM) SSID マッチング長指定可能なスキャン種類の追加</A>
  <DD><A href="#note31-23">Note 31-23: (WM) インフラストラクチャモードにおけるスキャンの SSID マッチング長の修正</A>
  <DD><A href="#note31-24">Note 31-24: (WM) 子機接続に関する内部処理の修正</A><font size="-1"color="#808080"> (NITRO-SDK 2.2 正式版 で公開済)</font size>
  <DD><A href="#note31-25">Note 31-25: (WM) 接続失敗時の原因をより詳細にするインターフェースの追加</A>
  <DD><A href="#KnownIssues_3_00_pr4">SDK 3.0 PR4での既知の問題点</A>
</DL>

<DL>
  <DT><A href="#sdk_3_00_pr3">■NITRO-SDK 3.0 PR3</A> (2005/08/10)
  <DD><A href="#note30-01">Note 30-01: (CARD) CARD_CheckPulledOut 関数のリファレンス修正</A><font size="-1"color="#808080"> (NITRO-SDK 2.2 RC で公開済)</font size>
  <DD><A href="#note30-02">Note 30-02: (CARD) CARD_IdentifyBackup 関数の引数制限</A><font size="-1"color="#808080"> (NITRO-SDK 2.2 RC で公開済)</font size>
  <DD><A href="#note30-03">Note 30-03: (MB) サンプルデモの修正</A><font size="-1"color="#808080"> (NITRO-SDK 2.2 RC で公開済)</font size>
  <DD><A href="#note30-04">Note 30-04: (OS) OS_SetThreadDestructorStack 関数の追加</A>
  <DD><A href="#note30-05">Note 30-05: (OS) OS_Sleep 関数で用いるアラームのキャンセル処理</A>
  <DD><A href="#note30-06">Note 30-06: (WM) 子機側の過負荷時の処理の変更</A>
  <DD><A href="#note30-07">Note 30-07: (WM) 切断時の内部動作の変更</A><font size="-1"color="#808080"> (NITRO-SDK 2.2 正式版 で公開済)</font size>
  <DD><A href="#KnownIssues_3_00_pr3">SDK 3.0 PR3での既知の問題点</A>
</DL>

<DL>
  <DT><A href="#sdk_3_00_pr2">■NITRO-SDK 3.0 PR2</A> (2005/08/04)
  <DD><A href="#note29-01">Note 29-01: (DevEnv) ISD_NITRO_DEBUGGER のパス修正</A><font size="-1"color="#808080"> (NITRO-SDK 2.2 RC で公開済)</font size>
  <DD><A href="#note29-02">Note 29-02: (GX) Sub_Double3D サンプルデモの再修正</A><font size="-1"color="#808080"> (NITRO-SDK 2.2 RC で公開済)</font size>
  <DD><A href="#note29-03">Note 29-03: (GX) ディスプレイリストの状態取得関数の引数へ const 修飾子を追加</A><font size="-1"color="#808080"> (NITRO-SDK 2.2 RC で公開済)</font size>
  <DD><A href="#note29-04">Note 29-04: (OS) OS_GetLowEntropyData 関数の追加</A>
  <DD><A href="#note29-05">Note 29-05: (PM) LCD オフ状態からスリープモードに移行したあとの復帰処理の修正</A><font size="-1"color="#808080"> (NITRO-SDK 2.2 RC で公開済)</font size>
  <DD><A href="#note29-06">Note 29-06: (WM) WM_SetIndCallback 関数のコールバックへの通知の追加</A>
  <DD><A href="#note29-07">Note 29-07: (WM) WM_SetPowerSaveMode 関数の追加</A>
  <DD><A href="#note29-08">Note 29-08: (WM) ignoreFatalError 設定時の復帰不具合の修正</A><font size="-1"color="#808080"> (NITRO-SDK 2.2 RC で公開済)</font size>
  <DD><A href="#note29-09">Note 29-09: (WM) 子機側の受信処理の変更</A>
  <DD><A href="#note29-10">Note 29-10: (WVR) thumb ビルド版 ichneumon コンポーネントの不具合修正</A><font size="-1"color="#808080"> (NITRO-SDK 2.2 RC で公開済)</font size>
  <DD><A href="#KnownIssues_3_00_pr2">SDK 3.0 PR2での既知の問題点</A>
</DL>

<DL>
  <DT><A href="#sdk_3_00_pr">■NITRO-SDK 3.0 PR</A> (2005/07/22)
  <DD><A href="#note28-01">Note 28-01: (Cht) ピクトキャッチ用デモの追加</A>
  <DD><A href="#note28-02">Note 28-02: (DevEnv) nitro.h のプリコンパイルヘッダ対応</A>
  <DD><A href="#note28-03">Note 28-03: (FS) オーバーレイ関数の動作変更</A><font size="-1"color="#808080"> (NITRO-SDK 2.2 RC で公開済)</font size>
  <DD><A href="#note28-04">Note 28-04: (GX) GX サンプルデモの修正</A>
  <DD><A href="#note28-05">Note 28-05: (MATH) MD5 関数の高速化</A><font size="-1"color="#808080"> (NITRO-SDK 2.2 RC で公開済)</font size>
  <DD><A href="#note28-06">Note 28-06: (OS) IRQ スタックのスタック溢れチェック機構の追加</A>
  <DD><A href="#note28-07">Note 28-07: (OS) OS_GetArgc 関数および OS_GetArgv 関数による引数のサポート</A>
  <DD><A href="#note28-08">Note 28-08: (OS) OS_KillThread 関数と OS_KillThreadWithPriority 関数の追加</A>
  <DD><A href="#note28-09">Note 28-09: (OS) スレッドデストラクタの実装</A>
  <DD><A href="#note28-10">Note 28-10: (OS) スレッド構造体へのユーザパラメータ追加</A>
  <DD><A href="#note28-11">Note 28-11: (OS) スレッド最大数の制限を撤廃</A>
  <DD><A href="#KnownIssues_3_00_pr">SDK 3.0 PRでの既知の問題点</A>
</DL>

<H4>NITRO-SDK 3.0シリーズと NITRO-SDK 2.2シリーズは、NITRO-SDK 2.2 PR を基点として枝分かれしていて、並列的にバージョン管理しています。<br>
ただし 2.2シリーズでの変更はすべて 3.0シリーズに含まれています。<br>
2.2シリーズの詳細は<A href="changelog2.2branch.html">こちら</A></H4>

<DL>
  <DT><A href="#sdk_2_02_pr">■NITRO-SDK 2.2 PR</A> (2005/07/15)
  <DD><A href="#note27-01">Note 27-01: (CARD) CARD_CheckPulledOut 関数の追加</A>
  <DD><A href="#note27-02">Note 27-02: (CARD) 新規バックアップデバイスへの対応</A>
  <DD><A href="#note27-03">Note 27-03: (CTRDG) カートリッジ情報取得時のキャッシュ操作の修正</A>
  <DD><A href="#note27-04">Note 27-04: (DevEnv) bin2obj ツールの追加</A>
  <DD><A href="#note27-05">Note 27-05: (DevEnv) CYGWIN の cygdrive prefix が /cygdrive ではない場合のサポート</A>
  <DD><A href="#note27-06">Note 27-06: (DevEnv) LCF テンプレートの修正</A>
  <DD><A href="#note27-07">Note 27-07: (DevEnv) rsf の StackSize 指定の不具合修正</A>
  <DD><A href="#note27-08">Note 27-08: (DevEnv) TS_VERSION のデフォルト値の変更</A>
  <DD><A href="#note27-09">Note 27-09: (DevEnv) #include のサーチパスの変更</A>
  <DD><A href="#note27-10">Note 27-10: (FS) FS_CreateFileFromMemory 関数および FS_CreateFileFromRom 関数の追加</A>
  <DD><A href="#note27-11">Note 27-11: (FS) FS_End 関数の追加</A>
  <DD><A href="#note27-12">Note 27-12: (FS) FS_WaitAsync 関数の不具合修正</A>
  <DD><A href="#note27-13">Note 27-13: (FS) オーバーレイのアンロード時の不具合修正</A>
  <DD><A href="#note27-14">Note 27-14: (FX) 逆正接関数の不具合修正</A>
  <DD><A href="#note27-15">Note 27-15: (GX) Sub_Double3D サンプルデモの修正</A>
  <DD><A href="#note27-16">Note 27-16: (GX) ディスプレイリスト操作関数内でのASSERT不具合修正</A>
  <DD><A href="#note27-17">Note 27-17: (MATH) MATH_QSort 関数の不具合修正</A>
  <DD><A href="#note27-18">Note 27-18: (MATH) SHA-1 関数の高速化</A>
  <DD><A href="#note27-19">Note 27-19: (MATH) 高速フーリエ変換関数の追加</A>
  <DD><A href="#note27-20">Note 27-20: (MB) multiboot-wfs サンプルの追加</A>
  <DD><A href="#note27-21">Note 27-21: (MB) デバッグ用の拡張メモリ領域の解放</A>
  <DD><A href="#note27-22">Note 27-22: (MB) ユーザ定義拡張パラメータの追加</A>
  <DD><A href="#note27-23">Note 27-23: (MI) MI_CompressHuffman 関数および ntrcomo.exe のハフマン圧縮不具合修正</A>
  <DD><A href="#note27-24">Note 27-24: (OS) OS_Sleep 関数の内部動作修正</A>
  <DD><A href="#note27-25">Note 27-25: (OS) OS_TryLockMutex 関数不具合の修正</A>
  <DD><A href="#note27-26">Note 27-26: (OS) OS_YieldThread 関数の追加</A>
  <DD><A href="#note27-27">Note 27-27: (OS) 起動時初期化処理の内部修正</A>
  <DD><A href="#note27-28">Note 27-28: (OS) 中国版起動画面処理の拡張</A>
  <DD><A href="#note27-29">Note 27-29: (OS) データキャッシュのフラッシュ不具合の修正</A>
  <DD><A href="#note27-30">Note 27-30: (OS) 複数の OSMutex をロックする際の不具合修正</A>
  <DD><A href="#note27-31">Note 27-31: (OS) ヘッダファイルに関するリファレンス追加</A>
  <DD><A href="#note27-32">Note 27-32: (RTC) 日付・時刻と総経過秒の相互変換関数の追加</A>
  <DD><A href="#note27-33">Note 27-33: (RTC) 日付・時刻を変更する API への制限追加</A>
  <DD><A href="#note27-34">Note 27-34: (WBT) Wbt-fs サンプルデモの修正</A>
  <DD><A href="#note27-35">Note 27-35: (WBT) WBT サンプルデモの修正</A>
  <DD><A href="#note27-36">Note 27-36: (WM) Key Sharing 関数の仕様変更と廃止予定の明記</A>
  <DD><A href="#note27-37">Note 27-37: (WM) WM_StartScanEx 関数の内部動作の変更</A>
  <DD><A href="#note27-38">Note 27-38: (WM) WMTestTool.srl の更新</A>
  <DD><A href="#note27-39">Note 27-39: (WM) 子機が接続していない場合での MP 通信の抑止</A>
  <DD><A href="#note27-40">Note 27-40: (WM) 子機切断通知の不具合修正</A>
  <DD><A href="#note27-41">Note 27-41: (WM) フレームあたりの MP 通信回数制限の追加</A>
  <DD><A href="#KnownIssues_2_02_pr">SDK 2.2 PRでの既知の問題点</A>
</DL>
<DL>
  <DT><A href="changelog-oldver.html">→ 過去の変更履歴</A>
</DL>


<HR>
<H2 style="line-height: 0"><A name="sdk_4_02" id="sdk_4_02">■ NITRO-SDK Version 4.2 正式版</A></H2>
<DIV style="text-align: right">
<P style="line-height: 0">(2007/12/10)</P>
</DIV>

<HR>
<H3><A name="note51-01" id="note51-01">Note 51-01: (WBT) WBT_CancelCurrentCommand 関数の不具合修正</A></H3>
<P>複数の相手に発行したコマンドが完了しないうちに WBT_CancelCurrentCommand 関数を呼び出すと、キャンセルされた相手から次に発行されるコマンドがいつまでも完了しなくなるという不具合があり、この問題を修正しました。
</P>

<HR>
<H3><A name="KnownIssues_4_02" id="KnownIssues_4_02">SDK 4.2 正式版 での既知の問題点</A></H3>
<P><UL>
<LI>MATH_FFTReal 関数に不具合があり、正しい結果が得られません。<BR>
修正されるまでの間は、MATH_FFT 関数の入力の虚数部に 0 を入れることで代用してください。</UL></P>

<HR>
<H2 style="line-height: 0"><A name="sdk_4_02_rc" id="sdk_4_02_rc">■ NITRO-SDK Version 4.2 RC</A></H2>
<DIV style="text-align: right">
<P style="line-height: 0">(2007/11/28)</P>
</DIV>

<HR>
<H3><A name="note50-01" id="note50-01">Note 50-01: (MI) LZ77 圧縮の拡張フォーマットを追加</A></H3>
<P>LZ77 圧縮の拡張フォーマットを追加しました。<BR>
ntrcomp.exe で -lex オプションを使用して圧縮する、もしくは MI_CompressLZEx 関数、MI_CompressLZExFast 関数を使用することで LZ77 拡張圧縮が利用可能です。<BR>
<BR>
展開に関しては、これまでの LZ77 用の展開関数を使用して展開してください。<BR>
<BR>
旧来の LZ77 圧縮と比較してより高い圧縮率が期待できますが、圧縮速度のワーストケースを比較すると、旧来版の LZ77 圧縮よりも数倍の時間を費やすことがあります。<BR>
<BR>
展開速度は拡張版、旧来版ともに同等です。
</P>

<HR>
<H3><A name="note50-02" id="note50-02">Note 50-02: (GX) GX_SetVCount 関数の修正</A></H3>
<P><a href="changelog.html#note46-08">Note 46-08</a> の変更で加えた制限が不十分であったため修正し、制限を強化しました。<BR>
また、それの変更に伴って関数リファレンスも修正しました。
</P>

<HR>
<H3><A name="note50-03" id="note50-03">Note 50-03: (MATH) fft-2 サンプルデモの変更と修正</A></H3>
<P>math/fft-2 サンプルデモの画面表示とフーリエ変換の処理内容に問題がありましたので修正しました。<BR>
また、マイク入力のバーによるスペクトル表示の仕様を変更し、新規に、音階ごとに分けて表示するモードを追加しました。
</P>

<HR>
<H3><A name="note50-04" id="note50-04">Note 50-04: (MI) ハフマン圧縮の不具合修正</A></H3>
<P>ntrcomp ツール及び、MI_CompressHuffman 関数でのハフマン圧縮に不具合が見つかり、8bit の符号が 17bit 以上に符号化された場合に誤った圧縮結果となることがありました。<BR>
この不具合を修正しました。
</P>

<HR>
<H3><A name="note50-05" id="note50-05">Note 50-05: (OS) Vカウントアラームの不具合修正</A></H3>
<P>周期的な Vカウントアラームを複数利用中にデバッガで中断と再開を繰り返すと、一部の Vカウントアラームが発生しなくなるという不具合がありましたので、これを修正しました。<BR>
タッチパネルの自動サンプリングでは、この機能を使用していましたので同様に問題が修正されています。
</P>

<HR>
<H3><A name="note50-06" id="note50-06">Note 50-06: (PM) PM_GoSleepMode 関数前後のチック値不整合の修正</A></H3>
<P>PM_GoSleepMode 関数が 7.5 フレーム以上タイマー割込みを禁止しているために、スリープをする前後で OS_GetTick 関数で取得できるチック値に不整合が起こる場合がありましたが、これを修正しました。
</P>

<HR>
<H3><A name="note50-07" id="note50-07">Note 50-07: (PRC) サンプルデモ用ツール pdic2c.pl の修正</A></H3>
<P>サンプルデモ用ツールの pdic2c.pl に、入力データの各行にコメントが付いていないと正常に処理しないという不具合がありましたので、これを修正しました。
</P>

<HR>
<H3><A name="note50-08" id="note50-08">Note 50-08: (TOOL) ntrcomp.exe での LZ77 圧縮に指定できるパラメータを廃止</A></H3>
<P>ntrcomp ツールでは、LZ77 圧縮の際に文字列一致検索の開始オフセット値をオプションとして指定することができましたが、NitroSDK3.0 以降ではこのパラメータが使用されない状態となっていました。<BR>
既にこのパラメータは不要となっていましたので、ドキュメントやヘルプから削除し正式に廃止しました。
</P>

<HR>
<H3><A name="note50-09" id="note50-09">Note 50-09: (TOOL) ntrcomp.exe でのテキスト出力時にエンディアン指定を追加</A></H3>
<P>ntrcomp ツールには、C言語の配列定義のテキストとして結果を出力する為の -t[width] オプションが存在しましたが、width に2又は4を指定した場合にはリトルエンディアン形式でデータが出力されていました。<BR>
ビッグエンディアンでテキストデータを出力する為のオプションとして、-T[width] オプションを追加しました。
</P>

<HR>
<H3><A name="note50-10" id="note50-10">Note 50-10: (TOOL) ntrcomp.exe でのデータサイズアライメントに8,16,32を追加</A></H3>
<P>ntrcomp ツールでは -A4 オプションを付けることで圧縮後のデータサイズを 4Byte の倍数にアラインする機能がありましたが、-A8, -A16, -A32 を指定する事でアライメント指定に 8Byte, 16Byte, 32Byte を指定できるように変更しました。
</P>

<HR>
<H3><A name="note50-11" id="note50-11">Note 50-11: (TOOL) ntrcomp.exe に解凍オプションを追加</A></H3>
<P>ntrcomp.exe を用いて圧縮されたデータを PC 上で解凍する為に、ntrcomp のオプションとして -x オプションを追加しました。
</P>

<HR>
<H3><A name="note50-12" id="note50-12">Note 50-12: (WBT) 複数子機へのブロック転送に関する不具合修正</A></H3>
<P>同一の ID に対するブロック転送要求が複数の子機から同時に発生した場合、通信タイミングによっては一部の子機だけが正常な完了応答をいつまでも受け取れないことがあるという不具合があり、この問題を修正しました。
</P>

<HR>
<H3><A name="note50-13" id="note50-13">Note 50-13: (WM) WM_SetMPDataToPort* 関数の送信サイズ制限の変更</A></H3>
<P>これまでは、現在の自分の最大送信容量より大きなサイズのデータを WM_SetMPDataToPort* 関数で送信しようとすると WM_ERRCODE_INVALID_PARAM のエラーが返っていましたが、この制限を廃止しました。<BR>
ただし、送信容量より大きなサイズのデータをセットしてしまうと送信キューを占有し続けますので注意が必要です。
</P>

<HR>
<H3><A name="note50-14" id="note50-14">Note 50-14: (WM) dataSharing-model サンプルデモの修正</A></H3>
<P>WM のサンプルデモについて以下の修正を行いました。
<UL>
<LI>$NitroSDK/build/demos/wm/dataSharing-model サンプルデモについてデータシェアリングが正確に行われていることをより良く確認できるよう、<a href="changelog.html#note49-25">Note 49-25</a> で追加した表示処理を若干改善しました。
</UL>
</P>

<HR>
<H3><A name="note50-15" id="note50-15">Note 50-15: (WM) wmPadRead-child サンプルデモの変更と修正</A></H3>
<P>Wii 側の対応する mpdlntr2rvl サンプルデモが DataSharing を使用するように変更になったことに伴い、wmPadRead-child サンプルデモの仕様を変更しました。<BR>
また、これまでマルチブートされる子機プログラムとして適切な動作をしていませんでしたので、これを修正しました。<BR>
その際に、使用する子機側のデモ用ライブラリを WC から WH に変更しました。
</P>

<HR>
<H3><A name="note50-16" id="note50-16">Note 50-16: (WM) 子機送信容量の制限の緩和</A></H3>
<P>これまでは、親機が WMParentParam.childMaxSize で指定した子機送信容量より大きな値をあとから子機送信容量として指定できませんでしたが、この制限を廃止しました。<BR>
ただし、親機の受信バッファに収まらない値を設定すると、送受信が停止しますので注意が必要です。
</P>

<HR>
<H3><A name="note50-17" id="note50-17">Note 50-17: (WM) 受信専用モードの初期化関数の追加</A></H3>
<P>無線を受信専用モードで初期化する WM_EnableForListening 関数と WM_InitializeForListening 関数を追加しました。<BR>
これらの関数を使用すると、電波を出すようなオペレーションが禁止される代わりに、電源 LED を変速点滅させずに周りのビーコンのパッシブスキャンを行うことが可能となります。
</P>

<HR>
<H3><A name="KnownIssues_4_02_rc" id="KnownIssues_4_02_rc">SDK 4.2 RC での既知の問題点</A></H3>
<P><UL>
<LI>MATH_FFTReal 関数に不具合があり、正しい結果が得られません。<BR>
修正されるまでの間は、MATH_FFT 関数の入力の虚数部に 0 を入れることで代用してください。</UL></P>

<HR>
<H2 style="line-height: 0"><A name="sdk_4_02_pr" id="sdk_4_02_pr">■ NITRO-SDK Version 4.2 PR</A></H2>
<DIV style="text-align: right">
<P style="line-height: 0">(2007/10/22)</P>
</DIV>

<HR>
<H3><A name="note49-01" id="note49-01">Note 49-01: (CARD) FLASH デバイス用書き込み関数の追加</A></H3>
<P>以下の FLASH デバイス用書き込み関数を追加しました。<BR>
CARD_WriteFlash 関数を使用できない大容量 FLASH デバイスは、かわりにこれらの関数を使用する必要があります。
<ul>
<li>CARD_EraseFlashSector 
<li>CARD_EraseFlashSectorAsync 
<li>CARD_ProgramFlash 
<li>CARD_ProgramFlashAsync 
<li>CARD_ProgramAndVerifyFlash 
<li>CARD_ProgramAndVerifyFlashAsync 
<li>CARD_WriteFlashSector 
<li>CARD_WriteFlashSectorAsync 
<li>CARD_WriteAndVerifyFlashSector 
<li>CARD_WriteAndVerifyFlashSectorAsync 
</ul>
</P>

<HR>
<H3><A name="note49-02" id="note49-02">Note 49-02: (CARD) 新規バックアップデバイスへの対応</A></H3>
<P>CARD ライブラリが 64Mb-FLASH バックアップデバイスに対応し、CARD_BACKUP_TYPE_FLASH_64MBITS を CARDBackupType 列挙型に追加しました。<BR>
関連して、リファレンスとサンプルデモも更新しました。
</P>

<HR>
<H3><A name="note49-03" id="note49-03">Note 49-03: (CARD) 非同期バックアップ関数の不具合修正</A></H3>
<P>CARD ライブラリ内部のスレッドより優先度の高いスレッドで非同期バックアップ関数の完了待ちを行いつつ、その後に同期バックアップ関数を続けて呼び出した場合、CARDライブラリ内部の状態管理が異常になることがあり、この問題を修正しました。
</P>

<HR>
<H3><A name="note49-04" id="note49-04">Note 49-04: (DevEnv) make によるビルドにおけるファイル名の統合</A></H3>
<P>make によるビルドにおいて TARGET_BIN で指定されるファイルと lsf ファイルの Static セクションの名称が一致していない場合にもエラーにならないように修正しました。<BR>
これにより生成されるファイルの名称として、Static セクションの名称よりも makelcf のコマンドラインオプションで指定した TARGET_BIN から生成した名称が優先して使用されます。<BR>
<BR>
この機能はデフォルトでは現在は動作確認のため無効になっています。<BR>
これを有効にするためには変数 NITRO_TRGNAME に何かの値が設定する必要があります。<BR>
<BR>
例 : <BR>
   % make TARGET_BIN=myapp.srl clean<BR>
   % make TARGET_BIN=myapp.srl NITRO_TRGNAME=TRUE
</P>

<HR>
<H3><A name="note49-05" id="note49-05">Note 49-05: (GX) GX_SetVCount 関数の修正</A></H3>
<P>実行時の制約チェックに漏れがありましたので、より適切に確認を行うよう修正しました。
</P>

<HR>
<H3><A name="note49-06" id="note49-06">Note 49-06: (MATH) thumb ライブラリにおける MATH_CountLeadingZeros 関数の実装の変更</A></H3>
<P>MATH_CountLeadingZeros 関数は、thumb コード用ライブラリではこれまで thumb コードで実装された関数を呼び出していましたが、ARM コードに動作を切り替えて CLZ 命令を呼び出すように変更しました。<BR>
これにより、コードサイズも実行速度も改善しました。
</P>

<HR>
<H3><A name="note49-07" id="note49-07">Note 49-07: (MATH) サンプルデモの修正</A></H3>
<P>$NitroSDK/build/demos/math/qsort サンプルデモで、ソート用の比較関数が比較値を s32 で扱っていたため比較結果がオーバーフローする場合がありました。<BR>
これを s64 で演算するよう修正しました。
</P>

<HR>
<H3><A name="note49-08" id="note49-08">Note 49-08: (MB) MB_EndToIdle 関数に関する不具合修正</A></H3>
<P>MB_EndToIdle 関数を呼び出して IDLE ステートのまま終了させた場合、ライブラリ内部で呼び出された WM_SetBeaconIndication 関数の設定が有効のまま残されてしまうという不具合があり、この問題を修正しました。
</P>

<HR>
<H3><A name="note49-09" id="note49-09">Note 49-09: (MB) アイコンデータに関するドキュメント追記</A></H3>
<P>DS ダウンロードプレイで使用するアイコンデータの画像フォーマットとその作成方法について、関連ドキュメントに追記しました。
</P>

<HR>
<H3><A name="note49-10" id="note49-10">Note 49-10: (MB) メモリファイルからの動的読み込みに関する不具合の修正</A></H3>
<P>FS_CreateFileFromMemory 関数で生成したメモリファイルを MB_ReadSegment 関数の引数として指定した場合に、プログラム配信処理が実行されないという不具合があり、この問題を修正しました。
</P>

<HR>
<H3><A name="note49-11" id="note49-11">Note 49-11: (MB) 擬似マルチブート子機でのコールバック引数の値を修正</A></H3>
<P>擬似マルチブート子機で親機をスキャンする際にコールバック引数から親機の情報が取得できますが、これまではコールバック種別が MB_FAKESCAN_PARENT_LOST の場合には MBFakeScanCallback 構造体の gameInfo と bssDesc に NULL が設定されていました。<BR>
<BR>
MB_FAKESCAN_PARENT_LOST の場合にも、最後に取得した親機情報を gameInfo, bssDesc に設定して返すように修正しました。
</P>

<HR>
<H3><A name="note49-12" id="note49-12">Note 49-12: (MB) 配信中のライブラリ終了に関する不具合修正</A></H3>
<P>MB_ReadSegment 関数で遅延ロードを指定したプログラムが実際に配信されている最中に MB_End 関数を呼び出した場合にライブラリ内部で条件判定に失敗して強制停止することがあり、この問題を修正しました。
</P>

<HR>
<H3><A name="note49-13" id="note49-13">Note 49-13: (OS) OS_SetPeriodicVAlarm 関数の修正</A></H3>
<P>OS_SetPeriodicVAlarm 関数の引数 delay に入れた値が正しい範囲であるかチェックする閾値が誤っていましたので、これを修正しました。
</P>

<HR>
<H3><A name="note49-14" id="note49-14">Note 49-14: (OS) OS_SetThreadDestructor 関数のリファレンス修正</A></H3>
<P>OS_SetThreadDestructor 関数のリファレンスにデストラクタ関数内での注意事項を追記しました。 
</P>

<HR>
<H3><A name="note49-15" id="note49-15">Note 49-15: (PM) LCD 制御関数の修正</A></H3>
<P>LCD OFF 時にはマイクの電源を OFF にし、LCD ON 時にはマイクの電源を元の状態に復帰させるように LCD 制御関数を修正しました。
</P>

<HR>
<H3><A name="note49-16" id="note49-16">Note 49-16: (PRC) 図形認識ライブラリ解説ドキュメントの更新</A></H3>
<P>手書き文字認識のみが必要な場合は「Decuma 手書き文字認識ライブラリ」が利用可能であることを追記しました。
</P>

<HR>
<H3><A name="note49-17" id="note49-17">Note 49-17: (TP) 自動サンプリングで使用する V カウント割り込みの修正</A></H3>
<P>タッチパネルの自動サンプリングでは V カウント割り込みを使用していますが、アプリケーションが GX_SetVCount 関数を呼んだ場合、不適切な動作を行う可能性がありました。<BR>
そこで、200 ラインから 214 ラインまでの V カウント割り込みを使用しないように修正しました。<BR>
200 ラインから 214 ラインの間で自動サンプリングが発生するような設定を行った場合、215 ラインでサンプリングを行います。
</P>

<HR>
<H3><A name="note49-18" id="note49-18">Note 49-18: (WBT) ヘッダファイルの修正</A></H3>
<P>$NitroSDK/include/nitro/wbt/context.h にて extern "C" の指定範囲を若干修正しました。<BR>
実際のプログラムの挙動に変更はありません。
</P>

<HR>
<H3><A name="note49-19" id="note49-19">Note 49-19: (WBT) 転送データ準備の遅延で生じる無限ループ不具合の修正</A></H3>
<P>WBT ライブラリの WBT_CMD_PREPARE_SEND_DATA コールバックでアプリケーションが転送用データを準備せず遅延させた場合、その後の親機からの応答処理がライブラリ内部で無限ループして親機プログラムがフリーズしてしまうという不具合があり、この問題を修正しました。<BR>
<BR>
この不具合は、NITRO-SDK 4.1 PR 以降でのみ発生します。
</P>

<HR>
<H3><A name="note49-20" id="note49-20">Note 49-20: (WFS) WFS 子機の終了処理に関する注意事項の追記</A></H3>
<P>子機が WFS ライブラリを使用してファイルアクセスしている時にワイヤレス通信が終了した場合、WFS_EndClient 関数を呼び出してライブラリへ通信終了を通知しない限り処理がブロッキングし続けるという点について、注意事項として関数リファレンスへ追記しました。
</P>

<HR>
<H3><A name="note49-21" id="note49-21">Note 49-21: (WFS) WFS_ExecuteRomServerThread 関数のメモリリーク修正</A></H3>
<P>WFS_ExecuteRomServerThread 関数を呼び出して内部的に生成したスレッドのためのメモリが WFS_EndServer 関数を呼び出しても解放されないという不具合があり、この問題を修正しました。
</P>

<HR>
<H3><A name="note49-22" id="note49-22">Note 49-22: (WFS) カードアクセス中のブロック転送処理に関する不具合修正</A></H3>
<P>WFS 子機からのファイルアクセス要求中に親機のカードアクセスが待たされると、親機が呼び出す WFS_CallServerPacketSendHook 関数の内部で処理が無限ループしてしまう場合があり、この問題を修正しました。
</P>

<HR>
<H3><A name="note49-23" id="note49-23">Note 49-23: (WM) MP 通信中のパラメータ変更に関する不具合修正</A></H3>
<P>NITRO-SDK 4.1 PR における <a href="changelog.html#note46-23">Note 46-23</a> の変更の影響で、以下の2つの問題が発生していましたので、修正しました。
<UL>
<LI>WM_SetMPParameter 関数、及び WM_SetMPFrequency 関数で MP 通信中に MP 頻度が変更できなくなっていました。
<LI>WM_SetMPParameter 関数で設定した WMMPParam.minFrequency, WMMPParam.maxFrequency, WMMPParam.defaultRetryCount の値が、次に WM_StartMP 関数を呼び出すまで反映されなくなっていました。
</UL>
</P>

<HR>
<H3><A name="note49-24" id="note49-24">Note 49-24: (WM) V ブランク同期での V カウントの変動幅の調整</A></H3>
<P>MP 通信中はVブランク同期のために、Vカウント値が最大で 212 ラインから 202 ラインまで巻き戻る可能性がありましたが、この最大値を 210 ラインに調整しました。
</P>

<HR>
<H3><A name="note49-25" id="note49-25">Note 49-25: (WM) ball サンプルデモの廃止</A></H3>
<P>NITRO-SDK 初期のワイヤレス通信仕様に基づいて設計されたため現在ではサンプルデモとして適切でない内容となっていた $NitroSDK/build/demos/wm/ball サンプルデモを廃止しました。<BR>
<BR>
データシェアリングによるゲーム情報の共有を示す処理は $NitroSDK/build/demos/wm/dataSharing-model サンプルデモに同様の内容が追加されましたので今後はこちらをご参考ください。
</P>

<HR>
<H3><A name="note49-26" id="note49-26">Note 49-26: (WM) サンプルデモの修正</A></H3>
<P>WM のサンプルデモについて以下の修正を行いました。
<ul>
<li>$NitroSDK/build/demos/wireless_shared/wh/default/wh_config.h で WH_PARENT_MAX_SIZE マクロ内で説明なく使用していた定数 4 を WM_SIZE_DS_PARENT_HEADER に置き換えました。
<li>$NitroSDK/build/demos/wireless_shared/wh のサンプルで用意されている void* ポインタを引数に取る関数のうち、実際にはポインタの内容を変更しないものは const void* へ変更しました。
<li>$NitroSDK/build/demos/wireless_shared/ 以下に存在するワイヤレス制御サンプルを統合しました。<BR>
WC サンプルは内部で WH サンプルを使用するようになりましたが、従来の機能はそのまま利用可能です。<BR>
今後はワイヤレス制御サンプルが WH に一本化され、WC は段階的に廃止される予定です。
<li>WH サンプルで親機のスキャンを行う際に使用する関数を、WM_StartScan 関数からWM_StartScanEx 関数に変更しました。<BR>
AP が複数台立っているような無線環境下において、WM_StartScan 関数では親機を見つけるのに数十秒といった長い時間を要することがあります。<BR>
特に Wii と接続する場合には WM_StartScanEx 関数の使用を推奨します。<BR>
また、ワイヤレス通信ライブラリ解説にも追記しました。
<li>$NitroSDK/bbuild/demos/wm/dataShare-model サンプルデモで、キー入力情報を取得してデータシェアリングで送信するまでがほぼ 1 フレーム分も空いており、本来は 2 フレームかかる遅延が実際には 3 フレームとなってしまうという不備があり、この問題を修正しました。
</ul>
</P>

<HR>
<H3><A name="note49-27" id="note49-27">Note 49-27: (WM) 接続直後の子機への Sequential 通信の不具合</A></H3>
<P>接続直後の子機に Sequential 通信を行った場合、親機からは送信には成功したように見えるのに、子機にはデータが届いていないことがある、という不具合がありましたので、これを修正しました。
</P>

<HR>
<H3><A name="note49-28" id="note49-28">Note 49-28: (その他) ヘッダファイル依存関係の不具合修正</A></H3>
<P>プリコンパイルヘッダ機能を無効にした状態において nitro.h ではなく fx.h や gx.h などを直接インクルードした場合、いくつかの定数や関数が未定義エラーとなってしまう不具合があり、この問題を修正しました。
</P>

<HR>
<H3><A name="KnownIssues_4_02_pr" id="KnownIssues_4_02_pr">SDK 4.2 PR での既知の問題点</A></H3>
<P>　ありません。</P>

<HR>
<H2 style="line-height: 0"><A name="sdk_4_01" id="sdk_4_01">■ NITRO-SDK Version 4.1 正式版</A></H2>
<DIV style="text-align: right">
<P style="line-height: 0">(2007/07/10)</P>
</DIV>

<HR>
<H3><A name="note48-01" id="note48-01">Note 48-01: (CARD) ROM 転送関数の内部修正</A></H3>
<P>CARD_ReadRom 関数内部の転送処理を若干修正しました。<br>
動作仕様に変更はありません。
</P>

<HR>
<H3><A name="note48-02" id="note48-02">Note 48-02: (DevEnv) C++ コンストラクタや StaticInitializer の AUTOLOAD 対応</A></H3>
<P>C++ コンストラクタや Static Initializer を Autoload セクションに配置するとリンク処理に失敗してしまっていました。<br>
ですから lcf template ファイルを修正し、C++ コンストラクタや Static Initializer に対して Autoload 処理が出来るように修正しました。
</P>

<HR>
<H3><A name="note48-03" id="note48-03">Note 48-03: (DevEnv) 拡張メモリへの Autoload 適用時のアリーナ先頭アドレスの修正</A></H3>
<P>デバッグ用拡張メモリへ Autoload 処理を行うとき OS_GetArenaLo 関数に引数 OS_ARENA_MAINEX を与えた際の値が正しく設定されていませんでした。<br>
<br>
これを修正するため、拡張メモリ領域への Autoload を行なうための専用のセクションとして MAINEX という名のセクションを設定し、拡張メモリへ転送したいオブジェクトをこのセクション中で列挙できるように修正しました。<br>
<br>
例: 拡張メモリに OBJS_MAINEX を配置する場合の lsf 記述<br>
<br>
　Autoload MAINEX<br>
　{<br>
　　Address　　　0x02400000<br>
　　Object　　　　$(OBJS_MAINEX)　　(.text)<br>
　　Object　　　　$(OBJS_MAINEX)　　(.data)<br>
　　Object　　　　$(OBJS_MAINEX)　　(.bss)<br>
　}<br>
<br>
拡張メモリ領域への Overlay 処理においては修正点はありません。
</P>

<HR>
<H3><A name="KnownIssues_4_01" id="KnownIssues_4_01">SDK 4.1 正式版での既知の問題点</A></H3>
<P>　ありません。</P>

<HR>
<H2 style="line-height: 0"><A name="sdk_4_01_rc" id="sdk_4_01_rc">■ NITRO-SDK Version 4.1 RC</A></H2>
<DIV style="text-align: right">
<P style="line-height: 0">(2007/06/15)</P>
</DIV>

<HR>
<H3><A name="note47-01" id="note47-01">Note 47-01: (CARD) キャッシュ無効化処理切り替え用関数の追加</A></H3>
<P><a href="changelog.html#note46-02">Note 46-02</a> で追加したはずの関数が、実際は追加されていませんでしたので、これを追加しました。
</P>

<HR>
<H3><A name="note47-02" id="note47-02">Note 47-02: (MI) アロケータ構造体の追加</A></H3>
<P>メモリ確保およびメモリ解放の標準的な関数プロトタイプとして、MIAllocator 構造体とその操作関数群を公開しました。 
</P>

<HR>
<H3><A name="note47-03" id="note47-03">Note 47-03: (PM) LCD off 期間の調整</A></H3>
<P><a href="changelog.html#note44-09">Note 44-09</a> の修正をより正確なものに修正しました。
</P>

<HR>
<H3><A name="note47-04" id="note47-04">Note 47-04: (TOOL) makerom.exe の -M オプションの動作不良の修正</A></H3>
<P>makerom.exe において -M オプションで指定された変数定義リストファイル内に記述した変数の定義を正しい値に展開する動作に問題があり、展開後の変数の値の末尾に改行コードが常に付加されるようになっていました。<br>
これを修正し、改行コードを取り除くようにしました。
</P>

<HR>
<H3><A name="note47-05" id="note47-05">Note 47-05: (WFS) WFS ライブラリの正式公開</A></H3>
<P><A href="changelog.html#note46-21">Note 46-21</a>でテスト公開とされていたWFS ライブラリの関数リファレンスが用意され、
正式公開となりました。
</P>

<HR>
<H3><A name="note47-06" id="note47-06">Note 47-06: (WM) WM_IsExistAllowedChannel 関数の不具合修正</A></H3>
<P>使用すべきチャンネルが存在するかどうかに関わらず、常に TRUE を返してしまう不具合があり、これを正しい値を返すように修正しました。
</P>

<HR>
<H3><A name="KnownIssues_4_01_rc" id="KnownIssues_4_01_rc">SDK 4.1 RCでの既知の問題点</A></H3>
<P>　ありません。</P>

<HR>
<H2 style="line-height: 0"><A name="sdk_4_01_pr" id="sdk_4_01_pr">■ NITRO-SDK Version 4.1 PR</A></H2>
<DIV style="text-align: right">
<P style="line-height: 0">(2007/05/18)</P>
</DIV>

<HR>
<H3><A name="note46-01" id="note46-01">Note 46-01: (CARD) CARD_UnlockBackup 関数の修正</A></H3>
<P>バックアップデバイスの非同期処理を実行中に CARD_UnlockBackup 関数が呼び出された場合はライブラリ内部で強制的に完了を待つよう修正し、この点について関数リファレンスに説明を追記しました。
</P>

<HR>
<H3><A name="note46-02" id="note46-02">Note 46-02: (CARD) キャッシュ無効化処理切り替え用関数の追加</A></H3>
<P>ROM アクセスの DMA 転送に伴うキャッシュ無効化処理について従来は転送サイズに関わらず部分的な無効化を行っていましたが、ある程度のサイズ以上になるとキャッシュ全体を無効化したほうが効率が良くなるため、この処理方式を切り替えるサイズ閾値を自由に設定できる CARD_SetCacheFlushThreshold 関数を追加しました。
</P>

<HR>
<H3><A name="note46-03" id="note46-03">Note 46-03: (CARD) マイクサンプリング中にカードを抜いた際の不具合修正</A></H3>
<P>マイクのサンプリング中にカードが抜かれるとバックライトが OFF になったりシャットダウンしてしまうことがあるという不具合があり、これを修正しました。
</P>

<HR>
<H3><A name="note46-04" id="note46-04">Note 46-04: (CARD) 新規バックアップデバイスへの対応</A></H3>
<P>CARD ライブラリが 16Mb-FLASH バックアップデバイスに対応し、CARD_BACKUP_TYPE_FLASH_16MBITS を CARDBackupType 列挙型に追加しました。<BR>
<BR>
関連して、リファレンスとサンプルデモも更新しました。 
</P>

<HR>
<H3><A name="note46-05" id="note46-05">Note 46-05: (CTRDG) CTRDG_GetPhiClock 関数の追加 </A></H3>
<P><a href="changelog.html#note38-03">Note 38-03</a> で 追加したはずの CTRDG_GetPhiClock 関数が、実際は追加されていませんでしたので、これを追加しました。
</P>

<HR>
<H3><A name="note46-06" id="note46-06">Note 46-06: (DevEnv) ビルド変数 MAKELCF_FORMAT の定義変更および説明文の追加</A></H3>
<P>ビルド変数 MAKELCF_FORMAT の定義を変更し、アプリケーション側のMakefile などにおいて独自の設定値があればそちらを優先するようにしました。<BR>
<BR>
また、$NitroSDK/docs/SDKRules/Rule-Defines.html に ビルド変数 MAKELCF_FORMAT や MAKELCF_FLAGS などの説明を追加しました。
</P>

<HR>
<H3><A name="note46-07" id="note46-07">Note 46-07: (FS) FS_LoadOverlay 関数の修正</A></H3>
<P>FS_LoadOverlay 関数のリファレンスにサンプルのコード例を1点追加しました。
</P>

<HR>
<H3><A name="note46-08" id="note46-08">Note 46-08: (GX) GX_SetVCount 関数の変更</A></H3>
<P>GX_SetVCount 関数を以下のような方法で使用すると LCD に悪影響を及ぼす危険性があるため、そのような使用ができないよう関数内に制限を加えました。
<ul>
<li>V カウントを進める。
<li>1フレームに2回以上呼ぶ。
</ul>
</P>

<HR>
<H3><A name="note46-09" id="note46-09">Note 46-09: (GX) Sub_Double3D サンプルデモの修正</A></H3>
<P>2画面3D を使用し、2画面に別々のフォグを設定している際に負荷の高い処理を行うとフォグの設定が上画面と下画面でずれてしまうという不具合があり、$NitroSDK/build/demos/gx/UnitTours/Sub_Double3D サンプルデモにフォグの設定とその対処コードを追加しました。
</P>

<HR>
<H3><A name="note46-10" id="note46-10">Note 46-10: (MB) DS ダウンロードプレイ子機デバッグ用プログラムの更新</A></H3>
<P>デバッガ環境で起動した際の実行制御が可能になるよう $NitroSDK/bin/ARM9-TS/ROM/mb_child.srl を更新しました。
</P>

<HR>
<H3><A name="note46-11" id="note46-11">Note 46-11: (MB) MB_FakeSetCompareGGIDCallback 関数の追加</A></H3>
<P>擬似マルチブート子機から複数の GGID を検索したい場合など、ビーコン判定方法をコールバックとして任意に指定できるよう MB_FakeSetCompareGGIDCallback 関数を追加しました。
</P>

<HR>
<H3><A name="note46-12" id="note46-12">Note 46-12: (MI) MI_SetMainMemoryPriority 関数のリファレンス修正</A></H3>
<P>MI_SetMainMemoryPriority 関数のリファレンスに注意書きを追記しました。
</P>

<HR>
<H3><A name="note46-13" id="note46-13">Note 46-13: (MI) デバイスアクセス用ユーティリティ機能の追加</A></H3>
<P>ROM などのデバイスを制御するユーティリティとして MIDevice 構造体と MICache 構造体を新設し、それらを操作する関数群を追加しました。
</P>

<HR>
<H3><A name="note46-14" id="note46-14">Note 46-14: (MIC) MICAutoParam 構造体のリファレンスマニュアルの説明追記</A></H3>
<P>MICAutoParam 構造体のリファレンスにバッファループ使用時の注意を追記しました。
</P>

<HR>
<H3><A name="note46-15" id="note46-15">Note 46-15: (MIC) mic-2 サンプルデモの修正</A></H3>
<P>mic-2 サンプルデモの実行結果を WAV ファイルに保存する sampling.bat スクリプトの記述内容が古いものであったため、loadrun.exe ツールを使用して正常に動作するよう修正しました。
</P>

<HR>
<H3><A name="note46-16" id="note46-16">Note 46-16: (MTX) 行列関数に関する整理</A></H3>
<P>以下の行列関数の内部実装を整理し、関数実体を GX ライブラリから MTX ライブラリへ移動しました。<BR>
関数仕様に変更はありません。
<ul>
<li>MTX_LookAt</li>
<li>MTX_Frustum(W)</li>
<li>MTX_Perspective(W)</li>
<li>MTX_Ortho(W)</li>
<li>G3_LookAt</li>
<li>G3_Frustum(W)</li>
<li>G3_Perspective(W)</li>
<li>G3_Ortho(W)</li>
</ul>
</P>

<HR>
<H3><A name="note46-17" id="note46-17">Note 46-17: (OS) OS_ResetSystem 関数の修正</A></H3>
<P>OS_ResetSystem 関数を呼び出しているスレッドのスタックがリセット時に ROM をロードする領域に存在する場合、そのスタックが破壊されてしまうという不具合があり、これを修正しました。<BR>
<BR>
なおメインスレッドのスタックは DTCM 上にあるためスタックの位置を変更せずにメインスレッドから OS_ResetSystem 関数を呼び出している場合はこの不具合は発生しません。
</P>

<HR>
<H3><A name="note46-18" id="note46-18">Note 46-18: (STD) 書式文字列関数の追加</A></H3>
<P>以下の書式文字列出力関数群を追加しました。
<ul>
<li>STD_TSPrintf</li>
<li>STD_TVSPrintf</li>
<li>STD_TSNPrintf</li>
<li>STD_TVSNPrintf</li>
</ul>
これらは OS ライブラリに用意されている同名の関数と同じ仕様です。<BR>
従来の OS 関数の実体は互換性のためそのまま残りますが、内部では単に STD 関数を呼び出すよう変更されています。
</P>

<HR>
<H3><A name="note46-19" id="note46-19">Note 46-19: (TOOL) makelcf SPECFILE の SearchSymbol 文の処理の不具合修正</A></H3>
<P>makelcf SPECFILE の SearchSymbol 文において、複数のパラメータを指定すると makelcf コマンドが不正な LCF を出力する不具合がありました。<BR>
makelcf コマンドおよび標準の LCF テンプレートを修正し、複数のパラメータ記述に対応しました。
</P>

<HR>
<H3><A name="note46-20" id="note46-20">Note 46-20: (TOOL) makerom の 2Gbit ROM 正式サポート</A></H3>
<P><a href="changelog.html#note39-18">Note 39-18</a> で仮対応されていた 2Gbit ROM が正式対応となりました。
</P>

<HR>
<H3><A name="note46-21" id="note46-21">Note 46-21: (WFS) WFS ライブラリのテスト公開</A></H3>
<P>MP 通信を使用して親機から子機へファイルシステムを提供する WFS ライブラリをテスト公開しました。<BR>
これは従来 $NitroSDK/build/demos/wirelss_shared/wfs に収録されていたサンプルモジュールをライブラリ化したものです。<BR>
<BR>
現在、テスト公開のため以下の既知の問題があります。
<ul>
<li>関数リファレンスが収録されていません。 </li>
<li>従来のサンプルモジュールのコードはそのまま残されており、今回用意された WFS ライブラリを使用するように変更されていません。</li>
</ul>
</P>

<HR>
<H3><A name="note46-22" id="note46-22">Note 46-22: (WM) WM_ERRCODE_OVER_MAX_ENTRY の発生条件に関する説明追記</A></H3>
<P>WM_ERRCODE_OVER_MAX_ENTRY の発生条件に関する説明を以下のファイルに追記しました。
<ul>
<li>$NitroSDK/docs/TechnicalNotes/AboutWirelessManager.pdf
<li>WM_StartConnect, WM_StartConnectEx 関数のリファレンスマニュアル
</ul>
</P>

<HR>
<H3><A name="note46-23" id="note46-23">Note 46-23: (WM) WM_StartMPEx 関数での設定値の影響を一時的なものに変更</A></H3>
<P>これまで、WM_StartMPEx 関数で設定した ignoreFatalErrorMode などの設定値は WM_EndMP 関数で MP モードを抜けても保持されており、次に WM_StartMP 関数を呼び出すと、前回の設定が引き継がれていました。<BR>
このため、MB_EndToIdle 関数を使用しつつ、WM_StartMP 関数で引き続き MP 通信を開始した場合、MB ライブラリが内部的に設定している設定値である ignoreFatalErrorMode が TRUE となっていました。<BR>
そこで、この問題が発生しないよう、WM_StartMPEx 関数の引数で設定する MP の各種設定値は、次の WM_StartMP 関数の呼び出し時に引き継がないように変更しました。<BR>
WM_StartMP 関数の呼び出し時のデフォルトの設定値を変更したい場合は、WM_SetMPParameter 関数で明示的に設定値を変更するようにしてください。<BR>
なお、これらの MP の各種設定値は WM_Initialize 関数や WM_Enable 関数を呼び出した時点で初期化されます。
</P>

<HR>
<H3><A name="note46-24" id="note46-24">Note 46-24: (WM) WM_StartMPEx 関数のオプション処理の変更</A></H3>
<P>WM_StartMPEx 関数において、mpFreq が連続転送モードを示す 0 であった場合は、fixFreqMode の指定を無視するように変更しました。
</P>

<HR>
<H3><A name="note46-25" id="note46-25">Note 46-25: (WM) Wii との MP 通信における不具合修正</A></H3>
<P>Wii が MP 親機である場合に電波環境によらず MP ライフタイム切れで通信が切断されてしまうことがあり、これを修正しました。
</P>

<HR>
<H3><A name="note46-26" id="note46-26">Note 46-26: (WM) wmPadRead-child デモの追加</A></H3>
<P>Wii のネットワーク機能に関する開発キットである RevoEX に収録されている mpdldemo/mpdlntr2rvl デモが配信する子機プログラム wmPadRead-child を追加しました。
</P>

<HR>
<H3><A name="KnownIssues_4_01_pr" id="KnownIssues_4_01_pr">SDK 4.1 PRでの既知の問題点</A></H3>
<P>　ありません。</P>

<HR>
<H2 style="line-height: 0"><A name="sdk_4_00" id="sdk_4_00">■ NITRO-SDK Version 4.0 正式版</A></H2>
<DIV style="text-align: right">
<P style="line-height: 0">(2007/02/15)</P>
</DIV>

<HR>
<H3><A name="note45-01" id="note45-01">Note 45-01: (DevEnv) ソースコードの書式統一</A></H3>
<P>ライブラリおよびサンプルデモのソースコード全体で、インデントや改行に関する構文上の書式を統一しました。
</P>

<HR>
<H3><A name="note45-02" id="note45-02">Note 45-02: (その他) アイコンデータの更新</A></H3>
<P>$NitroSDK/data 以下の picto chat 及び wireless 関連のアイコンを更新しました。
</P>

<HR>
<H3><A name="KnownIssues_4_00" id="KnownIssues_4_00">SDK 4.0 正式版での既知の問題点</A></H3>
<P>　ありません。</P>


<HR>
<H2 style="line-height: 0"><A name="sdk_4_00_rc" id="sdk_4_00_rc">■ NITRO-SDK Version 4.0 RC</A></H2>
<DIV style="text-align: right">
<P style="line-height: 0">(2007/01/22)</P>
</DIV>

<HR>
<H3><A name="note44-01" id="note44-01">Note 44-01: (ENV) ENV ライブラリの修正</A></H3>
<P>ENV_STRING(X), ENV_BINARY(X) において必要なキャスト処理が行われていなかったため、これを修正しました。<BR>
また、ライブラリの関数内に不必要なデバッグ出力がありましたので、これを修正しました。
</P>

<HR>
<H3><A name="note44-02" id="note44-02">Note 44-02: (FX) FX_AsinIdx 関数および FX_AcosIdx 関数の追加</A></H3>
<P>逆正弦、逆余弦を求める関数として FX_AsinIdx 関数および FX_AcosIdx 関数を追加しました。
</P>

<HR>
<H3><A name="note44-03" id="note44-03">Note 44-03: (GX) GXBg23Control256x16Affine 構造体の追加</A></H3>
<P>GXBg23Control256x16Pltt 構造体から必要のない reserved 領域を削除した新しい構造体 GXBg23Control256x16Affine を追加しました。<BR>
<BR>
この修正に伴い、G2*_GetBG2Control256x16Pltt、G2*_SetBG2Control256x16Pltt に変わる関数として、G2*_GetBG2Control256x16Affine、G2*_SetBG2Control256x16Affine 関数を追加しました。
</P>

<HR>
<H3><A name="note44-04" id="note44-04">Note 44-04: (GX) GX_SetVCount 関数のリファレンス修正</A></H3>
<P>GX_SetVCount 関数のリファレンスに注意書きを追記し、それに伴って $NitroSDK/build/demos/gx/UnitTours/VCount デモを削除しました。
</P>

<HR>
<H3><A name="note44-05" id="note44-05">Note 44-05: (MB) MB_End 関数の不具合修正</A></H3>
<P>MB_Init 関数でライブラリを初期化した後に MB_StartParent 関数などを呼び出さずそのまま MB_End 関数を呼び出した場合にライブラリ内部で強制停止してしまう不具合があり、この問題を修正しました。
</P>

<HR>
<H3><A name="note44-06" id="note44-06">Note 44-06: (MB) mb_child_simple.srl プログラムの修正</A></H3>
<P>DS ダウンロードプレイの子機プログラムとして mb_child_simple.srl を使用した際に再起動後のプログラムが本体実機と異なる挙動をする場合があり、この不具合を修正しました。
</P>

<HR>
<H3><A name="note44-07" id="note44-07">Note 44-07: (OS) IRQ ハンドラの修正</A></H3>
<P>IRQ ハンドラ内でスレッドの切り替えが発生した際に、新しく実行状態になるスレッドのレジスタの１つが保存されているコンテキストから正しく戻されない不具合がありました。これを修正しました。
</P>

<HR>
<H3><A name="note44-08" id="note44-08">Note 44-08: (OS) 拡張言語対応アプリケーション作成に関するドキュメントを追加</A></H3>
<P>$NitroSDK/docs/TechnicalNotes/AboutExtendedLanguage.pdf に拡張言語対応アプリケーションの作成に関するドキュメントを追加しました。
</P>

<HR>
<H3><A name="note44-09" id="note44-09">Note 44-09: (PM) LCD off 期間の調整</A></H3>
<P>LCD の off 期間が稀に仕様上不正な値(100ms 以下)になってしまうことがあり、これを修正しました。
</P>

<HR>
<H3><A name="note44-10" id="note44-10">Note 44-10: (TOOL) makebanner のリファレンスマニュアルの説明追加</A></H3>
<P>makebanner のリファレンスマニュアルに中国、韓国向けアプリケーションのための説明を追加しました。
</P>

<HR>
<H3><A name="note44-11" id="note44-11">Note 44-11: (TOOL) makelcf のデフォルト IRQ スタックサイズ変更</A></H3>
<P>makelcf ツールで StackSize パラメータを省略した際のデフォルト IRQ スタックサイズを、従来の 1024 バイトから 2048 バイトへ変更しました。
</P>

<HR>
<H3><A name="KnownIssues_4_00_rc" id="KnownIssues_4_00_rc">SDK 4.0 RCでの既知の問題点</A></H3>
<P>　ありません。</P>

<HR>
<H2 style="line-height: 0"><A name="sdk_4_00_pr" id="sdk_4_00_pr">■ NITRO-SDK Version 4.0 PR</A></H2>
<DIV style="text-align: right">
<P style="line-height: 0">(2006/11/27)</P>
</DIV>

<HR>
<H3><A name="note43-01" id="note43-01">Note 43-01: (CARD) DMA 転送中にカードを抜くと画像が乱れる不具合の修正</A></H3>
<P>DMA 転送中にカードを抜くと画像が乱れる場合がありましたのでこれを修正しました。
</P>

<HR>
<H3><A name="note43-02" id="note43-02">Note 43-02: (CARD) カードの抜け検出方法に関する不具合修正</A></H3>
<P>今まではカード抜け検出は意図せず、すべてをカード割り込みによってチェックしていましたが、これからは ROM ヘッダの「カード割り込みによる抜け検出禁止フラグ」をみてカード割り込みによってチェックするのか、カードの ROM-ID を見てチェックするのかを判断してカード抜けを検出するように変更しました。<br>
<br>
また、今回の不具合は「カード割り込みによる抜け検出禁止フラグ」を意図的に立てた場合のみ発生していました。
</P>

<HR>
<H3><A name="note43-03" id="note43-03">Note 43-03: (CP) divider.h の修正</A></H3>
<P>プリコンパイルヘッダを使用せずに $NitroSDK/include/nitro/cp/divider.h をインクルードした場合、インクルード順によってコンパイルエラーが発生することがありましたので、これを修正しました。
</P>

<HR>
<H3><A name="note43-04" id="note43-04">Note 43-04: (DevEnv) NITRO-SDK パッケージのビルドに使用する CodeWarrior のバージョン変更</A></H3>
<P>NITRO-SDK パッケージのビルドに使用する CodeWarrior のバージョンを 2.0SP1 に変更しました。
</P>

<HR>
<H3><A name="note43-05" id="note43-05">Note 43-05: (DevEnv) enum を常に int サイズに変更</A></H3>
<P>IDE の言語設定において Enums Always Int の項目にチェックを入れずにコンパイルした場合、enum を int 型と異なるサイズになり、構造体などのサイズが変わってしまう可能性があるため enum が常に int サイズで定義されるように変更しました。
</P>

<HR>
<H3><A name="note43-06" id="note43-06">Note 43-06: (GX) G3*_Vtx10 関数のリファレンス修正</A></H3>
<P>G3*_Vtx10 関数のリファレンスにおいて「説明」の記述に誤りがありましたので、これを修正しました。
</P>

<HR>
<H3><A name="note43-07" id="note43-07">Note 43-07: (MB) ダウンロード中に蓋を閉じカードを抜いた際の不具合修正</A></H3>
<P>MB_ReadSegment 関数をバッファサイズに MB_SEGMENT_BUFFER_MIN を指定し DS ダウンロードプレイを実行している最中に本体の蓋が閉じられカードが抜かれると MB ライブラリの中で強制停止してしまうという不具合があり、この問題を修正しました。
</P>

<HR>
<H3><A name="note43-08" id="note43-08">Note 43-08: (MB) MB_FakeSetVerboseScanCallback 関数の追加</A></H3>
<P>MB_FakeSetVerboseScanCallback 関数が追加され、MB_FakeStartScan 関数を使用してマルチブート親機のビーコンをスキャンする際に、受信したすべての生のビーコンを通知可能になりました。<br>
この関数を使用することで、マルチブートではない親機のビーコンを同時に取得することが可能となります。
</P>

<HR>
<H3><A name="note43-09" id="note43-09">Note 43-09: (OS) OSOwnerInfo 構造体、OS_GetOwnerInfo 関数の変更</A></H3>
<P>OSOwnerInfo 構造体のメンバ nickName, comment について、終端コード用に 2byte ずつ領域を確保するようにしました。<br>
また OS_GetOwnerInfo 関数において、終端コードを入れるよう修正しました。
</P>

<HR>
<H3><A name="note43-10" id="note43-10">Note 43-10: (OS) OS_Init 関数の V カウント調整</A></H3>
<P>OS_Init 関数実行後常に V カウント値が一定になるようにウェイト処理を追加しました。
</P>

<HR>
<H3><A name="note43-11" id="note43-11">Note 43-11: (OS) OS_TPrintfEx, OS_TVPrintfEx, OS_VSNPrintfEx 関数の追加</A></H3>
<P>OS_VSNPrintf 関数にバイト列出力機能を追加した OS_VSNPrintfEx 関数及びそれを呼び出す OS_TPrintfEx関数、OS_TVPrintfEx 関数を追加しました。
</P>

<HR>
<H3><A name="note43-12" id="note43-12">Note 43-12: (OS) 拡張言語コードの韓国語対応</A></H3>
<P>拡張言語コードとして韓国語を追加しました。<br>
また、韓国版アプリを作成するサンプルとして $NitroSDK/build/demos/os/forKorea-1 を追加しました。
</P>

<HR>
<H3><A name="note43-13" id="note43-13">Note 43-13: (PM) ストリーム再生中のカード抜け発生時に、電源が OFF されない不具合の修正</A></H3>
<P><a href="changelog.html#note36-13">Note 36-13</a> の修正によって、ストリーム再生中にカードが抜けた場合に、本体が閉じられている状態でも電源が OFF されないことがあるという不具合があり、これを修正しました。
</P>

<HR>
<H3><A name="note43-14" id="note43-14">Note 43-14: (SND) SND_FlushCommand 関数のスレッドセーフ化</A></H3>
<P>SND_FlushCommand 関数がスレッドセーフになっていなかった問題がありましたが、これを修正しました。
</P>

<HR>
<H3><A name="note43-15" id="note43-15">Note 43-15: (STD) STD_CopyLString, STD_CopyLStringZeroFill 関数の修正</A></H3>
<P>STD_CopyLString 関数および STD_CopyLStringZeroFill 関数の返す値が正しくない不具合がありましたので、これを修正しました。
</P>

<HR>
<H3><A name="note43-16" id="note43-16">Note 43-16: (STD) Scanf 関数の文字クラス対応</A></H3>
<P>STD_TSScanf 関数などの文字列走査関数群の対応書式として文字クラスを追加しました。
</P>

<HR>
<H3><A name="note43-17" id="note43-17">Note 43-17: (TOOL) bash の仕様変更への対応</A></H3>
<P>bash の仕様変更にともない、$NitroSDK/tools/bin 以下の bash スクリプトの改行コードを CRLF から LF に変更しました。
</P>

<HR>
<H3><A name="note43-18" id="note43-18">Note 43-18: (TOOL) makerom のリファレンスマニュアルの記述修正</A></H3>
<P>Reject 文の設定パラメータの有効範囲についての記述を追加しました。
</P>

<HR>
<H3><A name="note43-19" id="note43-19">Note 43-19: (WM) サンプルデモの修正</A></H3>
<P>$NitroSDK/build/demos/wireless_shared 以下のサンプルライブラリ wh に以下の修正を加えました。
<ul>
<li>WH_Initialize 関数を2回以上繰り返して呼び出せる不具合があり、これを修正しました。
<li>wh を使用する場合に WM_SetIndCallback 関数でコールバックを指定すると wh の指定するコールバックとどちらが設定されるか不定である不具合がありました。<br>これに対応するため、WH_SetIndCallback 関数を追加しました。 
</ul>
また $NitroSDK/build/demos/wm/wireless-all、$NitroSDK/build/demos/mb/multiboot-Model のサンプルデモにおいて、マルチブート子機が親機に再接続にいく直前に、別のダウンロード子機がマルチブート親機に接続にいってしまうと、TGID が異なる場合でもわずかな期間だけは接続中とみなされ、遅れてきた正式な子機がそれで追い出されてしまうことがありましたので、何度か再接続を試みるようにすることで、これを修正しました。
</P>

<HR>
<H3><A name="KnownIssues_4_00_pr" id="KnownIssues_4_00_pr">SDK 4.0 PRでの既知の問題点</A></H3>
<P>　ありません。</P>

<HR>
<H2 style="line-height: 0"><A name="sdk_3_02" id="sdk_3_02">■ NITRO-SDK Version 3.2 正式版</A></H2>
<DIV style="text-align: right">
<P style="line-height: 0">(2006/08/28)</P>
</DIV>

<HR>
<H3><A name="note42-01" id="note42-01">Note 42-01: (CARD) CARD_GetRomHeader 関数のリファレンス修正</A></H3>
<P>製品実機以外の環境において CARD_GetRomHeader 関数が正しい情報を取得できないという記述を関数リファレンスに追記しました。
</P>

<HR>
<H3><A name="note42-02" id="note42-02">Note 42-02: (GX) AntiAlias サンプルデモの修正</A></H3>
<P>$NitroSDK/build/demos/gx/UnitTours/AntiAlias サンプルデモにおいてアンチエイリアス ON/OFF の表示が、初期状態のみ誤った表示をしてしまっているという不具合がありましたので、これを修正しました。
</P>

<HR>
<H3><A name="note42-03" id="note42-03">Note 42-03: (OS) 関数コスト計測におけるバッファ溢れチェックの追加</A></H3>
<P>関数コストを計測する際に使用するバッファが一杯まで使用されたかを調べるために、OS_CheckFunctionCostBuffer 関数, OS_CheckStatisticsBuffer 関数を追加しました。
</P>

<HR>
<H3><A name="note42-04" id="note42-04">Note 42-04: (PM) ワイヤレス通信中のカード抜け発生時における不具合修正</A></H3>
<P>ワイヤレス通信中でカード抜け発生時にごくまれにバックライトが OFF になってしまう場合があり、これを修正しました。
</P>

<HR>
<H3><A name="note42-05" id="note42-05">Note 42-05: (WM) サンプルデモの修正</A></H3>
<P>$NitroSDK/build/demo/wireless_shared の各サンプルライブラリに以下の修正を加えました。
<ul>
<li> サンプルライブラリWFSにおいて親子でファイルシステムのみを共有する場合に、親機のファイル数と子機のオーバーレイ数によっては不正なファイルテーブルを生成するという不具合があり、これを修正しました。
<li> サンプルライブラリWHにおいて子機側がMP通信開始処理中に不意に切断された場合などに、
内部で暗黙にリセット処理が実行されてしまうためエラー内容を確認できないという問題があり、これを修正しました。
</ul>
</P>

<HR>
<H3><A name="KnownIssues_3_02" id="KnownIssues_3_02">SDK 3.2 正式版での既知の問題点</A></H3>
<P>　ありません。</P>

<HR>
<H2 style="line-height: 0"><A name="sdk_3_02_rc2" id="sdk_3_02_rc2">■ NITRO-SDK Version 3.2 RC2</A></H2>
<DIV style="text-align: right">
<P style="line-height: 0">(2006/08/17)</P>
</DIV>

<HR>
<H3><A name="note41-01" id="note41-01">Note 41-01: (CARD) ワイヤレス通信中のカード抜け発生時に電源が OFF されない不具合の修正</A></H3>
<P>ワイヤレス通信を実行中に本体が閉じられている状態でカード抜けが発生すると電源が正しく OFF されない場合があり、この不具合を修正しました。 
</P>

<HR>
<H3><A name="note41-02" id="note41-02">Note 41-02: (CP) CP_RestoreContext 関数内でのウェイトの追加</A></H3>
<P>割り込み処理内で CP_RestoreContext 関数を使用して除算器の状態を復元した際に、割り込み処理の完了までに除算器の状態復元が完了しない場合がありました。<br>
<br>
この不具合を修正する為に、CP_RestoreContext 関数内に必要なウェイト処理を追加しました。
</P>

<HR>
<H3><A name="note41-03" id="note41-03">Note 41-03: (CP) 割り込み内での除算器の使用に関する注意の追加</A></H3>
<P>これまで割り込み内での CP の使用についての注意事項が CP_SetDiv 関数, CP_SetSqrt 関数, CP_RestoreContext 関数のリファレンス内にしか記述されていませんでしたので、CP の概要ページに他の CP 関連のリファレンスに割り込み内での使用についての注意とサンプルコードを追加しました。<br>
<br>
また、除算器を内部で使用している関数のリファレンスすべてからこの注意事項へのリンクを追加しました。
</P>

<HR>
<H3><A name="note41-04" id="note41-04">Note 41-04: (CTRDG) カートリッジの活線挿抜に関する不具合修正</A></H3>
<P>電源投入時以外にソフトリセット後にもカートリッジの認識を行っていたため、カートリッジが挿入されていない状態で電源を入れた後カートリッジを挿入してソフトリセットするとそのカートリッジを認識してしまうという不具合があり、これを修正しました。
</P>

<HR>
<H3><A name="note41-05" id="note41-05">Note 41-05: (OS) OS_SleepThreadDirect 関数の追加</A></H3>
<P>指定したスレッドを直接休止状態に遷移させることができる OS_SleepThreadDirect 関数を追加しました。
</P>

<HR>
<H3><A name="note41-06" id="note41-06">Note 41-06: (OS) スレッド切り替え処理の内部修正</A></H3>
<P>OS_RescheduleThread 関数によるスレッド切り替え処理が割り込みを禁止した状態で実行されるよう修正しました。
</P>

<HR>
<H3><A name="note41-07" id="note41-07">Note 41-07: (OS) 起動時の Vカウント調整</A></H3>
<P>プログラム起動時、常に Vカウント値の初期値が一定になるようにウェイト処理を追加しました。
</P>

<HR>
<H3><A name="note41-08" id="note41-08">Note 41-08: (PRC) 除算器に関するスレッドセーフ化</A></H3>
<P>PRC の SuperFine アルゴリズムで、除算器を割り込み禁止にせずに使用している部分がありましたので、これを修正しました。
</P>

<HR>
<H3><A name="note41-09" id="note41-09">Note 41-09: (STD) 文字コード変換関数の仕様変更</A></H3>
<P>実際に格納された変換後の文字数と同様に、実際の変換された変換元の文字数も取得できるよう関数仕様を変更しました。 
</P>

<HR>
<H3><A name="note41-10" id="note41-10">Note 41-10: (WBT) WBT_CMD_REQ_GET_BLOCK_DONE 通知の不具合修正</A></H3>
<P>WBT_RegisterBlock 関数に NULL バッファを指定して WBT_CMD_PREPARE_SEND_DATA 通知を利用する場合に、完了時の WBT_CMD_REQ_GET_BLOCK_DONE 通知が発生しないという不具合があり、これを修正しました。
</P>

<HR>
<H3><A name="note41-11" id="note41-11">Note 41-11: (WBT) サンプルデモの修正</A></H3>
<P>$NitroSDK/build/demos/wbt/wbt-1 サンプルデモにおいて切断と接続を繰り返して2回以上同じモードを選択した場合に接続状況を正常に管理できなくなるという不具合があり、これを修正しました。
</P>

<HR>
<H3><A name="note41-12" id="note41-12">Note 41-12: (WM) WM_SetWEPKey/Ex 関数の修正</A></H3>
<P>WM_SetWEPKey/Ex 関数において、wepMode が WM_WEPMODE_NO の場合に wepkey に NULL を入れると正常に動作しない不具合がありましたので、これを修正しました。 
</P>

<HR>
<H3><A name="note41-13" id="note41-13">Note 41-13: (WM) wepMode のリセット処理の修正</A></H3>
<P>状態が親機から子機に遷移する場合などに wepMode がリセットされないことがありましたので、これを修正しました。
</P>

<HR>
<H3><A name="note41-14" id="note41-14">Note 41-14: (WM) wepMode 設定に関する不具合の修正</A></H3>
<P>接続を試みた親機の wepMode が子機側に設定される不具合がありましたが、子機側で呼ばれた WM_SetWEPKey/Ex 関数の値を反映されるように修正しました。
</P>

<HR>
<H3><A name="note41-15" id="note41-15">Note 41-15: (WM) サンプルデモの修正</A></H3>
<P>$NitroSDK/build/demo/wireless_shared 以下のサンプルライブラリ wh に以下の修正を加えました。
<ul>
<li>与えた MAC アドレスの親を探して自動的に接続する WH_ChildConnectAuto 関数が、正常にキャンセルできないという不具合があり、これを修正しました。
<li><a href="changelog.html#note39-23">Note 39-23</a> の変更が不完全であったため、これを修正しました。
</ul>
</P>

<HR>
<H3><A name="KnownIssues_3_02_rc2" id="KnownIssues_3_02_rc2">SDK 3.2 RC2での既知の問題点</A></H3>
<P>　ありません。</P>

<HR>
<H2 style="line-height: 0"><A name="sdk_3_02_rc" id="sdk_3_02_rc">■ NITRO-SDK Version 3.2 RC</A></H2>
<DIV style="text-align: right">
<P style="line-height: 0">(2006/07/25)</P>
</DIV>

<HR>
<H3><A name="note40-01" id="note40-01">Note 40-01: (CARD) カード抜け発生時に電源が OFF されないという不具合修正</A></H3>
<P>本体が閉じられている状態でカード抜けが発生した場合でも、電源 OFF されないことがありました。<br>
この不具合を修正しました。
</P>

<HR>
<H3><A name="note40-02" id="note40-02">Note 40-02: (DevEnv) テンプレートファイルによる ITCM/DTCM 使用サイズ判定処理の不備</A></H3>
<P>lcf テンプレートファイルによる ITCM/DTCM の使用領域のオーバーフローチェックにおいて、ITCM/DTCM 上にオーバーレイ領域を設定し、オーバーレイにより使用領域が多重化しているにも関わらず、多重化していないとみなして使用領域を計算していました。<br>
このため領域に余裕があるにも関わらずエラーと判定されるケースがありました。<br>
<br>
現状では lcf テンプレート上でオーバーレイ動作を加味した ITCM/DTCM のサイズのチェック処理をうまく実装できないため、使用領域のチェックにおいてはオーバーレイ領域を計算対象外としています。<br>
<br>
このため ITCM/DTCM 上のオーバーレイ領域のサイズの管理はアプリケーション作成される方が注意する必要があります。<br>
具体的にはダミー変数を ITCM/DTCM 領域の最後に置き、その変数のアドレスが領域をはみ出ていないかをチェックします。
</P>

<HR>
<H3><A name="note40-03" id="note40-03">Note 40-03: (MATH) MATHCompareFunc のリファレンス修正</A></H3>
<P>MATHCompareFunc のリファレンスにおいて、「返り値」の記述が実際の動作とは逆の説明になっていましたので修正しました。
</P>

<HR>
<H3><A name="note40-04" id="note40-04">Note 40-04: (MATH) MATH_QSortStackSize 関数の変更</A></H3>
<P><a href="changelog.html#note39-05">Note 39-05</a> の変更に伴って MATH_QSortStackSize 関数が 0 以下を返さないように変更しました。
</P>

<HR>
<H3><A name="note40-05" id="note40-05">Note 40-05: (MB) multiboot-PowerSave サンプルの修正</A></H3>
<P>$NitroSDK/build/demos/mb/multiboot-PowerSave サンプルの中で、実際には MB_SetPowerSaveMode 関数を呼び出していませんでしたので、これを修正しました。
</P>

<HR>
<H3><A name="note40-06" id="note40-06">Note 40-06: (MB) ライフタイム初期値の変更</A></H3>
<P>MB ライブラリ内部のワイヤレス制御に使用するライフタイムのデフォルト値を、WM ライブラリと同じ設定になるよう変更しました。
</P>

<HR>
<H3><A name="note40-07" id="note40-07">Note 40-07: (STD) 文字コード変換関数の修正</A></H3>
<P>文字コード変換関数に以下の修正を行いました。
<ul>
<li>内部の文字変換テーブルに誤りがあったので修正しました。
<li>変換後のサイズのみを取得したり部分文字列を変換したりできるよう、
関数仕様を一部変更しました。
</ul>
</P>

<HR>
<H3><A name="note40-08" id="note40-08">Note 40-08: (VIB) VIB ライブラリの修正</A></H3>
<P>VIB ライブラリに以下のような変更を加えました。
<ul>
<li>VIB_StartPulse 関数で不正なパルスパラメータを与えられないようチェック処理を追加
<li>ライブラリ内の排他制御の改良に伴った、パルス制御の精度向上
</ul>
</P>

<HR>
<H3><A name="note40-09" id="note40-09">Note 40-09: (WM) サンプルデモの修正</A></H3>
<P>$NitroSDK/build/demo/wireless_shared/wh の WH サンプルモジュールに WH_SetSsid 関数を追加しました。
</P>

<HR>
<H3><A name="note40-10" id="note40-10">Note 40-10: (WM) 通信終了時の新規接続禁止</A></H3>
<P>WM_EndParent および WM_Reset 関数で親機を終了する場合に、終了処理での子機切断の直後に新規の子機が接続してくる場合がありましたが、この場合に接続してきた子機を自動的に切断するように変更しました。<br>
この際には子機側に WM_DISCONNECT_REASON_NO_ENTRY という切断要因が通知されます。
</P>

<HR>
<H3><A name="KnownIssues_3_02_rc" id="KnownIssues_3_02_rc">SDK 3.2 RCでの既知の問題点</A></H3>
<P>　ありません。</P>

<HR>
<H2 style="line-height: 0"><A name="sdk_3_02_pr" id="sdk_3_02_pr">■ NITRO-SDK Version 3.2 PR</A></H2>
<DIV style="text-align: right">
<P style="line-height: 0">(2006/07/07)</P>
</DIV>

<HR>
<H3><A name="note39-01" id="note39-01">Note 39-01: (CARD) 抜け検出処理の修正</A></H3>
<P>プログラム起動直後のわずかなタイミングでカードが抜けた場合に ARM7 側でのカード抜け自動検出が正しく発生しないことがあり、これを修正しました。
</P>

<HR>
<H3><A name="note39-02" id="note39-02">Note 39-02: (CTRDG) AGB バックアップアクセス関数のリファレンス修正</A></H3>
<P>AGB バックアップアクセス関数のリファレンスに IS-NITRO-DEBUGGER 1.66 以前のバージョンでは AGB バックアップデバイスに正常にアクセスできない旨を追記しました。
</P>

<HR>
<H3><A name="note39-03" id="note39-03">Note 39-03: (CTRDG) ドキュメントの修正</A></H3>
<P>以下の DS 用 AGB カートリッジバックアップアクセス解説ドキュメントにおいていくつかの誤記を修正しました。<br>
<br>
$NitroSDK/docs/TechnicalNotes/AboutAGBBackupforDS.pdf
</P>

<HR>
<H3><A name="note39-04" id="note39-04">Note 39-04: (DevEnv) make システムの共通定義ファイルにおいて古い CodeWarrior のサポートを停止</A></H3>
<P>make システムにおいて使用される共通定義ファイル commondefs.cctype.CW において CodeWarrior for NINTENDO DS の Version 1.0.2 以前の古いバージョンのもののサポートを停止しました。<br>
これより Version 1.2 以降のコンパイラがサポート対象となります。
</P>

<HR>
<H3><A name="note39-05" id="note39-05">Note 39-05: (MATH) MATH_QSort 関数の修正</A></H3>
<P>ソートするデータの個数を 0 か 1 にした場合、正常に動作しない不具合があり、これを修正しました。
</P>

<HR>
<H3><A name="note39-06" id="note39-06">Note 39-06: (MI) LZ77圧縮時のオーバーアクセス不具合の修正</A></H3>
<P>MI_CompressLZ関数およびMI_CompressLZFast関数での圧縮の際、
圧縮後のデータが圧縮前よりも大きくなる場合圧縮に失敗しますが、
この時に、圧縮先として用意されたバッファに対して1byteの
オーバーアクセスが発生する事がありました。<br>
この不具合は修正されました。
</P>

<HR>
<H3><A name="note39-07" id="note39-07">Note 39-07: (MI) エンディアン変換関数の 8bit 版を追加</A></H3>
<P>エンディアン変換の関数に 8bit 版を追加しました。<br>
これらはソースコードの視認性を統一するために用意され、実際には何の変換も行いません。
</P>

<HR>
<H3><A name="note39-08" id="note39-08">Note 39-08: (OS) OS_InitException 関数の修正</A></H3>
<P>例外ハンドラが設定される条件に誤りがあり、loadrun でプログラムを実行した場合にユーザ指定の例外ハンドラが呼ばれなくなる不具合がありました。<br>
これを正しい条件に修正をしました。
</P>

<HR>
<H3><A name="note39-09" id="note39-09">Note 39-09: (OS) 関数コスト計測の修正</A></H3>
<P>関数コスト計測に関して、__PROFILE_ENTRY 関数と __PROFILE_EXIT 関数で関数入出記録を保存するときに割り込みがかかって別のコスト計測の記録を取るという状況下で、正確なコスト計測が出来なくなる場合がありましたので、os_functioncost.c の該当箇所を割り込み禁止にしてこの不具合を回避しました。
</P>

<HR>
<H3><A name="note39-10" id="note39-10">Note 39-10: (PM) LCD OFF 時にカードが抜けた場合、電源 OFF されないという不具合の修正</A></H3>
<P><a href="changelog.html#note36-13">Note 36-13</a> の修正の際、PM_ForceToPowerOffAsync 関数が割り込み禁止中に呼ぶことができないという問題があったため、LCD OFF 時にカードが抜けた場合に、本体が閉じられている状態でも電源 OFF されないという不具合が発生していました。<br>
これを修正しました。
</P>

<HR>
<H3><A name="note39-11" id="note39-11">Note 39-11: (PM) PM_GoSleepMode 関数のリファレンス修正</A></H3>
<P>PM_GoSleepMode 関数のリファレンスにおいて、ガイドラインを考慮しない説明の記述があったためこれを修正しました。
</P>

<HR>
<H3><A name="note39-12" id="note39-12">Note 39-12: (PM) スリープモード後の RTC アラーム割り込み不具合の修正</A></H3>
<P>復帰要因に RTC アラームを含めずにスリープモードに移行するとスリープからの復帰後にそれ以降の RTC アラーム割り込みが効かなくなることがありました。<br>
この不具合を修正しました。
</P>

<HR>
<H3><A name="note39-13" id="note39-13">Note 39-13: (STD) STD_CopyLString 関数のリファレンス修正</A></H3>
<P>STD_CopyLString 関数のリファレンスに誤りがありましたのでこれを修正しました。
</P>

<HR>
<H3><A name="note39-14" id="note39-14">Note 39-14: (STD) STD_CopyLString 関数の仕様変更と STD_CopyLStringZeroFill 関数の追加</A></H3>
<P>STD_CopyLString 関数が 一般的な strlcpy 関数とは違った仕様で実装されていたため、strlcpy 関数と同じ動作となるように変更を行いました。<br>
この修正に伴い、関数の返り値がコピー先のポインタを示す char 型のポインタからコピー元の文字列長を返す int 型の値へ変更されました。<br>
<br>
また、strlcpy 関数とは異なる仕様で実装されていた旧 STD_CopyLString 関数を、返り値を STD_CopyLString 関数と同じくコピー元の文字列長を返す int 型の値に変更して、STD_CopyLStringZeroFill 関数として追加しました。<br>
<br>
この2つの関数の違いとしては、STD_CopyLStringZeroFill 関数はコピーサイズがコピー元より大きかった場合、差分の箇所を NULL で埋めるという処理になっている点になります。
</P>

<HR>
<H3><A name="note39-15" id="note39-15">Note 39-15: (STD) ShiftJIS <-> Unicode 変換関数の追加</A></H3>
<P>STD ライブラリに ShiftJIS と Unicode の文字列の変換を行う関数を追加しました。<br>
また、使用方法を示すデモを、$NitroSDK/build/demos/std/unicode-1 に追加しました。
</P>

<HR>
<H3><A name="note39-16" id="note39-16">Note 39-16: (TOOL) CodeWarrior 2.x 用のオーバーレイ関連の新機能への対応</A></H3>
<P>CodeWarrior 2.x 以降において、リンク処理を行なうときに、シンボルの検索対象となるオーバーレイグループを指定することができるようになりました。<br>
この機能をサポートするために lsf ファイルの書式を拡張し、SearchSymbol コマンドをサポートしました。<br>
<br>
またこれに合わせて、makelcf コマンド、そして lcf テンプレートファイルもそれぞれ修正しました。<br>
詳しくは makelcf のマニュアルをご参照ください。<br>
<br>
この変更を以て、CodeWarrior2.0 に正式対応しました。
</P>

<HR>
<H3><A name="note39-17" id="note39-17">Note 39-17: (TOOL) compstatic ツールのリファレンス修正</A></H3>
<P>compstatic ツールのリファレンスにおいて -f オプションに関する記述を追記しました。
</P>

<HR>
<H3><A name="note39-18" id="note39-18">Note 39-18: (TOOL) makerom の新仕様の 1Gbit/2Gbit ROM サポート</A></H3>
<P>新仕様の 1Gbit/2Gbit ROM のサポートのために ROM フォーマットが一部変更され、1Gbit 以上のサイズの ROM イメージにおいて最上位の一定サイズの領域がシステム予約となりました。<br>
NITRO-SDK 3.2 PR 以降では、この新仕様に対応した ROMフォーマットでの出力が makerom のデフォルト設定となっています。<br>
<br>
NITRO-SDK 3.2 PR 以前の古いフォーマットで ROM イメージを出力したい場合は makerom のオプションに -V1 を追加してください。
</P>

<HR>
<H3><A name="note39-19" id="note39-19">Note 39-19: (TOOL) 有効な ROM パラメータの組み合わせの判定処理の追加</A></H3>
<P>makerom ツールの動作を指定するための rsf ファイルにおいて RomSize と RomSpeedType の設定の組み合わせが実際に ROM 化可能であるかどうかを判定するための処理を追加しました。<br>
<br>
RomSpeedType が MROM の場合は RomSize が 512Mbit 以下である必要があります。<br>
また RomSpeedType が 1TROM である場合は RomSize が 128Mbit 以上でなければなりません。
</P>

<HR>
<H3><A name="note39-20" id="note39-20">Note 39-20: (WM) WFS サンプルデモの修正</A></H3>
<P>WM サンプルデモに以下の修正を加えました。
<ul>
<li>$NitroSDK/build/demos/wireless_shared/wfs の WFS サンプルモジュールで WFS_Init 関数の初期化処理が終わる前に WFS_Start 関数を呼び出してしまうと WFS の内部状態が異常になる問題があり、これを修正しました。<br>
親子ともワイヤレスが IDLE ステートの状態で初期化関数を呼び出してこの関数から返った後に接続を開始していれば、この問題は起こりません。
</ul>
</P>

<HR>
<H3><A name="note39-21" id="note39-21">Note 39-21: (WM) WM_EndDataSharing 関数の変更</A></H3>
<P><a href="changelog.html#note39-23">Note 39-23</a> の変更に伴って、WM_EndDataSharing 関数内のステートチェックを削除しました。
</P>

<HR>
<H3><A name="note39-22" id="note39-22">Note 39-22: (WM) Wii との通信におけるリンクレベル値の調整</A></H3>
<P>Wii がMP親機である場合に WM_GetLinkLevel 関数で取得できるリンクレベル値を調整しました。
</P>

<HR>
<H3><A name="note39-23" id="note39-23">Note 39-23: (WM) サンプルデモの修正</A></H3>
<P>$NitroSDK/build/demo/wireless_shared 以下のサンプルライブラリ wh, wc では WM_EndDataSharing 関数を呼び出していなかったため wc, wh の各 Reset 関数内に WM_EndDataSharing 関数を呼び出す処理を追加しました。
</P>

<HR>
<H3><A name="note39-24" id="note39-24">Note 39-24: (WM) 初期化・終了関数の不具合修正</A></H3>
<P>WM_Init 関数を実行中に別スレッドや割り込みハンドラから WM ライブラリの任意の関数を呼び出すと、初期化処理が完了していないにも関わらず初期化完了済みと判定され、その結果意図しない不正な動作を行う可能性がありました。<br>
また、WM_Finish 関数にも同様の状態管理に関する不具合がありました。<br>
これらの不具合を修正しました。
</P>

<HR>
<H3><A name="note39-25" id="note39-25">Note 39-25: (WM) 初期化関数内のポートコールバック初期化の不具合修正</A></H3>
<P>WM の初期化関数内でのポートコールバックの初期化に不具合があり、不要な警告が生成されていましたので、これを修正しました。
</P>

<HR>
<H3><A name="note39-26" id="note39-26">Note 39-26: (WM) 切断時の不正な動作の修正</A></H3>
<P>接続と切断を高頻度で繰り返すと、まれに WM の内部状態が不正な状態になることがありましたが、これを修正しました。
</P>

<HR>
<H3><A name="KnownIssues_3_02_pr" id="KnownIssues_3_02_pr">SDK 3.2 PRでの既知の問題点</A></H3>
<P>　ありません。</P>


<HR>
<H2 style="line-height: 0"><A name="sdk_3_01" id="sdk_3_01">■ NITRO-SDK Version 3.1 正式版</A></H2>
<DIV style="text-align: right">
<P style="line-height: 0">(2006/05/02)</P>
</DIV>

<HR>
<H3><A name="note38-01" id="note38-01">Note 38-01: (CARD) ROM の DMA 転送に関する修正</A></H3>
<P>ROM からの DMA 転送を行う際に転送先バッファがキャッシュライン 32BYTE 境界に整合していないとバッファに隣接する変数がキャッシュ操作の影響を受ける場合がありましたが、これを修正しました。
</P>

<HR>
<H3><A name="note38-02" id="note38-02">Note 38-02: (CTRDG) AGB バックアップアクセス関数の追加</A></H3>
<P>AGB カートリッジ上に搭載されたバックアップデバイスへのアクセスを行うための一連の API を CTRDG ライブラリに追加しました。
</P>

<HR>
<H3><A name="note38-03" id="note38-03">Note 38-03: (CTRDG) CTRDG_SetPhiClock 関数, CTRDG_GetPhiClock 関数の追加</A></H3>
<P>カートリッジの PHI 端子から出力されるクロックの設定と設定値の取得を行う CTRDG_SetPhiClock 関数, CTRDG_GetPhiClock 関数を用意しました。<br>
これまで同様の関数が MI_SetPhiClock 関数, MI_GetPhiClock 関数となっていましたがカテゴリの見直しを行って CTRDG_ に移動しました。<br>
<br>
また内部の動作も、CTRDG_SetPhiClock 関数では、ARM7, ARM9 の両クロックを設定するようにしました。<br>
これまでは ARM9 しか変更しておらず、カートリッジのアクセス権が ARM7 に移ったときにクロック出力のパターンが変わってしまっていました。<br>
<br>
取得関数である CTRDG_GetPhiClock 関数の動作は MI_GetPhiClock 関数から変わっていません。
</P>

<HR>
<H3><A name="note38-04" id="note38-04">Note 38-04: (FS) ROM アーカイブの内部修正</A></H3>
<P>CARD_SetPulledOutCallback 関数で設定したコールバックが FALSE を返し、かつ CARD_TerminateForPulledOut 関数が呼び出されるまでの期間に FS_OpenFile 関数などの ROM ファイルアクセスを実行すると処理が完了しなくなってしまう不具合があり、これを修正しました。<br>
<br>
なお、FS_LoadTable 関数でファイルテーブルをメモリにロードしている場合はこの不具合は発生しません。
</P>

<HR>
<H3><A name="note38-05" id="note38-05">Note 38-05: (FX) FX_Mul 関数の変更 </A></H3>
<P>FX_Mul 関数で桁あふれが発生した場合、マクロ SDK_WARNING でメッセージを表示するように変更しました。<br>
また、関数リファレンスにも追記しました。
</P>

<HR>
<H3><A name="note38-06" id="note38-06">Note 38-06: (FX) VEC_Normalize 関数の修正</A></H3>
<P>関数に与える値が一定値以上の場合に正しい結果が得られない不具合がありましたので、一定値以上の場合、マクロ SDK_WARNING でメッセージを表示するように変更しました。<br>
また、関数リファレンスにも追記を行いました。
</P>

<HR>
<H3><A name="note38-07" id="note38-07">Note 38-07: (GX) G2_SetBlendAlpha 関数のリファレンスに記述の追加</A></H3>
<P>G2_SetBlendAlpha 関数のリファレンスに、第1対象面にはバックドロップ面を指定できない旨を追記しました。
</P>

<HR>
<H3><A name="note38-08" id="note38-08">Note 38-08: (MATH) MATHCompareFunc のリファレンス修正</A></H3>
<P>MATH_QSort 関数でソートをおこなう際に、比較関数として与える関数の型である MATHCompareFunc のリファレンスに２つの比較要素が等しい場合は 0 を返す必要がある旨を追記しました。
</P>

<HR>
<H3><A name="note38-09" id="note38-09">Note 38-09: (MI) MI_CompressLZ 関数の圧縮不具合修正</A></H3>
<P><a href="changelog.html#note35-04">Note 35-04</a> で修正された LZ 圧縮時にオーバーアクセスが発生する不具合の修正が LZ 圧縮関数の低速版 MI_CompressLZ 関数に反映されていませんでした。<br>
この不具合を修正しました。
</P>

<HR>
<H3><A name="note38-10" id="note38-10">Note 38-10: (OS) OS_GetConsoleType 関数の修正</A></H3>
<P>OS_GetConsoleType 関数の返り値が、関数リファレンスの記述と異なる値を返す可能性がありましたので、これを修正しました。
</P>

<HR>
<H3><A name="note38-11" id="note38-11">Note 38-11: (OS) exceptionDisplay-2 サンプルデモの修正</A></H3>
<P>$NitroSDK/build/demos/os/exceptionDisplay-2 サンプルデモにおいて、CW2.0 を使用することにより、必要な関数がデッドストリップされてしまう問題があったため、明示的にデッドストリップを行わないように修正しました。
</P>

<HR>
<H3><A name="note38-12" id="note38-12">Note 38-12: (PRC) デモ用の図形辞書データの修正</A></H3>
<P>デモ用の図形辞書データで「げ」の書き順が間違っていましたので、これを修正しました。
</P>

<HR>
<H3><A name="KnownIssues_3_01" id="KnownIssues_3_01">SDK 3.1 正式版での既知の問題点</A></H3>
<P>
・CodeWarrior 2.0 の仕様に暫定的に対応しました。ただしこれにともなった変更は現状のアプリケーションには影響はありません。<br>
  次回リリース時には正式対応となる予定です。<br>
</P>

<HR>
<H2 style="line-height: 0"><A name="sdk_3_01_rc" id="sdk_3_01_rc">■ NITRO-SDK Version 3.1 RC</A></H2>
<DIV style="text-align: right">
<P style="line-height: 0">(2006/04/11)</P>
</DIV>

<HR>
<H3><A name="note37-01" id="note37-01">Note 37-01: (CARD) 新規バックアップデバイスへの対応</A></H3>
<P>CARD ライブラリが 8Mb FLASH バックアップデバイスに対応し、CARD_BACKUP_TYPE_FLASH_8MBITS を CARDBackupType 列挙型に追加しました。<br>
<br>
関連して、リファレンスとサンプルデモも更新しました。 
</P>

<HR>
<H3><A name="note37-02" id="note37-02">Note 37-02: (DevEnv) .itcm.bss/.dtcm.bss/.wram.bss セクションの追加</A></H3>
<P>今までは .itcm/.dtcm/.wram セクションにおいて .bss セクションの指定をしていなかったため、初期値を持たない .bss セクションに置かれるものが
.data セクションに置かれてしまっていました。<br>
<br>
$NitroSDK/build/tools/makelcf、$NitroSDK/include/nitro/section.h の修正及び、$NitroSDK/include/nitro/specfiles、$NitroSDK/build/components/ichneumon 以下の.template を修正し、.itcm/.dtcm/.wram に .bss セクションを追加しました。
</P>

<HR>
<H3><A name="note37-03" id="note37-03">Note 37-03: (DevEnv) modulerules.cctype.CW の修正</A></H3>
<P>sed コマンドのバージョンにより NITRO-SDK でビルドエラーが発生する場合がありましたので、これを修正しました。
</P>

<HR>
<H3><A name="note37-04" id="note37-04">Note 37-04: (FX) MTX_Copy* 関数のリファレンス追加</A></H3>
<P>MTX_Copy* 関数についての説明を関数リファレンスの FX カテゴリに追加しました。<br>
以下の関数のリファレンスが追加されています。
<ul>
<li>MTX_Copy22 関数
<li>MTX_Copy33 関数
<li>MTX_Copy43 関数
<li>MTX_Copy44 関数
</ul>
</P>

<HR>
<H3><A name="note37-05" id="note37-05">Note 37-05: (GX) G3OP_DUMMY_COMMAND の追加</A></H3>
<P>ジオメトリコマンドの未定義コマンドである 0xFF をダミーコマンド G3OP_DUMMY_COMMAND として追加しました。
</P>

<HR>
<H3><A name="note37-06" id="note37-06">Note 37-06: (GX) ジオメトリコマンドサイクル一覧の修正</A></H3>
<P>環境マップを使用した場合、各ソースに相当するコマンドのサイクル数が増えることが判明しました。<br>
これについて関数リファレンスのジオメトリコマンドサイクル一覧に追記しました。
</P>

<HR>
<H3><A name="note37-07" id="note37-07">Note 37-07: (MI) エンディアンを考慮するメモリアクセス関数の追加</A></H3>
<P>リトルエンディアン・ビッグエンディアンを考慮してメモリを読み書きするための関数群を追加しました。
</P>

<HR>
<H3><A name="note37-08" id="note37-08">Note 37-08: (OS) OS_CheckHeap 関数の修正</A></H3>
<P>ヒープのハンドルの指定が OS_CURRENT_HEAP_HANDLE だった場合にエラーを返される不具合がありました。<br>
これを修正しました。
</P>

<HR>
<H3><A name="note37-09" id="note37-09">Note 37-09: (OS) アリーナの概要修正</A></H3>
<P>関数リファレンスの OS のアリーナについての概要において、アリーナの管理とメモリ確保についての図の記述に間違いがあったためこれを修正し、説明文を追加しました。
</P>

<HR>
<H3><A name="note37-10" id="note37-10">Note 37-10: (OS) スタックの8バイトアラインメント対応</A></H3>
<P>関数呼び出しの中でスタックポインタが常に8バイトに整合するようスタック処理を調整しました。
</P>

<HR>
<H3><A name="note37-11" id="note37-11">Note 37-11: (PM) PM_ForceToPowerOff 関数及び PM_ForceToPowerOffAsync 関数の修正</A></H3>
<P><a href="changelog.html#note36-13">Note 36-13</a> での仕様変更に不具合がありましたので、これを修正しました。
</P>

<HR>
<H3><A name="note37-12" id="note37-12">Note 37-12: (SND) SND_SetTrackMuteEx 関数の追加</A></H3>
<P>シーケンストラックのミュート時に、発音中の音に対する処理を選択できる SND_SetTrackMuteEx 関数を追加しました。
</P>

<HR>
<H3><A name="note37-13" id="note37-13">Note 37-13: (TOOL) attachsign ツールのリファレンス修正</A></H3>
<P>attachsign ツールのリファレンスにおいて認証コード取得に関する記述を変更しました。
</P>

<HR>
<H3><A name="note37-14" id="note37-14">Note 37-14: (TOOL) ppmconv ツールで読み込めない PPM ファイルがあった不具合の修正</A></H3>
<P>photoshop で作成した ppm ファイル(NetPBMformats Plugin経由で)を ppmconv* で変換しようとすると、Cannot convert file "xxxx.ppm" とメッセージが出力され、変換できませんでした。<br>
原因は、ファイルヘッダの解析処理の実装が ppm 仕様を完全にカバーしていなかったことによるものです。<br>
<br>
上記の問題点を修正しました。<br>
これにより今まで変換できなかった幾つかの ppm ファイルが変換できるようになります。<br>
また修正前の ppmconv* ツールで正常に変換が出来ていた ppm ファイルに対して、この修正の影響はありません。
</P>

<HR>
<H3><A name="note37-15" id="note37-15">Note 37-15: (VIB) pulse_vib サンプルデモの修正</A></H3>
<P><a href="changelog.html#note36-15">Note 36-15</a> で NITRO-SDK のすべてのサンプルデモのソースから削除した SVC_WaitVBlankIntr 関数が pulse_vib サンプルデモ内で使用されていたため、これを OS_WaitVBlankIntr 関数に変更しました。<br>
また、振動カートリッジライブラリの制限に反するパラメータを入力してもサンプルが停止しないように変更しました。
</P>

<HR>
<H3><A name="note37-16" id="note37-16">Note 37-16: (WM) dataShare-Model サンプルデモの修正</A></H3>
<P>ユーザが指定した子機台数 (WH_CHILD_MAX) が WM_NUM_MAX_CHILD より少なかった場合、WH_CHILD_MAX を超えて WM_GetSharedDataAddress 関数が呼ばれていたので、これを修正しました。
</P>

<HR>
<H3><A name="note37-17" id="note37-17">Note 37-17: (WM) wireless-all サンプルデモの追加</A></H3>
<P>WM ライブラリの機能を総合的に使用するサンプルとして $NitroSDK/build/demos/wm/wireless-all サンプルデモを追加しました。
</P>

<HR>
<H3><A name="note37-18" id="note37-18">Note 37-18: (WM) サンプルデモの修正</A></H3>
<P>WM サンプルデモに以下の修正を加えました。
<ul>
<li>$NitroSDK/build/demos/wireless_shared/wc の WC サンプルモジュールでデータシェアリングと MP 直接制御の両方のモードを併用できるように修正しました。
<li>$NitroSDK/build/demos/wireless_shared/wh の WH サンプルモジュールで1フレームあたりの MP 通信回数上限を WH_MP_FREQUENCY として wh_config.h 内で設定可能に変更しました。<br>
この値を定義していない従来のプログラムはデフォルトの1になります。</li>
</ul>
</P>

<HR>
<H3><A name="KnownIssues_3_01_rc" id="KnownIssues_3_01_rc">SDK 3.1 RCでの既知の問題点</A></H3>
<P>
・AGB カートリッジ上に搭載されたバックアップデバイスへのアクセスを行うための一連の API を CTRDG ライブラリに追加しました。<br>
  しかし、今回追加された AGB バックアップアクセス関数は検証が完全ではないため動作は保障されていません。<br>
  次回リリース時には正式対応となる予定です。<br>
<br>
・CodeWarrior 2.0 の仕様に暫定的に対応しました。ただしこれにともなった変更は現状のアプリケーションには影響はありません。<br>
  次回リリース時には正式対応となる予定です。<br>
</P>


<HR>
<H2 style="line-height: 0"><A name="sdk_3_01_pr" id="sdk_3_01_pr">■ NITRO-SDK Version 3.1 PR</A></H2>
<DIV style="text-align: right">
<P style="line-height: 0">(2006/03/14)</P>
</DIV>

<HR>
<H3><A name="note36-01" id="note36-01">Note 36-01: (ARM7) コンポーネントでの抜け検出自動処理の改善</A></H3>
<P>従来は、カードとカートリッジのいずれか一方のバスを OS_Lock* 関数で長期間ロックし続けているとその間は
もう一方のデバイスの抜け検出が実行できませんでしたが、これを実行できるように変更しました。
</P>

<HR>
<H3><A name="note36-02" id="note36-02">Note 36-02: (CARD) CARD_CheckPulledOut 関数の内部修正</A></H3>
<P>CARD_CheckPulledOut 関数を複数回呼ばれた場合に、コールバックが何度も呼ばれてしまうことのないように変更しました。
今後は、CARD_CheckPulledOut 関数での呼び出し及び、ARM7 の抜け検出を通じて一度しかコールバックが呼ばれないようになりました。
</P>

<HR>
<H3><A name="note36-03" id="note36-03">Note 36-03: (CTRDG) AGB カートリッジ領域へのアクセス制限強化</A></H3>
<P>AGB カートリッジ領域への不意な書き込みアクセスを回避するため、CTRDG_Init 関数内でプロテクションリージョンの初期設定を変更するよう処理を追加しました。
カートリッジへ書き込みアクセスを行う場合は、カートリッジ情報を必ず確認した上で CTRDG_Enable 関数を呼び出す必要があります。<br>
<br>
※なお、この機能に対応した IS-NITRO-DEBUGGER ver1.65 以降のデバッガでないと
OS_Printf 関数などのデバッグ文字列出力時に強制停止してしまうのでご注意ください。
</P>

<HR>
<H3><A name="note36-04" id="note36-04">Note 36-04: (CTRDG) CTRDG_CheckPulledOut 関数の追加</A></H3>
<P>カートリッジの抜き検出を ARM9 からただちに行う CTRDG_CheckPulledOut 関数を追加しました。
</P>

<HR>
<H3><A name="note36-05" id="note36-05">Note 36-05: (GX) 2D_CharBg_Direct サンプルデモの修正</A></H3>
<P>$NitroSDK/build/demos/gx/UnitTours/2D_CharBg_Direct サンプルデモで、
GX_LoadBG3Bmp 関数の前に G2_SetBG3ControlDCBmp 関数で正しく設定するよう修正しました。
</P>

<HR>
<H3><A name="note36-06" id="note36-06">Note 36-06: (GX) G2_GetBG2ScrPtr 関数及び G2_GetBG3ScrPtr 関数のリファレンス修正</A></H3>
<P>G2_GetBG2ScrPtr 関数および G2_GetBG3ScrPtr 関数のリファレンスにおいてビットマップ BG の場合の記述に間違いがあったため、これを修正しました。
</P>

<HR>
<H3><A name="note36-07" id="note36-07">Note 36-07: (MB) MB_FAKESCAN_PARENT_BEACON 通知の追加</A></H3>
<P>MBFakeScanCallbackFunc コールバックへ通知されるイベントに MB_FAKESCAN_PARENT_BEACON を追加しました。
この通知は MB 親機のビーコンを受信するたびに発生します。<br>
<br>
関連して、サンプルデモの multiboot-Model と fake_child で MB_GetUserVolatData 関数を使用するよう処理を追加しました。
</P>

<HR>
<H3><A name="note36-08" id="note36-08">Note 36-08: (MB) MB_ReadMultiBootParentBssDesc 関数の動作変更</A></H3>
<P>MB_ReadMultiBootParentBssDesc 関数内で本来指定するべきだった gameInfo の magicNumber メンバ, ver メンバが初期化されないままであったので、これを修正しました。
</P>

<HR>
<H3><A name="note36-09" id="note36-09">Note 36-09: (MB) クローンブートサンプル親機への再接続時のリトライ不具合の修正</A></H3>
<P><a href="changelog-oldver.html#note20-08">Note 20-08:</a>での修正内容がクローンブートサンプルに適用されておらず、
子機ブート後に親機に再接続する際、一度でも親機への接続に失敗するとリトライができないという不具合があったため、これを修正しました。
</P>

<HR>
<H3><A name="note36-10" id="note36-10">Note 36-10: (MB) ドキュメントの更新</A></H3>
<P>以下の MB ライブラリ関連ドキュメントを更新しました。<br>
$NitroSDK/docs/technicalNotes/AboutMultiBoot.pdf
</P>

<HR>
<H3><A name="note36-11" id="note36-11">Note 36-11: (MIC) 自動サンプリング時の制限の明記</A></H3>
<P>マイクの自動サンプリングを行う際に、サンプリング結果を格納するバッファとして拡張メインメモリを指定することができない、
という制限がある事をリファレンスマニュアルに追記しました。ライブラリの動作には変更はありません。
</P>

<HR>
<H3><A name="note36-12" id="note36-12">Note 36-12: (PM) PMAmpGain 列挙型に関する不具合修正</A></H3>
<P>PM_GAINAMP_DEFAULT マクロ内で使用している定数 PM_AMPGAIN_DEFAULT が実際には定義されていなかったため、
これを修正し PMAmpGain 列挙型に PM_AMPGAIN_DEFAULT を追加しました。
</P>

<HR>
<H3><A name="note36-13" id="note36-13">Note 36-13: (PM) PM_ForceToPowerOff 関数及び PM_ForceToPowerOffAsync 関数の変更</A></H3>
<P>アプリケーション側で DS 本体の電源を OFF にする際、LCD OFF 状態で本体電源を OFF にすると、ごくまれに DS 本体が再起動してしまうことがありました。<br>
そのため LCDを ON にした後で電源を OFF にするよう PM_ForceToPowerOff 関数及び PM_ForceToPowerOffAsync 関数の仕様を変更しました。
</P>

<HR>
<H3><A name="note36-14" id="note36-14">Note 36-14: (TOOL) makerom におけるワイルドカードによるファイル指定時の ROM 内収録順序の固定</A></H3>
<P>makerom において ROM 内部へ収録するファイルをワイルドカードによって指定した場合に
ファイルの収録順序がビルドに使用している PC のファイルシステムのエントリの順番に
依存する場合がありました。このため、同じアプリケーションをビルドしているにも
関わらず PC 毎にファイルの収録順序が変わってしまうという現象が発生しました。<br>
これを修正し、makerom においてファイルを名前でソートした順で収録することにしました。
</P>


<HR>
<H3><A name="note36-15" id="note36-15">Note 36-15: (VIB) VIB ライブラリの追加</A></H3>
<P>ニンテンドーDS 用オプションカートリッジである振動カートリッジを制御するライブラリとして、VIB ライブラリを新設しました。
</P>


<HR>
<H3><A name="note36-16" id="note36-16">Note 36-16: (WBT) WFS サンプルモジュールの修正</A></H3>
<P>$NitroSDK/build/demos/wireless_shared/wfs に収録されているWFS サンプルモジュールに以下の修正を行いました。 
<ul>
<li>親機側のファイルリスト初期化処理においてリスト終端の内容が不定になるという不具合があり、これを修正しました。
<li>最大接続台数の子機群から極端な頻度で同時にファイル要求を受けると親機側のファイルハンドルが不足することがあり、これを修正しました。
<li>ファイル要求中の子機が切断すると他の子機のファイル要求が進捗しなくなる場合があり、これを修正しました。
</ul>
</P>

<HR>
<H3><A name="note36-17" id="note36-17">Note 36-17: (WBT) 関数リファレンスの修正</A></H3>
<P>関数リファレンスにおいて、以下のコマンドが子機から子機へ直接発行できる旨の誤った記述があり、これを修正しました。
<ul>
<li>WBT_PutUserData
<li>WBT_GetBlockInfo
<li>WBT_GetBlock
</ul>
</P>

<HR>
<H3><A name="note36-18" id="note36-18">Note 36-18: (WBT) 関数リファレンス概要追加</A></H3>
<P>WBT ライブラリの関数リファレンスに「概要」の項目を追加しました。
</P>

<HR>
<H3><A name="note36-19" id="note36-19">Note 36-19: (WM) MP 通信中の子機の Null 応答に関する仕様変更</A></H3>
<P><a href="changelog.html#note30-06">Note 30-06</a>で MP 通信中の子機が Null 応答を返さないように仕様を変更しましたが、
環境により、まれに動作を不安定にすることがありましたので、<a href="changelog.html#note30-06">Note 30-06</a> での変更をキャンセルし、以前の仕様に戻しました。<br>
<br>
また、子機の Null 応答を許す代わりに、親機は Null 応答を受け取った場合、子機が通信を失敗したとみなすように仕様を変更しました。<br>
なお、WM_SetMPInterval 関数の機能が追加されていますので、Null 応答を返すように変更しても、子機側の過負荷問題は発生しません。
</P>

<HR>
<H3><A name="note36-20" id="note36-20">Note 36-20: (WM) WMGameInfo 構造体の定義変更</A></H3>
<P>WMGameInfo 構造体の定義を変更しました。version フィールドは廃止され、magicNumber フィールドに名前を変更しました。
magicNumber フィールドは DS 用のビーコンであれば 0x0001 で固定です。
また、予約領域から1バイトを使用して ver フィールドを新設しました。<br>
現バージョンでは ver フィールドは必ず 0 ですが、今後、WMGameInfo 構造体の形式が変更されると増加します。
ただし、将来的に下位互換は保たれますので、ver フィールドをチェックして動作を制限してはいけません。
これらの変更により、WMGameInfo.version を参照していたプログラムでは書き換えが必要となります。<br>
また、gameNameCount_attribute フィールドは attribute フィールドに名前を変更しました。
旧名でも参照できますが、今後は新しいフィールド名を使用してください。<br>
<br>
また、この変更作業にあわせて、全く使用されていないコンパイルスイッチの
WM_GAMEINFO_TYPE_OLD のサポートを終了しました。
</P>


<HR>
<H3><A name="note36-21" id="note36-21">Note 36-21: (WM) WM_IsValidGameBeacon, WM_IsValidGameInfo 関数の追加</A></H3>
<P>スキャン結果のビーコンが、DSワイヤレスプレイ用親機のものかどうかを判別するために
WM_IsValidGameBeacon 関数と、WM_IsValidGameInfo 関数を追加しました。
内部的に WMGameInfo.magicNumber が正しいかどうかを判定します。
また、WM の各デモをこの関数を使用するように変更しました。
</P>

<HR>
<H3><A name="note36-22" id="note36-22">Note 36-22: (WM) minPollBmpMode の不具合の修正</A></H3>
<P>MP 通信のオプションである minPollBmpMode を有効にした場合、一定時間後に通信が途切れて MP ライフタイム切れになってしまう不具合がありましたが、これを修正しました。<br>
<br>
minPollBmpMode を使用して特殊な通信を行っているタイトルのみこの不具合の影響を受けます。
</P>

<HR>
<H3><A name="note36-23" id="note36-23">Note 36-23: (WM) ドキュメントの更新</A></H3>
<P>以下の WM ライブラリ関連ドキュメントを更新しました。<br>
$NitroSDK/docs/technicalNotes/AboutWirelessManager.pdf
</P>

<HR>
<H3><A name="note36-24" id="note36-24">Note 36-24: (その他) マクロの記述修正</A></H3>
<P>引数に()がついていなかったマクロを正しい記述に修正しました。<br>
()の存在の有無で動作が変わるような引数を与えていない限りこの変更による影響はありません。<br>
修正したマクロは以下です。
<ul>
<li>SDK_NULL_ASSERT
<li>SDK_ALIGN4_ASSERT
<li>GX_VFCFX10
<li>GX_FX16ST
<li>GX_COMP4x4_PLTT_IDX
<li>GX_PACK_MTXMODE_PARAM
<li>GX_PACK_VIEWPORT_PARAM
<li>SVC_CpuClear
<li>SVC_CpuCopy
<li>WC_ROUNDUP_32
</ul>
なおこの変更に伴い、該当する関数リファレンスも修正しました。
</P>

<HR>
<H3><A name="KnownIssues_3_01_pr" id="KnownIssues_3_01_pr">SDK 3.1 PRでの既知の問題点</A></H3>
<P>
ありません。
</P>


<HR>
<H2 style="line-height: 0"><A name="sdk_3_00" id="sdk_3_00">■ NITRO-SDK Version 3.0 正式版</A></H2>
<DIV style="text-align: right">
<P style="line-height: 0">(2006/01/16)</P>
</DIV>

<HR>
<H3><A name="note35-01" id="note35-01">Note 35-01: (CARD) 関数リファレンス概要追加</A></H3>
<P>CARD ライブラリの関数リファレンスに「概要」の項目を追加しました。
</P>

<HR>
<H3><A name="note35-02" id="note35-02">Note 35-02: (DevEnv) packnlf ツールのリファレンスマニュアル追加</A></H3>
<P>packnlf ツールのリファレンスマニュアルを追加しました。
</P>

<HR>
<H3><A name="note35-03" id="note35-03">Note 35-03: (DevEnv) ソースコードの書式統一</A></H3>
<P>ライブラリおよびサンプルデモのソースコード全体で、インデントや改行に関する構文上の書式を統一しました。 
</P>

<HR>
<H3><A name="note35-04" id="note35-04">Note 35-04: (MI) MI_CompressLZFast 関数, ntrcomp.exe の LZ 圧縮不具合修正</A></H3>
<P>MI_CompressLZFast 関数で LZ 圧縮をする際に、メモリのオーバーアクセスを起こす可能性がありました。<br>
<br>
また、NITRO-SDK 3.0 RC2 以降の ntrcomp.exe にも同様の不具合があり、異常終了または圧縮データサイズが僅かに増加する可能性がありました。<br>
<br>
これらの不具合を修正しました。
</P>

<HR>
<H3><A name="note35-05" id="note35-05">Note 35-05: (OS) OS_ResetSystem 関数の不具合修正</A></H3>
<P>OS_ResetSystem 関数の内部でカートリッジへアクセスすることがあり、そのためカートリッジバスがロックされたままで呼び出された場合にライブラリ内部で無限ループしてしまう問題があり、これを修正しました。<br>
この不具合は NITRO-SDK 3.0 RC3 でのみ発生します。
</P>

<HR>
<H3><A name="note35-06" id="note35-06">Note 35-06: (OS) 中国版起動画面の修正</A></H3>
<P><a href="changelog.html#note32-23">Note 32-23</a> の更新に伴い、起動画面が文字化けするという不具合がありましたのでこれを修正しました。
</P>

<HR>
<H3><A name="note35-07" id="note35-07">Note 35-07: (PRC) デモ用の図形辞書データの修正</A></H3>
<P>デモ用の図形辞書データで「け」の書き順が間違っておりましたので、図形辞書データの「け」を修正しました。
</P>

<HR>
<H3><A name="note35-08" id="note35-08">Note 35-08: (WM) サンプルデモのデバッグ文字列の表示修正</A></H3>
<P>$NitroSDK/build/demo/wireless_shared 以下のサンプルライブラリ wh, wfs, wc のデバッグ出力において16進数の前には "0x" をつけて表示するようにしました。
</P>

<HR>
<H3><A name="note35-09" id="note35-09">Note 35-09: (WM) 内部の通信パラメータの補正</A></H3>
<P>環境により MP 通信に失敗しやすくなることがありましたので、通信の内部パラメータに補正を入れて改善しました。
</P>

<HR>
<H3><A name="KnownIssues_3_00" id="KnownIssues_3_00">SDK 3.0 正式版での既知の問題点</A></H3>
<P>
ありません。
</P>


<HR>
<H2 style="line-height: 0"><A name="sdk_3_00_rc3" id="sdk_3_00_rc3">■ NITRO-SDK Version 3.0 RC3</A></H2>
<DIV style="text-align: right">
<P style="line-height: 0">(2005/12/26)</P>
</DIV>

<HR>
<H3><A name="note34-01" id="note34-01">Note 34-01: (MATH) ビット演算関数の追加</A></H3>
<P>ビット演算を行う以下のインライン関数群を追加しました。
<ul>
<li>MATH_CountTrailingZerosおよびMATH_CTZマクロ
<li>MATH_GetLeastSignificantBitおよびMATH_LSBマクロ
<li>MATH_GetMostSignificantBitおよびMATH_MSBマクロ
</ul>
</P>

<HR>
<H3><A name="note34-02" id="note34-02">Note 34-02: (MB) MB_ReadSegment関数の省メモリ指定時の不具合の修正</A></H3>
<P>MB_ReadSegment関数で小さなバッファサイズを指定してアーカイブから動的に配信データをロードする際にブロック転送が進捗しなくなってしまう場合があり、
この問題を修正しました。
</P>

<HR>
<H3><A name="note34-03" id="note34-03">Note 34-03: (MB) 悪条件下でのMP通信効率の改善</A></H3>
<P>MBライブラリのブロック転送の実装において、
親機側でWM_ERRCODE_SEND_FAILEDがしばしば発生しうるような悪い通信環境では転送効率が大きく低下することがあり、これを修正しました。
</P>

<HR>
<H3><A name="note34-04" id="note34-04">Note 34-04: (OS) DC_TouchRange関数のリファレンス修正</A></H3>
<P>ニンテンドーDSのCPUであるARM946E-Sはpld命令を実行しても何も行わない仕様のため、
この機能を使用しているDC_TouchRange関数のリファレンスにその旨を記述しました。
</P>

<HR>
<H3><A name="note34-05" id="note34-05">Note 34-05: (OS) OS_CreateThread 関数の修正</A></H3>
<P>OS_CreateThread 関数で初期化するスレッド構造体の初期値によっては、
スレッド実行時にアクセス例外のエラーになってしまうという不具合がありましたが、
これを修正しました。
</P>

<HR>
<H3><A name="note34-06" id="note34-06">Note 34-06: (WBT) wbt-1 サンプルデモの修正</A></H3>
<P>$NitroSDK/build/demos/wbt/wbt-1 サンプルデモで、
サンプルソース内のマクロスイッチ NOT_USE_ALLOCを有効にするとコンパイルエラーにより正しくビルドできなかったため、これを修正しました。
</P>

<HR>
<H3><A name="note34-07" id="note34-07">Note 34-07: (WBT) ユーザコールバックの不具合修正</A></H3>
<P>各コマンドの完了を通知するユーザコールバック内で引数のresultメンバの値が不定であったため、
これを修正しました。
</P>

<HR>
<H3><A name="note34-08" id="note34-08">Note 34-08: (WM) MP 通信パラメータの不具合修正</A></H3>
<P>3.0RC2 で追加された MP 通信の各種パラメータの設定が正常に機能していませんでしたので、これを修正しました。
</P>

<HR>
<H3><A name="note34-09" id="note34-09">Note 34-09: (WM) WH に関するパラメータ設定方法の変更</A></H3>
<P>WH を使用している SDK の全てのデモは$NitroSDK/build/demos/wireless_shared/wh/wh_config.hを直接参照し設定を共有していまし
たが、各デモで個別に設定を持つようになりました。<br>
この変更によって、wh_config.hの場所が 
$NitroSDK/build/demos/wireless_shared/wh/default/ に変更になっています。
</P>

<HR>
<H3><A name="note34-10" id="note34-10">Note 34-10: (WM) 通信切断時の内部動作の改善</A></H3>
<P>DS本体のロットによっては、通信切断直後のわずかなタイミングでまれに内部動作に異常が生じるハードウェアがあり、
その対策をWMライブラリ内部で行うように処理を追加しました。
</P>

<HR>
<H3><A name="KnownIssues_3_00_rc3" id="KnownIssues_3_00_rc3">SDK 3.0 RC3での既知の問題点</A></H3>
<P>
ありません。
</P>


<HR>
<H2 style="line-height: 0"><A name="sdk_3_00_rc2" id="sdk_3_00_rc2">■ NITRO-SDK Version 3.0 RC2</A></H2>
<DIV style="text-align: right">
<P style="line-height: 0">(2005/12/05)</P>
</DIV>


<HR>
<H3><A name="note33-01" id="note33-01">Note 33-01: (CARD) バックアップ操作関数の不具合修正</A></H3>
<P>小さなサイズ指定でのバックアップ書き込みをワイヤレス通信中に実行すると、成功した場合でもまれにCARD_RESULT_TIMEOUTを返す場合があり、
この問題を修正しました。
</P>

<HR>
<H3><A name="note33-02" id="note33-02">Note 33-02: (CTRDG) AGBカートリッジのアクセス許可関数の追加</A></H3>
<P>AGBカートリッジへのアクセス許可状態を制御するための以下の関数群を追加しました。
<ul>
<li>CTRDG_IsEnabled
<li>CTRDG_Enable
<li>CTRDGi_CheckEnableld
</ul>
</P>

<HR>
<H3><A name="note33-03" id="note33-03">Note 33-03: (DevEnv) SDK バージョン比較用マクロの追加</A></H3>
<P>SDK のバージョンを数値情報に変換するマクロ SDK_VERSION_NUMBER を追加しました。<BR>
また現在の SDK バージョンを表す定数 SDK_CURRENT_VERSION_NUMBER を追加しました。
</P>

<HR>
<H3><A name="note33-04" id="note33-04">Note 33-04: (DevEnv) SDK_INLINE, SDK_DECL_INLINE の追加</A></H3>
<P>関数のインライン指定用マクロシンボルとして SDK_INLINE および SDK_DECL_INLINE を追加しました。<BR>
これにより、インライン指定の形式を一括して切り替え可能になりました。<BR>
これらのマクロの値を変更した場合は NITRO-SDK 全体を再ビルドする必要があります。<BR>
<BR>
ただし、インライン関数の実体化に関する不具合が修正されたバージョンのコンパイラを使用している環境であり、さらにこの不具合を回避するために inline を static inline にしていた関数の場合に限り、これらのマクロを static inline から inline に変更することによってコードサイズを削減することができます。 <BR>
<BR>
これらのマクロを変更することは基本的に無保証となりますのでアプリケーション側での判断において行ってください。
</P>

<HR>
<H3><A name="note33-05" id="note33-05">Note 33-05: (DevEnv) makebanner ツールの修正</A></H3>
<P>makebanner ツールで使用する bsf ファイル内の記述において、ゲームタイトル名または説明文の文字列の先頭部分が指定可能な言語パラメータのいずれかと一致する場合にこの文字列内容をバナーファイルへ含めないという不具合があり、これを修正しました。
</P>

<HR>
<H3><A name="note33-06" id="note33-06">Note 33-06: (DevEnv) ntexconv の更新</A></H3>
<P>$NitroSDK/tools/bin/ntexconv.exe を現在リリースされている最新の TXLib パッケージ内の netconv.exe に更新しました。<BR>
SDK ではアイコンイメージ作成時にのみ ntexconv を使用しているので動作は変わりませんが、テクスチャ作成を行う場合でも SDK 内の ntexconv を使用することができるようになりました。
</P>

<HR>
<H3><A name="note33-07" id="note33-07">Note 33-07: (DevEnv) packnlf ツールの追加</A></H3>
<P>.nlf ファイルが参照している全てのファイル指定を相対パス化し、それら全てをまとめ ZIP ファイルとして出力するツール packnlf を追加しました。<BR>
<BR>
このツールの追加は NITRO-SDK 3.0 RC で入っていましたが、changelog から漏れていました。
</P>

<HR>
<H3><A name="note33-08" id="note33-08">Note 33-08: (MB) MBP サンプルモジュールの修正</A></H3>
<P>$NitroSDK/build/demos/wireless_shared/mbp に収録されている MBP サンプルモジュールで、以下の不具合を修正しました。
<ul>
<li>親機側が MBP_StartRebootAll 関数を呼び出して子機群が再起動を試行するタイミングにおいて、接続中の最後の子機だけがキャンセルで抜けた場合にまれに親機側の処理が進捗しなくなるという不具合があり、これを修正しました。
</ul>
</P>

<HR>
<H3><A name="note33-09" id="note33-09">Note 33-09: (MB) MB_FAKE_WORK_SIZEの定義を追加</A></H3>
<P>MB_FakeInit関数を呼び出す際に必要となるバッファサイズをMB_FAKE_WORK_SIZEとして定義しました。
この値は、従来から存在するMB_FakeGetWorkSize関数で取得されるサイズと等価な定数として定義されます。
</P>

<HR>
<H3><A name="note33-10" id="note33-10">Note 33-10: (MB) 親機ビーコンのフラグに関する不具合修正</A></H3>
<P>MB 親機が送信する初回のビーコンにおいて WM_ATTR_FLAG_MB フラグは無効のまま WM_ATTR_FLAG_ENTRY フラグのみ有効となっていたため、同一 GGID をワイヤレスプレイとダウンロードプレイで共用するアプリケーションがこれを誤検出しうるという不具合があり、これを修正しました。
</P>

<HR>
<H3><A name="note33-11" id="note33-11">Note 33-11: (MI)MI_CompressLZFast関数の追加</A></H3>
<P>9KB程度のワークバッファを必要とする代わりに、これまでも用意されていたMI_CompressLZ関数と比較して数倍高速にLZ圧縮をおこなうMI_CompressLZFast関数を追加しました。
</P>

<HR>
<H3><A name="note33-12" id="note33-12">Note 33-12: (OS) ARM7デバッグ出力自動化ビルドスイッチの追加</A></H3>
<P>OS_InitPrintServer 関数と OS_PrintServer 関数を OS ライブラリ内から自動的に呼び出すよう設定するビルドスイッチとして NITRO_ENABLE_ARM7_PRINT を追加しました。<BR>
このスイッチを指定しない場合は従来どおりの仕様となります。<BR>
<BR>
このビルドスイッチはOSライブラリに対してのみ有効であり、設定を切り替える場合はOSライブラリを再ビルドする必要があります。
</P>

<HR>
<H3><A name="note33-13" id="note33-13">Note 33-13: (OS) Ｖブランク待ち関数の定義変更</A></H3>
<P>
SVC_WaitVBlankIntr 関数は低優先度のスレッドにリソースを開放しない仕様であり、
使い方によっては問題が発生するため、SVC_WaitVBlankIntr 関数呼び出しが自動的に OS_WaitVBlankIntr 関数呼び出しに置換されるように変更しました。
但しこの置換はヘッダファイル内の define による置換ですので、再ビルドした際に初めて有効になる点にご注意下さい。<br>
<br>
この変更の結果、実際にVブランク割り込み待ち動作へ入るまでにかかるオーバーヘッドがわずかに増加しました。
アプリケーションの挙動には殆ど影響ありませんが、どうしても従来通りのシステムコールを用いなければならない場合には、
環境変数 NITRO_SVC_WAITVBLANK_COMPATIBLE を定義する事で、今回の変更を無効にする事が出来ます。
但しこの場合はスレッドの問題は未解決のままになりますので、十分な検証を行って下さい。<br>
<br>
また、「<a href="#note32-18">Note 32-18: (OS) Vブランク待ち関数の改良</a>」において
 SVC_WaitVBlankIntr 関数を弱シンボル化して別定義で上書き可能としたと報告しましたが、
今回の修正により弱シンボルである必要がなくなりましたので、これを元に戻しました。
</P>

<HR>
<H3><A name="note33-14" id="note33-14">Note 33-14: (OS) サンプルデモからの OS_InitPrintServer, OS_PrintServer 関数の削除</A></H3>
<P>NITRO-SDK の全てのサンプルデモのソースから OS_InitPrintServer, OS_PrintServer 関数を削除しました。
</P>

<HR>
<H3><A name="note33-15" id="note33-15">Note 33-15: (OS) サンプルデモからの PXI_Init 関数の削除</A></H3>
<P>NITRO-SDK の全てのサンプルデモのソースから PXI_Init 関数を削除しました。<BR>
この変更によってデモの動作が変わることはありません。
</P>

<HR>
<H3><A name="note33-16" id="note33-16">Note 33-16: (OS) サンプルデモの SVC_WaitVBlankIntr 関数の変更</A></H3>
<P>NITRO-SDK の全てのサンプルデモのソースの SVC_WaitVBlankIntr 関数の呼び出し部分を OS_WaitVBlankIntr 関数に変更しました。<BR>
この変更によってデモの動作が変わることはありません。
</P>

<HR>
<H3><A name="note33-17" id="note33-17">Note 33-17: (OS) 拡張メイン RAM アリーナの開始位置修正</A></H3>
<P>拡張メインメモリアリーナの開始アドレスが、OS のアリーナ概要ページでは 0x23e0000 ( overlay がある場合はそれを考慮してさらに上位のアドレスとなります。以下同様) となっていますが lcf テンプレートの定義は 0x2400000 となっていました。<BR>
これを、OS概要ページにあわせるように 0x23e0000 としました。
</P>

<HR>
<H3><A name="note33-18" id="note33-18">Note 33-18: (WBT) WFS サンプルモジュールの修正</A></H3>
<P>$NitroSDK/build/demos/wireless_shared/wfs に収録されている WFS サンプルモジュールに以下の修正を行いました。
<ul>
<li>いくつかの関数で、初期化前および終了後に呼び出された場合の正当性判定を強化しました。
</ul>
</P>

<HR>
<H3><A name="note33-19" id="note33-19">Note 33-19: (WBT) WFS 関連サンプルデモの修正</A></H3>
<P>WFS サンプルモジュールを使用する以下のサンプルデモ内で子機が FS_ReadFile 関数を呼び出している箇所について、リード中の親機切断を検知できるよう処理を修正しました。
<ul>
<li>$NitroSDK/build/demos/wbt/wbt-wfs
<li>$NitroSDK/build/demos/mb/multiboot-wfs
</ul>
</P>

<HR>
<H3><A name="note33-20" id="note33-20">Note 33-20: (WM) 2D_CharBg_3, Sub_CharBg_3 サンプルデモの更新</A></H3>
<P>$NitroSDK/build/demos/gx/UnitTours/{2D_CharBg_3,Sub_CharBg_3} サンプルデモにおいて、縮小しすぎるとアサートで停止してしまう不都合を修正しました。
</P>

<HR>
<H3><A name="note33-21" id="note33-21">Note 33-21: (WM) MP通信のタイミング設定関数の追加</A></H3>
<P>フレーム同期通信モードにおいて、各フレームの初回のMP通信の準備を開始するのはこれまで親機ではVアラームカウントが260、
子機では240と固定値となっていましたが、これを設定するWM_SetMPTiming関数を追加しました。
実装上の制限により、220〜262, 0〜190 の範囲内で設定する必要があります。<br>
通信処理中は ARM7 が活発に活動するようになり、ARM9 でメインメモリアクセスのストールが多く発生するようになりますので、
通信タイミングを調整することによって
ARM9 の平均的な動作パフォーマンスが向上することがあります。
明示的に設定しなおさない場合は従来の設定値がデフォルトとして使用されます。
<br>
</P>

<HR>
<H3><A name="note33-22" id="note33-22">Note 33-22: (WM) MP通信の送信サイズ設定関数の追加</A></H3>
<P>これまでは、MP通信の送信サイズは親機が通信前にWM_SetParentParameter関数で設定する
WMParentParam構造体内のparentMaxSizeおよびchildMaxSizeフィールドの値で固定となっていましたが、
これを通信処理中に変えられるように変更しました。
この親機送信サイズ、子機送信サイズはそれぞれWM_SetMPParentSize関数とWM_SetMPChildSize関数で設定できます。<br>
親機と子機の送信サイズは、親機ではWM_StartParent関数の実行時にWMParentParam構造体のparentMaxSize、childMaxSizeの値で初期化され、
子機ではWM_StartConnect関数で接続した際にbeaconに乗っていた設定情報で初期化されます。
これらの値はWM_SetMPParentSize関数、WM_SetMPChildSize関数を使用して縮小することはできますが、初期値を超えることはできません。
また、子機側においては、親機送信サイズは設定する意味を持たず、また子機送信サイズの設定値は MP 通信を行うたびに親機の子機送信サイズの設定値で上書きされます。<br>
親機の送信はこれまでもデータサイズが小さければ電波も短く送出されていましたので、設定しなおすメリットはあまりありません。
一方、子機側は常にchildMaxSizeで指定したバイト数分の電波を送出していましたので、必要なサイズに再設定することにより、
送信時間が減少して通信を安定化することができます。
なお、現在の実装ではこれらの関数で再設定した送信サイズよりも大きなサイズのデータがすでに
WM_SetMPDataToPort関数で送信予約されていた場合、
そのデータは送出されず送信キューに溜まり続けますので注意してください。</P>


<HR>
<H3><A name="note33-23" id="note33-23">Note 33-23: (WM) MP通信間隔の制御機能の追加</A></H3>
<P>フレーム同期通信モードの2回目以降と連続通信モードでのMP通信において、
直前のMP通信との時間間隔を設定できるWM_SetMPInterval関数を追加しました。
親子独立にマイクロ秒単位で指定できます。<br>
デフォルトでは、親機が1000us、子機が0us(間隔なし)となっています。
この値を調整することでスループットを向上させることができますが、
親機によるMP通信間隔が子機の受信処理時間より短くなってしまうと取りこぼしによって反対にスループットが低下します。
その場合、無駄な再送が発生することで電波の使用効率も悪くなりますので注意してください。<br>
</P>




<HR>
<H3><A name="note33-24" id="note33-24">Note 33-24: (WM) dataShare-Model サンプルデモの更新</A></H3>
<P>$NitroSDK/build/demos/wm/dataShare-Model サンプルデモで、接続対象の親機情報を表示する処理を親機リスト画面に追加しました。
</P>

<HR>
<H3><A name="note33-25" id="note33-25">Note 33-25: (WM) dataShare-Model サンプルデモの表示修正</A></H3>
<P>$NitroSDK/build/demos/wm/dataShare-Model サンプルデモで起動時に文字出力画面が崩れることがあり、これを修正しました。
</P>


<HR>
<H3><A name="note33-26" id="note33-26">Note 33-26: (WM) フレームあたりの最大MP通信回数の設定値の追加</A></H3>
<P>従来は再送も含めた1フレームあたりの最大MP通信回数は6回で固定でしたが、これを設定できるように変更しました。
WM_SetMPParameter関数でWMMPParam.maxFrequency を設定してください。
なお、WM_StartMPEx関数のfixFreqMode引数の処理は、maxFrequencyもmpFreq 引数の値に設定する、という動作に内部的に変更しています。<br>
</P>

<HR>
<H3><A name="note33-27" id="note33-27">Note 33-27: (WM) 受信強度レベルの仕様変更</A></H3>
<P>WM_GetLinkLevel 関数で取得できる受信強度レベルには、送信失敗時に補正がかかるようになっていますが、これまでは親子で補正のかかり方が異なり、同一条件下で親子の受信強度の表示が大きく異なる場合がありました。<BR>
これを解消するため、親機の送信失敗の検知基準を緩め、親子の受信強度レベルの振る舞いが近くなるように変更しました。
</P>

<HR>
<H3><A name="note33-28" id="note33-28">Note 33-28: (WM) 送受信サイズの事前チェックを無効化するオプションの追加</A></H3>
<P>従来からWM_StartMP関数内部で行われていた各種の正当性判定(送受信サイズ設定値、送受信バッファサイズ、ならびに通信時間制限5600[us]の事前チェック)
を無視する特別なオプションを追加しました。
WM_StartMP関数を呼び出す前にWM_SetMPParameter関数でWMMPParam.ignoreSizePrecheckModeをTRUEに設定してください。<br>
この機能とWM_SetMPParentSize関数、WM_SetMPChildSize関数を組み合わせることにより、
子機の接続台数などの条件によって柔軟に送信サイズを変更することが可能になります。
ただしその場合には、通信所要時間と送受信バッファサイズの制限を超えないようアプリケーション側で気をつけるようにしてください。
受信バッファサイズの足りない設定で親機がMP通信を開始しようとした場合には実行時のチェックでそれを検出してMP通信は行われず、
その状態が続くとMPライフタイムによるタイムアウトが発生するため、通信は切断されます。</P>

<HR>
<H3><A name="note33-29" id="note33-29">Note 33-29: (WM) 無線通信のイベントカウンタに関する注意</A></H3>
<P>無線ハードウェア内の特定のアドレス空間のバッファにアクセスするといくつかのイベントカウンタがクリアされるという想定外の動作をすることが報告されました。<BR>
この動作により、ソフトウェアで管理しているイベントカウンタに累積されるカウントが実際に発生したイベントカウントに満たない場合があります。<BR>
WM_GetWirelessCounter 関数により取得可能なイベントカウントの内いくつかは正確な値でない可能性がありますので、ご注意下さい。<BR>
また、影響を受ける可能性のあるイベントカウンタについてはリファレンスマニュアルに追記しました。
</P>


<HR>
<H3><A name="KnownIssues_3_00_rc2" id="KnownIssues_3_00_rc2">SDK 3.0 RC2での既知の問題点</A></H3>
<P>
ありません。
</P>

<HR>
<H2 style="line-height: 0"><A name="sdk_3_00_rc" id="sdk_3_00_rc">■ NITRO-SDK Version 3.0 RC</A></H2>
<DIV style="text-align: right">
<P style="line-height: 0">(2005/11/07)</P>
</DIV>

<HR>
<H3><A name="note32-01" id="note32-01">Note 32-01: (CARD)  EEPROM デバイス操作の内部処理修正</A></H3>
<P>EEPROM デバイスをバックアップに使用している場合、工場出荷時に稀にハードウェア内部ステータスの初期値異常が生じることがあり、その対応処理を追加しました。
</P>

<HR>
<H3><A name="note32-02" id="note32-02">Note 32-02: (CARD) ROM アクセス後の抜け検出処理の追加</A></H3>
<P>CARD_ReadRom 関数および CARD_ReadRomAsync 関数で読み込み処理が完了した際に、毎回その場でカード抜け検出を行うよう処理を追加しました。<br>
これにより、抜け検出コールバック通知より先にアプリケーションが不正なデータを参照することは無くなりました。
</P>

<HR>
<H3><A name="note32-03" id="note32-03">Note 32-03: (CARD) 新規バックアップデバイスへの対応</A></H3>
<P>CARD ライブラリが 4Mb FLASH バックアップデバイスに対応し、CARD_BACKUP_TYPE_FLASH_2MBITS を CARDBackupType 列挙型に追加しました。<br>
<br>
関連して、リファレンスとサンプルデモも更新しました。
</P>

<HR>
<H3><A name="note32-04" id="note32-04">Note 32-04: (DevEnv) #pragma define_section のパラメータ修正</A></H3>
<P>#pragma define_section のパラメータを<br>
「 #pragma define_section DTCM ".dtcm",".dtcm",abs32,RWX 」<br>
のようにコンマで区切って誤った記述をしてしまっていたため<br>
「 #pragma define_section DTCM ".dtcm" abs32 RWX 」<br>
のようにスペースで区切るように修正しました。<br>
<br>
すでに上で挙げたような誤った記述方法をしている場合は、同じように修正してください。
</P>

<HR>
<H3><A name="note32-05" id="note32-05">Note 32-05: (DevEnv) ENV ライブラリ用リソースデータ変換ツールの追加</A></H3>
<P>XML 形式で書かれた ENV ライブラリ用リソースデータを C のソースファイル形式に変換するためのツール xml2env と<br>
INIT 形式で書かれた ENV ライブラリ用リソースデータを C のソースファイル形式に変換するためのツール init2env を追加しました。
</P>

<HR>
<H3><A name="note32-06" id="note32-06">Note 32-06: (DevEnv) NITRO-SDK パッケージ作成スクリプトの修正</A></H3>
<P>NITRO-SDK 3.0 PR 〜 3.0 PR4 パッケージでは、パッケージ作成時に使用するスクリプトに不備があり、 THUMB 版 ichneumon コンポーネントが正常に動作しないという問題がありました。<br>
これを修正しました。
</P>

<HR>
<H3><A name="note32-07" id="note32-07">Note 32-07: (DevEnv) SDK パッケージのビルドに使用した CodeWarrior のバージョンの変更</A></H3>
<P>SDK パッケージのビルドに使用した CodeWarrior のバージョンを 1.2SP1 に変更しました。<br>
また、$NitroSDK/include/nitro/version.h にビルドで使用した CodeWarrior コンパイラとリンカのビルド番号を記録するようにしました。
</P>

<HR>
<H3><A name="note32-08" id="note32-08">Note 32-08: (DevEnv) コンパイルターゲットに関するリファレンス追加</A></H3>
<P>コンパイルターゲットについての説明を関数リファレンスの関連情報に追加しました。
</P>

<HR>
<H3><A name="note32-09" id="note32-09">Note 32-09: (ENV) ENV ライブラリのリファレンス追加</A></H3>
<P>ENV ライブラリのリファレンスを追加しました。
</P>

<HR>
<H3><A name="note32-10" id="note32-10">Note 32-10: (ENV) ENV ライブラリの変更</A></H3>
<P>ENV_Init 関数の仕様を変更し、新たに ENV_AppendResourceSet 関数を追加しました。今までは ENV_Init 関数に ENVResource を引数として渡していましたが、今後は複数の ENVResource を登録できるようになりました。
</P>

<HR>
<H3><A name="note32-11" id="note32-11">Note 32-11: (GX) G3BS_LoadMtx43 関数の修正</A></H3>
<P>G3BS_LoadMtx43 関数内で使用している ASSERT の条件パラメータが間違っているという不具合があり、これを修正しました。
</P>

<HR>
<H3><A name="note32-12" id="note32-12">Note 32-12: (GX) Sub_Double3D サンプルデモの再修正</A></H3>
<P>$NitroSDK/build/demos/gx/UnitTours/Sub_Double3D サンプルデモに以下の修正を行いました。<br>
<br>
<a href="changelog.html#note29-02">Note 29-02</a> で行った修正内容が完全でなく、同様の症状が再現する場合があったため、これを再び修正し、SwapBuffers コマンドやジオメトリエンジンに関する
説明をコメントとして追加しました。
</P>

<HR>
<H3><A name="note32-13" id="note32-13">Note 32-13: (MATH) MATH_QSort 関数の不具合修正</A></H3>
<P>MATH_QSort 関数に不具合があり、ソート後に昇順もしくは降順に正しく並んでいない値が発生する可能性がありました。<br>
この不具合は修正されました。
</P>

<HR>
<H3><A name="note32-14" id="note32-14">Note 32-14: (OS) ARM7 専用WRAMアリーナの HI アドレス計算の修正</A></H3>
<P>ARM7 側で IRQ スタックサイズを 0又は負で指定していると WRAM 先頭位置を基準にして領域を決定しており、それを原因として ARM7 専用 WRAM アリーナの HI アドレス計算に誤りがありました。<br>
正しくは WRAM の先頭部分を占めるプログラム領域の末尾を基準にすべきでした。<br>
修正後は正しく計算されます。<br>
<br>
但し、従来の mongoose 及び ichneumon ではスタック領域指定を正の値で定義していますので、修正前でも後でも全く動作の違いはありません。<br>
<br>
通常のゲームアプリケーションでは SDK 付属の mongoose / ichneumon を使用しますので、この変更による影響はございません。
</P>

<HR>
<H3><A name="note32-15" id="note32-15">Note 32-15: (OS) OS_GetTotalOccupiedSize 関数の追加</A></H3>
<P>ヒープ中の使用メモリサイズを取得する OS_GetTotalOccupiedSize 関数を追加しました。<br>
これまでもあった OS_GetTotalAllocSize 関数は、使用されているメモリブロックのデータ領域のサイズを合計していましたが、今回追加された OS_GetTotalOccupiedSize 関数はメモリブロックのヘッダ部分のサイズも加算しています。
</P>

<HR>
<H3><A name="note32-16" id="note32-16">Note 32-16: (OS) OS_PutString 関数の修正</A></H3>
<P>FINALROM ビルド時、OS_PutString 関数は影響のないコードに置き換えられますが引数のデッドストリップが行なわれていませんでした。<br>
これを修正して、この関数は何も行なわず、引数のデッドストリップがなされるようにしました。
</P>

<HR>
<H3><A name="note32-17" id="note32-17">Note 32-17: (OS) SDK_COMPILER_ASSERT の追加</A></H3>
<P>コンパイル時に条件をチェックして、条件を満たされない場合はコンパイルエラーにするマクロ SDK_COMPILER_ASSERT を追加しました。
</P>

<HR>
<H3><A name="note32-18" id="note32-18">Note 32-18: (OS) Vブランク待ち関数の改良</A></H3>
<P>SVC_WaitVBlankIntr システムコールを用いて Vブランク割り込みを待つ場合に、この関数を呼び出したスレッドは休止状態にはならず、割り込み待ちの間は自身より低優先度のスレッドにリソースを開放しないという問題があります。<br>
システムコールの内容修正は困難ですので、スレッドを休止状態にして Vブランク割り込みを待つ OS_WaitVBlankIntr 関数を代用関数として用意しました。<br>
また、システムコールを呼び出す SVC_WaitVBlankIntr 関数を弱シンボルとし、別定義で上書きすることができるように修正しました。
</P>

<HR>
<H3><A name="note32-19" id="note32-19">Note 32-19: (OS) キャッシュ関数の引数 const 化</A></H3>
<P>DC および IC で始まるキャッシュ操作関数でメモリポインタを引数に取るものの中で、内部操作でその内容を変更しないものに関して const をつけるようにしました。<br>
<br>
変更となったのは以下の関数です。
<ul>
<li>DC_StoreRange
<li>DC_FlushRange
<li>DC_TouchRange
<li>DC_LockdownRange
<li>DC_CleanRange
<li>DC_CleanAndInvalidateRange
<li>IC_PrefetchRange
<li>IC_LockdownRange
</ul>
</P>

<HR>
<H3><A name="note32-20" id="note32-20">Note 32-20: (OS) スタック溢れチェック関数の修正</A></H3>
<P>スタック溢れのチェック用の関数で、スタックの途中にチェックコードを設定する OS_SetThreadStackWarningOffset 関数およびOS_SetIrqStackWarningOffset 関数において、引数が0の時にスタックの最下位アドレスに設定していたオーバーフロー用のチェックコードを上書きしていました。<br>
このためスタックチェックが正しく行なわれていませんでしたが、これを修正しました。
</P>

<HR>
<H3><A name="note32-21" id="note32-21">Note 32-21: (OS) 引数データバッファ切り換えのサポート</A></H3>
<P>ROM イメージに、ツールコマンド buryarg で引数データを埋め込み、プログラムから OS_GetArgv 関数や OS_GetOpt 関数等で取得出来る仕組みがありますが、この引数データバッファをランタイムに切り替えることが出来るようになりました。<br>
OS_SetArgumentBuffer 関数 / OS_GetArgumentBuffer 関数を参照してください。<br>
<br>
また、引数データバッファのデータを作成するために文字列から変換する OS_ConvertToArguments 関数を用意しました。
</P>

<HR>
<H3><A name="note32-22" id="note32-22">Note 32-22: (OS) 実時間とチック値の変換マクロの修正</A></H3>
<P>OS_SecondsToTicks 関数や OS_TicksToSeconds 関数などの実時間とチック値の変換マクロを修正しました。<br>
これまで、内部では符号付きの32ビット精度で演算をしていたため、少々大きめの引数を指定するとオーバーフローが発生し正しい値を返していませんでした。<br>
<br>
修正内容は以下の通りです。<br>
<br>
・これまでのマクロについて、内部演算は64ビットで行なうようにしました。<br>
<br>
・明示的に内部演算を32ビットで行いたい場合のために、
<ul>
<li>OS_SecondsToTicks32 関数
<li>OS_MilliSecondsToTicks32 関数
<li>OS_MicroSecondsToTicks32 関数
<li>OS_TicksToSeconds32 関数
<li>OS_TicksToMilliSeconds32 関数
<li>OS_TicksToMicroSeconds32 関数
</ul>
　を用意しました。
</P>

<HR>
<H3><A name="note32-23" id="note32-23">Note 32-23: (OS) 中国版起動画面の更新</A></H3>
<P>OS_InitChina 関数で表示される中国版起動画面が更新されました。
</P>

<HR>
<H3><A name="note32-24" id="note32-24">Note 32-24: (OS)　終了するスレッドを含むスレッドキュー操作の修正</A></H3>
<P>あるスレッドが、スレッドキューに登録されたままで OS_DestroyThread 関数や OS_KillThread 関数等で終了したときスレッドキューからスレッドの情報を取り去るようにしました。<br>
これは、OS_JoinThread 関数で別のスレッドの終了を待っているときに、あるスレッドが別のスレッドに終了させられた場合も含みます。<br>
<br>
これまでは削除されたスレッドの情報がスレッドキューに残っていたため OS_WakeupThread 関数でスレッドキュー内のスレッドを一気に実行可能状態にしようとしたときにすでに削除されたスレッドまでも対象になっており、スレッドリストの状態に不具合が生じる場合がありました。<br>
今回はこれが修正されました。
</P>

<HR>
<H3><A name="note32-25" id="note32-25">Note 32-25: (PRC) サンプルツール pdic2c.pl の修正</A></H3>
<P>PRC のデモと一緒に使用するサンプルツールである pdic2c.pl が出力するソースファイルが古い形式でしたので、これを修正しました。<br>
また、ヘッダファイルとソースファイルを別々のファイルに出力するオプションなども追加しました。
</P>

<HR>
<H3><A name="note32-26" id="note32-26">Note 32-26: (RTC) RTC の曜日情報取得の変更</A></H3>
<P>RTC から曜日情報を含んだデータを読む際には曜日は日付から計算して返すようにしました。<br>
これまでは RTC 内部で保持している値をそのまま返していましたが、RTC で表現できるもっとも遅い時刻である2099年12月31日23時59分の境界を跨いだ後、RTC の値を設定しなおすまでは間違った曜日情報を返していました。
</P>

<HR>
<H3><A name="note32-27" id="note32-27">Note 32-27: (SND) SND_CalcDecibel 関数に引数0を入れたとき適切な値を返さない問題を修正</A></H3>
<P>SND_CalcDecibel (及び SND_CalcDecibelSquare )関数で、引数に0を入れたとき、これまでは-723を返していましたが、-32768を返すように修正しました。<br>
<br>
これまでは、ボリュームモジュレーションを使ったときに、プレイヤーのボリュームを0にしても、音が聞こえてしまうことがありました。<br>
<br>
この問題は修正されました。
</P>

<HR>
<H3><A name="note32-28" id="note32-28">Note 32-28: (STD) STD ライブラリの追加</A></H3>
<P>文字列操作に関連した API 群を扱うライブラリとして、STD ライブラリを新設しました。<br>
STD ライブラリには以下の関数が含まれます。
<ul>
<li>STD_CopyString (STD_StrCpy)
<li>STD_CopyLString (STD_StrLCpy)
<li>STD_SearchString (STD_StrStr)
<li>STD_GetStringLength (STD_StrLen)
<li>STD_ConcatenateString (STD_StrCat)
<li>STD_CompareString (STD_StrCmp)
<li>STD_CompareNString (STD_StrNCmp)
<li>STD_CompareLString (STD_StrLCmp)
<li>STD_TSScanf
<li>STD_TVSScanf
</ul>
関数の右()内に書かれた STD_StrCpy 関数などは その左に書かれた STD_CopyString 関数などの別名として define されています。
</P>

<HR>
<H3><A name="note32-29" id="note32-29">Note 32-29: (WBT) GetBlock 要求通知の不具合修正</A></H3>
<P>本来は相手の WBT_GetBlock 関数完了時にのみ発生すべき WBT_CMD_REQ_GET_BLOCK_DONE システムコールバック通知が WBT_GetBlockInfo 関数でも同様に発生するという問題があり、これを発生させないよう修正しました。<br>
<br>
この通知を使用していないアプリケーションでは問題ありません。
</P>

<HR>
<H3><A name="note32-30" id="note32-30">Note 32-30: (WBT) WFS サンプルモジュールの修正</A></H3>
<P>$NitroSDK/build/demos/wireless_shared/wfs に収録されている WFS サンプルモジュールに対して以下の修正を行いました。
<ul>
<li>WFS_Init 関数を重複して呼び出した場合に割り込み禁止状態のまま関数からかえってしまう不具合があり、これを修正しました。
<li>従来は静的に常駐していた内部ワークメモリを WFS_Init 関数呼び出し時にアロケータから確保するよう変更しました。
<li>WFS を使用する各種サンプルデモで、ポート番号として SDK で予約されている WM_PORT_BT を使用していたためこれを修正しました。
</ul>
</P>

<HR>
<H3><A name="note32-31" id="note32-31">Note 32-31: (WM) WM テストツールの更新</A></H3>
<P>WMTestTool.srl が Scan 時に、同一親機のチャンネル情報が更新されるようになりました。
</P>

<HR>
<H3><A name="note32-32" id="note32-32">Note 32-32: (WM) WM_SetLifeTime 関数のリファレンス記述の修正</A></H3>
<P>WM_SetLifeTime 関数のリファレンスの記述に間違いがあり、これを修正しました。<br>
フレームライフタイムのデフォルト値は「ライフタイム無し」と記述していましたが、正しくは「ビーコン間隔×5回分の時間」です。
</P>

<HR>
<H3><A name="note32-33" id="note32-33">Note 32-33: (WM) mongoose コンポーネントの改良</A></H3>
<P>ARM7 側のコンポーネントとして mongoose を使用した場合に、WM ライブラリの状態遷移を行う非同期処理中に ARM9 のメインメモリへのアクセスが著しく阻害されるという問題がありますが、mongoose コンポーネントを改良することでこの問題を改善しました。<br>
問題は解決された訳ではなく改善されたに過ぎない、という点にご注意下さい。
</P>

<HR>
<H3><A name="note32-34" id="note32-34">Note 32-34: (WM) port 受信コールバックに通知する情報の追加</A></H3>
<P>WMPortRecvCallback に connectedAidBitmap フィールドを追加しました。現在接続中の AID のビットマップが格納されます。
</P>

<HR>
<H3><A name="note32-35" id="note32-35">Note 32-35: (WM) port 受信コールバックの初期化時の通知を追加</A></H3>
<P>WMStateCode に WM_STATECODE_PORT_INIT を追加し、WM_SetPortCallback 関数の呼び出し時に
このステートコードで port 受信コールバックを呼び出すように変更しました。
WMPortRecvCallback の myAid フィールドや connectedAidBitmap フィールドを使用した初期化処理を行うことを想定しています。<br>
接続通知の一貫性を保つため、WM_STATECODE_PORT_INIT でのコールバック呼び出しも割り込み禁止状態で行われますので注意してください。<br>
<br>
この変更により、<a href="#note32-38">Note 32-38<a> と同様に非互換が発生する可能性があります。
</P>

<HR>
<H3><A name="note32-36" id="note32-36">Note 32-36: (WM) テスト用 API の追加</A></H3>
<P>WM ライブラリに存在するテスト用 API が拡張されました。
これらのAPI はテスト目的の為に用いられますので、通常は使用する必要はありません。<br>
また、この拡張によって通常使用時のWMライブラリの動作が変わることはありません。<br>
但し、API の追加によって WMApiid 列挙型が拡張されておりますので、列挙の並び順に依存するプログラムには影響が出る可能性がありますのでご注意下さい。
</P>

<HR>
<H3><A name="note32-37" id="note32-37">Note 32-37: (WM) 子機が WM_EndMP 関数を呼ぶとワイヤレス通信機能が停止する不具合の修正</A></H3>
<P>親機が MP 通信を続けている最中に、子機が特定のタイミングで WM_EndMP 関数を呼び出すと、その後のワイヤレス通信機能が停止する不具合がありましたが、これを修正しました。<br>
SDK の 3.0 以降で発生する不具合です。<br>
ワイヤレス通信機能が停止すると、ワイヤレス通信関係の非同期関数の完了コールバックが呼び出されなくなります。<br>
fake_child を使用して、複数台の子機を接続した場合に不具合が発生することが分かっています。<br>
なお、親機から通信を終了するような処理になっている場合は、この不具合の影響を受けません。
</P>

<HR>
<H3><A name="note32-38" id="note32-38">Note 32-38: (WM) 自ら切断した場合の切断通知の追加</A></H3>
<P>これまでは、WM_DisconnectChildren 関数などの WM 関数を明示的に呼び出して接続を切断した場合は切断通知が発生しない仕様でしたが、
新規に WMStateCode に WM_STATECODE_DISCONNECTED_FROM_MYSELF を追加し、これで切断通知するように変更しました。<br>
<br>
この変更によりソースコードの非互換が発生する可能性があります。<br>
WMStartParentCallback, WMStartConnectCallback, WMPortRecvCallback の state フィールドに入る可能性のあるステートコードが増えていますので、
既知の WM_STATECODE_* 以外を受け取った場合はプログラムの実行を停止する、などの処理を行っている場合は注意が必要です。<br>
また、この通知を利用して DataSharing は親機から明示的に子機を切断しても停止しなくなりました。<br>
<br>
この対応にともなって、以下の関数を追加しました。
<ul>
<li>WM_GetAID 関数
<li>WM_GetConnectedAIDs 関数
</ul>
</P>

<HR>
<H3><A name="note32-39" id="note32-39">Note 32-39: (WM) 接続と切断に関する内部動作の再修正</A></H3>
<P><a href="changelog.html#note31-24">Note 31-24<a> および <a href="changelog.html#note30-07">Note 30-07<a> で公開された修正項目が完全な対応ではありませんでしたので、これを再度修正しました。
</P>

<HR>
<H3><A name="KnownIssues_3_00_rc" id="KnownIssues_3_00_rc">SDK 3.0 RCでの既知の問題点</A></H3>
<P>
<ul>
<li>本 SDK に含まれている ntexconv ( $NitroSDK/tools/bin/ntexconv.exe ) は、現在リリースされている TXLib パッケージ内の ntexconv に比べてバージョンが古くなっています。<BR>
SDK ではアイコンイメージ作成時にのみ ntexconv を使用しているので古いバージョンのままでも問題はありませんが、テクスチャ作成を目的として ntexconv を使用される場合は問題がありますので、最新の TXLib パッケージ内の ntexconv を使用して下さい。
</ul>
</P>

<HR>
<H2 style="line-height: 0"><A name="sdk_3_00_pr4" id="sdk_3_00_pr4">■ NITRO-SDK Version 3.0 PR4</A></H2>
<DIV style="text-align: right">
<P style="line-height: 0">(2005/09/08)</P>
</DIV>

<HR>
<H3><A name="note31-01" id="note31-01">Note 31-01: (CARD) CARD_CancelBackupAsync 関数の追加</A></H3>
<P>バックアップデバイスの非同期処理を中断するための関数として CARD_CancelBackupAsync 関数を追加しました。<br>
また、この関数で中断された処理の結果値として CARDResult 列挙値に CARD_RESULT_CANCELED を追加しました。
</P>

<HR>
<H3><A name="note31-02" id="note31-02">Note 31-02: (CARD) FRAM デバイス操作の内部処理修正</A></H3>
<P>FRAM デバイスをバックアップに使用している場合、本体起動時に稀にハードウェア内部ステータスの不整合が生じることがあり、その対応処理を追加しました。
</P>

<HR>
<H3><A name="note31-03" id="note31-03">Note 31-03: (CARD) エラーコード CARD_RESULT_NO_RESPONSE の追加</A></H3>
<P>バックアップ操作関数の結果値として、CARDResult 列挙型に CARD_RESULT_NO_RESPONSE を追加しました。<br>
これは CARD_RESULT_TIMEOUT から細分化されたエラー値で、カードの接触不良とおぼしき場合に返されます。
</P>

<HR>
<H3><A name="note31-04" id="note31-04">Note 31-04: (DevEnv) lsf ファイルにおけるオーバーレイグループのサポート</A></H3>
<P>オーバーレイグループをサポートしました。<br>
リンカは同一グループに属するオーバーレイが、同じメモリ領域上に配置されていると仮定します。<br>
互いに排他的なオーバーレイモジュールを同一のグループに指定しておくことで、そのオーバーレイ間の関数呼び出しをリンク時にエラーとして検出できます。<br>
<br>
互換性保持のため、オーバーレイグループ省略時には現セクション名と同じ名のグループが設定されます。
</P>

<HR>
<H3><A name="note31-05" id="note31-05">Note 31-05: (DevEnv) makelcf における特定のセクション名での不具合の修正</A></H3>
<P>lsf ファイルにおけるセクションの記述において main と main_bss というように"存在するセクション名" + "_bss" というセクションが存在すると問題が起きる場合がありました。<br>
"_bss" の他にも "_DATA", "_BSS" など幾つかの文字列で同様の問題が起きました。<br>
これは lcf.template ファイルの問題です。<br>
$NitroSDK/include/nitro/specfiles 以下の *.lcf.template ファイルを修正しました。<br>
<br>
これにより前のバージョンまで存在していたオーバーレイに関する幾つかのシンボル情報を直接参照することが出来なくなりました。<br>
これにより、シンボルを直接参照しているアプリケーションに不都合が起こる可能性があるため、当面の間、古いバージョンの *.lcf.template を $NitroSDK/include/nitro/specfiles/2.x に収録します。<br>
必要に応じて、これを $NitroSDK/include/nitro/specfiles へ上書きコピーしてください。<br>
(make でビルドを行なう場合は変数 LCFILE_TEMPLATE で指定してください) <br>
<br>
オーバーレイに関する情報を取得する場合、オーバーレイID をインデックス値としてオーバーレイテーブルを参照するのが公式な方法ですので、よろしくお願いします。
</P>

<HR>
<H3><A name="note31-06" id="note31-06">Note 31-06: (DevEnv) makelcf の修正</A></H3>
<P>DTCM にオーバーレイを配置すると、メインメモリ領域のアリーナの設定に不具合が起こっていましたが、これを修正しました。<br>
ITCM のオーバーレイを行なった際のITCMアリーナ設定も正しく修正しました。<br>
またこれまで出来なかった拡張メインメモリ領域のオーバーレイにも対応しました。
</P>

<HR>
<H3><A name="note31-07" id="note31-07">Note 31-07: (DevEnv) ツールコマンド loadrun, nitrorun の追加</A></H3>
<P>loadrun はバイナリデータを IS-NITRO-EMULATOR にダウンロードし、実行するためのコマンドです。<br>
動作時間や OS_Exit 関数の呼び出しなどで終了することが出来ます。<br>
<br>
nitrorun は引数データをバイナリに埋め込む buryarg コマンドと loadrun コマンドを一度に呼び出すためのスクリプトです。<br>
コマンドラインから引数を与える感覚でバイナリの実行が可能となります。
</P>

<HR>
<H3><A name="note31-08" id="note31-08">Note 31-08: (ENV) 環境リソースライブラリ libenv*.a の追加</A></H3>
<P>リソース名からそのリソースに対応する値を取得する ENV ライブラリを追加しました。<br>
これは動作環境のパラメータをプログラムに与えるのに用いられ、再コンパイルは必要ですが、パラメータを容易に書き換えたり複数のプログラムで共通の環境を設定するのに便利なライブラリとなっています。
</P>

<HR>
<H3><A name="note31-09" id="note31-09">Note 31-09: (FS) FS_EndOverlay関数の修正</A></H3>
<P><a href="changelog.html#note28-03">Note 28-03<a>での動作変更にともない、オーバーレイのアンロード時にオーバーレイ上にあるグローバルなオブジェクト配列のデストラクタが正しく起動しないという不具合があり、これを修正しました。
</P>

<HR>
<H3><A name="note31-10" id="note31-10">Note 31-10: (FS) ドキュメントの修正</A></H3>
<P>以下のFSライブラリ解説ドキュメントにおいていくつかの誤記を修正しました。
<ul>
<li>$NitroSDK/docs/TechnicalNotes/AboutFileSystem.pdf
</ul>
</P>

<HR>
<H3><A name="note31-11" id="note31-11">Note 31-11: (FX) FX_FX64C_TO_F32 マクロの修正</A></H3>
<P>fx64c 型から f32 型への変換を行なうマクロ FX_FX64C_TO_F32 に不具合があり、正確な値を返していませんでした。<br>
これを修正しました。
</P>

<HR>
<H3><A name="note31-12" id="note31-12">Note 31-12: (FX) FX_InvSqrt 関数の不具合修正</A></H3>
<P>FX_InvSqrt 関数に与える引数が一定値を超えると正しく計算されないという不具合がありましたが、これを修正しました。
</P>

<HR>
<H3><A name="note31-13" id="note31-13">Note 31-13: (MB) MB_GetMultiBootDownloadParameter 関数の追加</A></H3>
<P><a href="changelog.html#note27-22">Note 27-22</a>で追加した機能に関連し、ダウンロード時のユーザ定義拡張パラメータを参照する MB_GetMultiBootDownloadParameter 関数を追加しました。
</P>

<HR>
<H3><A name="note31-14" id="note31-14">Note 31-14: (NVRAM) NVRAM からデータを読み出す際のエラー判定に関する不具合の修正</A></H3>
<P>NVRAM からデータを読み出す際、読み出し先のバッファのアドレスが 0x02400000 を越えると読み出しに失敗するという不具合が発見されました。<br>
この不具合を修正しました。
</P>

<HR>
<H3><A name="note31-15" id="note31-15">Note 31-15: (OS) ARM7 側のデバッグ出力関数のリファレンス追加</A></H3>
<P>従来から存在した ARM7 側のデバッグ出力に使用する OS_InitPrintServer 関数および OS_PrintServer 関数のリファレンスを追加し、アプリケーションで特に使う必要がない旨も記述しました。
</P>

<HR>
<H3><A name="note31-16" id="note31-16">Note 31-16: (OS) DTCM アリーナの上位アドレス不具合の修正</A></H3>
<P>DTCM アリーナの上位アドレスを決定する個所に不具合がありました。<br>
rsf ファイルでスタックサイズの指定に負の値を指定したときに生じていました。<br>
これを修正しました。
</P>

<HR>
<H3><A name="note31-17" id="note31-17">Note 31-17: (OS) NitroStaticInit 関数のリファレンス追加</A></H3>
<P><a href="changelog.html#note27-31">Note 27-31</a>の追加にあわせ、NitroStaticInit 関数の説明を関数リファレンスに追加しました。
</P>

<HR>
<H3><A name="note31-18" id="note31-18">Note 31-18: (OS) OSThread 関連の関数の引数 const 型の整理</A></H3>
<P>OSThread 関連の関数で、引数に OSThread* 型のものを取るものについてその引数を const OSThread* として定義したほうがよいと判断したものについてそのように修正しました。<br>
<br>
修正したのは以下の関数です。
<ul>
<li>OS_IsThreadTerminated 関数
<li>OS_CheckStack 関数
<li>OS_GetThreadPriority 関数
<li>OS_GetThreadDestructor 関数
<li>OS_GetThreadParameter 関数
<li>OS_GetStackStatus 関数
<li>OS_DumpThreadCallTrace 関数
</ul>
</P>

<HR>
<H3><A name="note31-19" id="note31-19">Note 31-19: (OS) OS_GetOpt 関数の追加</A></H3>
<P>ツールコマンド buryarg で埋め込んだ srl 等バイナリの引数データの中から、'-'で始まる文字列をプログラムに対する実行オプションとして取得するのに便利な OS_GetOpt 関数を追加しました。<br>
実行時には、パラメータはオプションの後に来るようにしてください。<br>
またサンプルデモの $NitroSDK/build/demos/os/argument-1 に OS_GetOpt 関数を使用するコードを追加しました。
</P>

<HR>
<H3><A name="note31-20" id="note31-20">Note 31-20: (SND) キャッシュ無効化処理の最適化</A></H3>
<P>サウンドライブラリ内から DC_InvalidateRange 関数を呼びだしている箇所で、指定している範囲が必要以上に広かったため、適切なサイズになるように修正しました。<br>
この修正により、サウンド処理の負荷が軽減されます。
</P>

<HR>
<H3><A name="note31-21" id="note31-21">Note 31-21: (WM) MP 通信時の切断検知処理の不具合修正</A></H3>
<P>MP通信時に、通信相手の電源が切れるなどして存在しなくなった場合にはタイムアウトにより通信の切断が通知されますが、タイムアウト時の処理に不具合があり、切断通知が発生しない場合がありました。この不具合を修正しました。
</P>

<HR>
<H3><A name="note31-22" id="note31-22">Note 31-22: (WM) SSID マッチング長指定可能なスキャン種類の追加</A></H3>
<P>WM_StartScanEx 関数で行う SSID の一致確認を特定の長さに限定したいという特殊な用途に対応するために、WMScanExParam.scanType に WM_SCANTYPE_ACTIVE_CUSTOM と WM_SCANTYPE_PASSIVE_CUSTOM を追加しました。<br>
この scanType を使用すると WMScanExParam.ssidMatchLength で指定した長さまでしか SSID の一致確認を取らなくなります。<br>
これに伴い、WMScanExParam 構造体が変更されています。
</P>

<HR>
<H3><A name="note31-23" id="note31-23">Note 31-23: (WM) インフラストラクチャモードにおけるスキャンの SSID マッチング長の修正</A></H3>
<P>インフラストラクチャモード時に WM_StartScanEx 関数で SSID を指定してスキャンした場合、先頭の8バイトしか一致確認を取っていないという不具合がありました。<br>
これを WMScanExParam.ssidLength で指定した長さで一致確認を取るように修正しました。
</P>

<HR>
<H3><A name="note31-24" id="note31-24">Note 31-24: (WM) 子機接続に関する内部処理の修正</A></H3>
<P>通信状態の非常に悪い環境で子機から繰り返し再接続を受ける状況において親機の内部状態が異常になるという不具合があり、これを修正しました。
</P>

<HR>
<H3><A name="note31-25" id="note31-25">Note 31-25: (WM) 接続失敗時の原因をより詳細にするインターフェースの追加</A></H3>
<P>WM_StartConnect[Ex] 関数を用いて接続を試みた結果失敗した場合に、失敗理由を類推する助けとなる通信相手の状態コードをコールバック関数にて通知する機能を追加しました。<br>
具体的には WMStartConnectCallback 構造体に wlStatus メンバを追加しました。<br>
なお、通常の使用時にはアプリケーションから特に参照して頂く必要はありません。
</P>

<HR>
<H3><A name="KnownIssues_3_00_pr4" id="KnownIssues_3_00_pr4">SDK 3.0 PR4での既知の問題点</A></H3>
<P>
<ul>
<li>C標準関数互換のライブラリとして、STDライブラリがテスト公開されています。<br>
現在は一部の関数のみ使用可能ですが、リファレンスは収録されておりません。
</ul>
</P>

<HR>
<H2 style="line-height: 0"><A name="sdk_3_00_pr3" id="sdk_3_00_pr3">■ NITRO-SDK Version 3.0 PR3</A></H2>
<DIV style="text-align: right">
<P style="line-height: 0">(2005/08/10)</P>
</DIV>

<HR>
<H3><A name="note30-01" id="note30-01">Note 30-01: (CARD) CARD_CheckPulledOut 関数のリファレンス修正</A></H3>
<P>CARD_CheckPulledOut 関数のリファレンスにて、この関数を呼び出す前に CARD_LockRom 関数を呼び出して CARD-ROM のバスをロックしておく必要がある旨を追記しました。
</P>

<HR>
<H3><A name="note30-02" id="note30-02">Note 30-02: (CARD) CARD_IdentifyBackup 関数の引数制限</A></H3>
<P>CARD_IdentifyBackup 関数に与えるデバイス種別で CARD_BACKUP_TYPE_NOT_USE を指定出来ないよう制限を追加しました。<br>
この変更は 3.0PR で入っていましたが、changelog から漏れていました。
</P>

<HR>
<H3><A name="note30-03" id="note30-03">Note 30-03: (MB) サンプルデモの修正</A></H3>
<P>$NitroSDK/build/demos/mb/cloneboot サンプルに以下の修正を行いました。<br>
<ul>
<li>親機側が ConnectMain 関数に失敗した場合に WH モジュールを終了せず再試行してしまう不具合があり、これを修正しました。
</ul>
</P>

<HR>
<H3><A name="note30-04" id="note30-04">Note 30-04: (OS) OS_SetThreadDestructorStack 関数の追加</A></H3>
<P>スレッドデストラクタが実行される際のスタックを指定する OS_SetThreadDestructorStack 関数を追加しました。<br>
特に指定がない場合は、スタックポインタは自らのスレッドを破棄する場合はそのままで、他のスレッドに破棄された場合はスタックの最上位に変更されます。
</P>

<HR>
<H3><A name="note30-05" id="note30-05">Note 30-05: (OS) OS_Sleep 関数で用いるアラームのキャンセル処理</A></H3>
<P>OS_Sleep 関数で休止状態になっているスレッドが他のスレッドから破棄された場合、OS_Sleep 関数で用いているアラームを破棄するように
しました。<br>
これまではアラームが破棄されなかったため、すでに不要となったアラームハンドラが呼ばれたり、アラームリストが上書きされてしまうことがありました。
</P>

<HR>
<H3><A name="note30-06" id="note30-06">Note 30-06: (WM) 子機側の過負荷時の処理の変更</A></H3>
<P><a href="changelog.html#note29-08">Note 29-08</a>と関係して、内部処理の都合により子機側の過負荷時の処理を変更しました。<br>
これまでは、子機側の ARM7 が過負荷になり、送信データの設定が間に合わなかった場合には Null 応答が出ていましたが、その代わりに応答をまったく返さないように変更しました。<br>
この副作用として、子機側は過負荷時には受信処理が飛ばされるようになり、通信効率が若干落ちますが、負荷は低減されます。
</P>

<HR>
<H3><A name="note30-07" id="note30-07">Note 30-07: (WM) 切断時の内部動作の変更</A></H3>
<P><a href="changelog-oldver.html#note25-22">Note 25-22</a>により、切断時には切断通知を出せる電波状態になるまで待つように変更していましたが、これを一定の時間でタイムアウトするように変更しました。<br>
これにより WMTestTool.srl を用いて Noise Rate を 100% にした場合に終了しなくなっていた件が改善されます。
</P>

<HR>
<H3><A name="KnownIssues_3_00_pr3" id="KnownIssues_3_00_pr3">SDK 3.0 PR3での既知の問題点</A></H3>
<P>　ありません。</P>

<HR>
<H2 style="line-height: 0"><A name="sdk_3_00_pr2" id="sdk_3_00_pr2">■ NITRO-SDK Version 3.0 PR2</A></H2>
<DIV style="text-align: right">
<P style="line-height: 0">(2005/08/04)</P>
</DIV>

<HR>
<H3><A name="note29-01" id="note29-01">Note 29-01: (DevEnv) ISD_NITRO_DEBUGGER のパス修正</A></H3>
<P>$NitroSDK/build/buildtools/commondefs.emtype.ISD で定義される ISD_NITRO_DEBUGGER が指すパスの位置を修正しました。
</P>

<HR>
<H3><A name="note29-02" id="note29-02">Note 29-02: (GX) Sub_Double3D サンプルデモの再修正</A></H3>
<P>$NitroSDK/build/demos/gx/UnitTours/Sub_Double3D サンプルデモに以下の修正を行いました。<br>
<br>
<a href="changelog.html#note27-15">Note 27-15</a>で行った修正内容が完全でなく、同様の症状が再現する場合があったため、これを再び修正しました。
</P>

<HR>
<H3><A name="note29-03" id="note29-03">Note 29-03: (GX) ディスプレイリストの状態取得関数の引数へ const 修飾子を追加</A></H3>
<P>以下の関数で引数では渡されたポインタの内容を書き換えていませんが、引数に const 修飾子が付いていませんでしたので、これを追加しました。<br>
<UL>
<LI>G3_GetDLStart 関数</LI>
<LI>G3_GetDLLength 関数</LI>
<LI>G3_GetDLSize 関数</LI>
</UL>
</P>

<HR>
<H3><A name="note29-04" id="note29-04">Note 29-04: (OS) OS_GetLowEntropyData 関数の追加</A></H3>
<P>実行毎にシステム状態から異なるデータを生成して返すOS_GetLowEntropyData 関数を追加しました。<br>
また、デモとして $NitroSDK/build/demos/os/entropy-1 を追加しました。
</P>

<HR>
<H3><A name="note29-05" id="note29-05">Note 29-05: (PM) LCD オフ状態からスリープモードに移行したあとの復帰処理の修正</A></H3>
<P>LCD オフの状態からスリープモードに移行して復帰すると、GX ライブラリの内部状態と実際の状態に不整合が生じるという不具合がありました。これを修正しました。<br>
(参照：<A href="changelog-oldver.html#note22-23">Note 22-23 (PM) LCDオフ状態からスリープモードに移行したあとの復帰処理の変更</A>)
</P>

<HR>
<H3><A name="note29-06" id="note29-06">Note 29-06: (WM) WM_SetIndCallback 関数のコールバックへの通知の追加</A></H3>
<P>WM_SetIndCallback 関数のコールバックに通知されるものに WM_STATECODE_INFORMATION を追加しました。これは、内部で発生した事象の情報を通知するためのものです。<br>
コールバック引数の WMIndCallback.reason で通知内容を表します。reason の値としては、WM_StartMPEx 関数の ignoreFatalError を TRUE にし、かつ fatal error が発生した場合に通知される WM_INFOCODE_FATAL_ERROR が定義されています。
</P>

<HR>
<H3><A name="note29-07" id="note29-07">Note 29-07: (WM) WM_SetPowerSaveMode 関数の追加</A></H3>
<P>インフラストラクチャ通信時に省電力モードを切り替える WM_SetPowerSaveMode 関数を追加しました。
</P>

<HR>
<H3><A name="note29-08" id="note29-08">Note 29-08: (WM) ignoreFatalError 設定時の復帰不具合の修正</A></H3>
<P>WM_StartMPEx 関数の ignoreFatalError 引数を TRUE にしていた場合、子機側で fatal error が発生しても自動切断されなくなりますが、ここの処理に不具合があり、以降の通信ができなくなっていました。<br>
これを修正しました。
</P>

<HR>
<H3><A name="note29-09" id="note29-09">Note 29-09: (WM) 子機側の受信処理の変更</A></H3>
<P>これまで、子機は自分宛でない MP フレームを受信した場合、WM_StartMP 関数に state が WM_STATECODE_MP_IND で errcode が WM_ERRCODE_INVALID_POLLBITMAP の通知が来ていましたが、これを全く何の通知も出さないように変更しました。<br>
また、MP ACK フレームでの WM_STATECODE_MPACK_IND の通知も同様に変更しました。<br>
なお、port を利用した送受信はこの変更による影響を受けません。
</P>

<HR>
<H3><A name="note29-10" id="note29-10">Note 29-10: (WVR) thumb ビルド版 ichneumon コンポーネントの不具合修正</A></H3>
<P>thumb ビルド版の ichneumon コンポーネントを使用するとプログラムが動作しないという問題が確認されていましたが、これを修正しました。
</P>

<HR>
<H3><A name="KnownIssues_3_00_pr2" id="KnownIssues_3_00_pr2">SDK 3.0 PR2での既知の問題点</A></H3>
<P>　ありません。</P>

<HR>
<H2 style="line-height: 0"><A name="sdk_3_00_pr" id="sdk_3_00_pr">■ NITRO-SDK Version 3.0 PR</A></H2>
<DIV style="text-align: right">
<P style="line-height: 0">(2005/07/22)</P>
</DIV>

<HR>
<H3><A name="note28-01" id="note28-01">Note 28-01: (Cht) ピクトキャッチ用デモの追加</A></H3>
<P>ピクトキャッチ処理を行うサンプルデモを $NitroSDK/build/demos/cht/catch-min に追加しました。<br>
このサンプルデモは、必要最小限の機能しか実装していないので、従来からあるピクトキャッチのサンプルデモよりもコードサイズが小さくなっています。
</P>

<HR>
<H3><A name="note28-02" id="note28-02">Note 28-02: (DevEnv) nitro.h のプリコンパイルヘッダ対応</A></H3>
<P>$NitroSDK/include/nitro.h に対するプリコンパイルヘッダに対応するようになりました。<br>
ビルドシステムはビルドに先立ち $NitroSDK/include/nitro.h をプリコンパイルし、その結果をファイルのビルド時に読み込みます。<br>
これによりビルドの高速化が期待できます。<br>
もし、このコンパイルを一時的に抑制したい場合は、NITRO_NO_STD_PCHDR に値を設定してください。
</P>

<HR>
<H3><A name="note28-03" id="note28-03">Note 28-03: (FS) オーバーレイ関数の動作変更</A></H3>
<P>アンロードされるオーバーレイ上に配置されたデストラクタを必要とするグローバルオブジェクトが存在している場合に、従来はこれらに対して自動的にデストラクタを呼び出していましたが、これを呼び出さないように動作を変更しました。
</P>

<HR>
<H3><A name="note28-04" id="note28-04">Note 28-04: (GX) サンプルデモの修正</A></H3>
<P>$NitroSDK/build/demos/gx/UnitTours/2D_Oam_256_16 サンプルデモ内部の十字キー操作において、FINALROM で十字キーの操作ができないバグがありました。<br>
この問題を修正しました。
</P>

<HR>
<H3><A name="note28-05" id="note28-05">Note 28-05: (MATH) MD5 関数の高速化</A></H3>
<P>MD5 関数の実装を差し替えました。<br>
コードサイズは約半分になり、以前の実装から2割程度の速度が向上しています。<br>
インターフェイスの変更はありません。<br>
この変更は 2.2PR で入っていましたが、changelog から漏れていました。
</P>

<HR>
<H3><A name="note28-06" id="note28-06">Note 28-06: (OS) IRQ スタックのスタック溢れチェック機構の追加</A></H3>
<P>IRQ モードでのスタックに、スレッドのスタックと同様のスタック溢れチェック機構を追加しました。<br>
これはスタックの最上位、最下位(と、必要ならばその間)にチェックコードを書き込んでおき、そこが書き換えられたかによって、スタックがその位置まで到達したかどうかを調べる、というものです。<br>
<br>
このために追加された関数は以下の通りです。
<ul>
<li>OS_SetIrqStackChecker
<li>OS_SetIrqStackWarningOffset
<li>OS_CheckIrqStack
<li>OS_GetIrqStackStatus
</ul>
</P>

<HR>
<H3><A name="note28-07" id="note28-07">Note 28-07: (OS) OS_GetArgc 関数および OS_GetArgv 関数による引数のサポート</A></H3>
<P>ROMファイルに引数データを与え、プログラムから取得する機構を用意しました。<br>
$(NitroSDK)/tools/bin/buryarg のツールで引数データを埋め込み、OS_GetArgc 関数と OS_GetArgv 関数でそのデータをプログラムから利用することが出来ます。
これを利用すれば、コンパイルすることなくプログラムの実行条件を変更することが可能です。<br>
また、この機能を使用したサンプルデモを $NitroSDK/build/demos/os/argument-1 として追加しました。<br>
<br>
この機能はデバッグ用途として用意されており、FINALROMビルド時には無効化されます。 
</P>

<HR>
<H3><A name="note28-08" id="note28-08">Note 28-08: (OS) OS_KillThread 関数と OS_KillThreadWithPriority 関数の追加</A></H3>
<P>他のスレッドを終了させる関数として OS_KillThread 関数と OS_KillThreadWithPriority 関数を追加しました。終了時にスレッド優先度を設定するかしないかでいずれかを使い分けることが出来ます。<br>
OS_KillThread 関数と OS_DestroyThread 関数との違いは、終了するスレッドのスレッドデストラクタが呼ばれるかどうかという点です。<br>
<br>
これら２つの関数を比較するサンプルデモを $NitroSDK/build/demos/os/thread-9 に追加しました。
</P>

<HR>
<H3><A name="note28-09" id="note28-09">Note 28-09: (OS) スレッドデストラクタの実装</A></H3>
<P>スレッドが終了する際に予め設定した関数を呼ばせる、スレッドデストラクタの機能を実装しました。<br>
設定は OS_SetThreadDestructor 関数となります。<br>
<br>
スレッドデストラクタが呼ばれるのは以下の場合です。
<ul>
<li>スレッドのタスクを最後まで実行し終わった
<li>OS_ExitThread 関数で終了した
<li>OS_KillThread* 関数で他のスレッドから終了させられた
<li>OS_KillThread* 関数で自らのスレッドを終了させた
</ul>
以下の場合はスレッドデストラクタは呼ばれません。
<ul>
<li>OS_DestroyThread 関数で他のスレッドから終了させられた
<li>OS_DestroyThread 関数で自らのスレッドを終了させた
</ul>
スレッドデストラクタのサンプルデモを $NitroSDK/build/demos/os/thread-7 に追加しました。
</P>

<HR>
<H3><A name="note28-10" id="note28-10">Note 28-10: (OS) スレッド構造体へのユーザパラメータ追加</A></H3>
<P>スレッド構造体 OSThread にユーザパラメータメンバを追加しました。<br>
この領域はシステムで参照することも変更することもありません。<br>
アプリケーションごとに自由な用途に使用することが出来ます。<br>
設定と取得は以下の関数で行ないます。
<ul>
<li>OS_SetThreadParameter
<li>OS_GetThreadParameter
</ul>
</P>


<HR>
<H3><A name="note28-11" id="note28-11">Note 28-11: (OS) スレッド最大数の制限を撤廃</A></H3>
<P>これまで OS で同時に扱えるスレッドの最大個数は16個(通常16個で、ヘッダ内定義の書き換えによって8〜32個が可能)
でしたが、この最大数制限を撤廃しました。<br>
スレッドに関する API はこれまでと変わりません。<br>
<br>
この変更に関して、スレッドを大量に作成する２つのサンプルデモを $NitroSDK/build/demos/os/thread-8 と $NitroSDK/build/demos/os/thread-10 に追加しました。
</P>

<HR>
<H3><A name="KnownIssues_3_00_pr" id="KnownIssues_3_00_pr">SDK 3.0 PRでの既知の問題点</A></H3>
<P>　ありません。</P>

<HR>
<H2 style="line-height: 0"><A name="sdk_2_02_pr" id="sdk_2_02_pr">■ NITRO-SDK Version 2.2 PR</A></H2>
<DIV style="text-align: right">
<P style="line-height: 0">(2005/07/15)</P>
</DIV>

<HR>
<H3><A name="note27-01" id="note27-01">Note 27-01: (CARD) CARD_CheckPulledOut 関数の追加</A></H3>
<P>ARM7 が定期的に行うカード抜け検出処理の結果通知を待たず ARM9 から直接判定を行う関数として CARD_CheckPulledOut 関数を追加しました。<br>
特にカードアクセスをしていない通常の場面では必要ありませんが、カード抜けを遅延無く確実に判定する必要がある場面においては CARD_IsPulledOut 関数のかわりにこちらを使用することができます。
</P>

<HR>
<H3><A name="note27-02" id="note27-02">Note 27-02: (CARD) 新規バックアップデバイスへの対応</A></H3>
<P>CARD ライブラリが 512kb EEPROM および 256kb FRAM バックアップデバイスに対応し、CARD_BACKUP_TYPE_EEPROM_512KBITS と CARD_BACKUP_TYPE_FRAM_256KBITS を CARDBackupType 列挙型に追加しました。
</P>

<HR>
<H3><A name="note27-03" id="note27-03">Note 27-03: (CTRDG) カートリッジ情報取得時のキャッシュ操作の修正</A></H3>
<P>CTRDG_Init 関数実行時の、カートリッジ情報領域を読む際のキャッシュ操作を修正しました。<br>
これまでメーカーコードやゲームコードといったカートリッジ情報を取得する際に誤った値を返すことがありましたが、修正されました。
</P>

<HR>
<H3><A name="note27-04" id="note27-04">Note 27-04: (DevEnv) bin2obj ツールの追加</A></H3>
<P>バイナリファイルをオブジェクトファイルに変換するためのツール bin2obj を追加しました。<br>
これは CodeWarrior for NINTENDO DS パッケージ内の BinToElf ツールと同じ働きをするものですので、どちらを使用しても問題ありません。
</P>

<HR>
<H3><A name="note27-05" id="note27-05">Note 27-05: (DevEnv) CYGWIN の cygdrive prefix が /cygdrive ではない場合のサポート</A></H3>
<P>CYGWIN のコマンドラインからビルドを行なう場合において、cygdrive prefix がデフォルトの設定である /cygdrive でない場合にビルドが失敗していました。<br>
これを修正し cygdrive prefix が変更されている場合にもビルドが出来るようにしました。
</P>

<HR>
<H3><A name="note27-06" id="note27-06">Note 27-06: (DevEnv) LCF テンプレートの修正</A></H3>
<P>$NitroSDK/include/nitro/specfiles/ARM9-TS-cloneboot-C.lcf.template の LCF テンプレートを使用するプログラムでは .sinit セクションがリンクされず static initializer の機能が使用できませんでしたが、これを修正しました。
</P>

<HR>
<H3><A name="note27-07" id="note27-07">Note 27-07: (DevEnv) rsf の StackSize 指定の不具合修正</A></H3>
<P>rsf(リンカスペックファイル)にて指定する StackSize で、第1パラメータに負数を指定すると指定可能な最大サイズからパラメータ値の絶対値を引いたものとなるという仕様が有効ではありませんでした。<br>
これを修正しました。
</P>

<HR>
<H3><A name="note27-08" id="note27-08">Note 27-08: (DevEnv) TS_VERSION のデフォルト値の変更</A></H3>
<P>PMIC のバージョンを示す SDK_TS_VERSION 定数のデフォルト値を 100 から 200 に変更しました。<br>
SDK_TS_VERSION = 200 は、IS-NITRO-EMULATOR ハードウェア Ver.E 以上、ニンテンドーDS 製品 に搭載されております PMIC のバージョンに相当します。<br>
この変更により NITRO-SDK にて提供しております機能の内部動作が変わることはありませんが、この定数をビルドスイッチとして動作を変更するアプリケーション(マイクを使用するサンプルデモなど) には影響が生じますのでご注意下さい。<br>
なお、環境変数として NITRO_TS_VERSION を指定すると SDK_TS_VERSION はデフォルト値ではなく指定した値となります。<br>
<br>
また、NITRO-SDK では TS_VERSION 毎に os 及び spi ライブラリが用意されています。<br>
これは TS ブレッドボードなどを用いた開発環境においてオーナー情報のセーブフォーマットが古い場合に意味を持ちますが、セーブフォーマットが発売実機と同等の場合には全く同じライブラリとなります。<br>
make システムを使用した場合には環境変数により自動的にリンクするライブラリが選択されますが、IDE を使用する開発環境では手動でリンクするライブラリを選択して頂く必要があります。<br>
但し TS ブレッドボードなどを用いた開発環境を使用する場合を除いてはライブラリを選択する意味がありませんので、デフォルトでリンクされるライブラリを用いることに問題はありません。
</P>

<HR>
<H3><A name="note27-09" id="note27-09">Note 27-09: (DevEnv) #include のサーチパスの変更</A></H3>
<P>Makefile を用いたビルドを行う際の #include のサーチパスに #include を呼び出したファイルのあるディレクトリも含めるように変更しました。<br>
従来どおりのサーチパスである必要がある場合は、Makefile 中で<br>
MACRO_FLAGS += -cwd proj<br>
という指定を入れるようにしてください。
</P>

<HR>
<H3><A name="note27-10" id="note27-10">Note 27-10: (FS) FS_CreateFileFromMemory 関数および FS_CreateFileFromRom 関数の追加</A></H3>
<P>メモリ領域やCARDの特定の領域を一時的なファイルとみなして開く関数として、FS_CreateFileFromMemory 関数および FS_CreateFileFromRom 関数を追加しました。<br>
また、これらの動作を示すサンプルとして $NitroSDK/build/demos/fs/file-3 サンプルデモを追加しました。
</P>

<HR>
<H3><A name="note27-11" id="note27-11">Note 27-11: (FS) FS_End 関数の追加</A></H3>
<P>FS ライブラリを初期化前の状態に戻す関数として FS_End 関数を追加しました。
</P>

<HR>
<H3><A name="note27-12" id="note27-12">Note 27-12: (FS) FS_WaitAsync 関数の不具合修正</A></H3>
<P>非同期コマンドがまだアーカイブに処理されていない状態のファイルハンドルに対して FS_WaitAsync 関数を呼び出した場合にアーカイブの処理が停止してしまうという不具合があり、この問題を修正しました。
</P>

<HR>
<H3><A name="note27-13" id="note27-13">Note 27-13: (FS) オーバーレイのアンロード時の不具合修正</A></H3>
<P>FS_UnloadOverlay関数やFS_EndOverlay関数でオーバーレイをアンロードする際にデストラクタが正しく呼び出されないことがあるという不具合があり、
この問題を修正しました。<br>
具体的には、次の条件を同時に満たすオブジェクトが対象になります。<br>
<ul>
<li>オーバーレイの.dataセクションに配置されている
<li>デストラクタの実体がオーバーレイ上に配置されていない
</ul>
</P>
<HR>
<H3><A name="note27-14" id="note27-14">Note 27-14: (FX) 逆正接関数の不具合修正</A></H3>
<P>(x, y)の傾きが限りなく1に近い場合において以下の逆正接関数が誤った値を返すという不具合があり、これを修正しました。
<ul>
<li>FX_Atan2
<li>FX_Atan2Idx
</ul>
具体的には、以下の条件を満たす(x, y)が対象となります。<br>
((x != y) && (FX_Div(y, x) == FX32_ONE))
</P>

<HR>
<H3><A name="note27-15" id="note27-15">Note 27-15: (GX) Sub_Double3D サンプルデモの修正</A></H3>
<P>$NitroSDK/build/demos/gx/UnitTours/Sub_Double3D サンプルデモに以下の修正を行いました。<br>
<br>
2画面3Dと負荷の高い処理を併用したときに、まれに上画面のものが下画面に（もしくは、下画面のものが上画面に）一瞬回り込んでしまうという不具合があり、これを修正しました。
</P>

<HR>
<H3><A name="note27-16" id="note27-16">Note 27-16: (GX) ディスプレイリスト操作関数内でのASSERT不具合修正</A></H3>
<P>ディスプレイリストを操作する関数の内部から呼び出される G3C_UpdateGXDLInfo 関数および G3B_UpdateGXDLInfo 関数で、バッファのサイズとちょうど同じサイズのディスプレイリストを作成する場合に ASSERT の判定にかかってしまう不具合がありました。<br>
この不具合は修正されました。
</P>

<HR>
<H3><A name="note27-17" id="note27-17">Note 27-17: (MATH) MATH_QSort 関数の不具合修正</A></H3>
<P>MATH_QSort 関数でのソートの際に、場合によって対象配列へのオーバーアクセスが発生する不具合が存在しました。<br>
この不具合は修正されました。
</P>

<HR>
<H3><A name="note27-18" id="note27-18">Note 27-18: (MATH) SHA-1 関数の高速化</A></H3>
<P>SHA-1 関数の実装を差し替えました。<br>
コードサイズはほぼ変わらず、以前の実装の倍程度の速度が出ています。<br>
インターフェイスの変更はありません。
</P>

<HR>
<H3><A name="note27-19" id="note27-19">Note 27-19: (MATH) 高速フーリエ変換関数の追加</A></H3>
<P>高速フーリエ変換を行う関数を追加しました。<br>
また、その動作確認デモを $NitroSDK/build/demos/math/fft-1, fft-2 として追加しました。
</P>

<HR>
<H3><A name="note27-20" id="note27-20">Note 27-20: (MB) multiboot-wfs サンプルの追加</A></H3>
<P>DSダウンロードプレイで配信した子機がワイヤレス経由でファイルシステムを使用するサンプルを $NitroSDK/build/demos/mb/multiboot-wfs に追加しました。
</P>

<HR>
<H3><A name="note27-21" id="note27-21">Note 27-21: (MB) デバッグ用の拡張メモリ領域の解放</A></H3>
<P>MB プロトコルにてブートした子機は、メインメモリを強制的に 4M 設定として拡張メモリを使用できないように制限を設けていましたが、これを廃止し、IS-NITRO-EMULATOR 等の 8M メインメモリを持つハードウェアでは拡張領域を使用することも可能となるように修正しました。
</P>

<HR>
<H3><A name="note27-22" id="note27-22">Note 27-22: (MB) ユーザ定義拡張パラメータの追加</A></H3>
<P>MBGameRegistry 構造体に userParam メンバを追加しました。<br>
このバッファに最大32バイトまでの自由なデータを設定して MB_RegisterFile 関数を使用すると、DSダウンロードプレイ子機はそのデータを起動後に参照することができます。
</P>

<HR>
<H3><A name="note27-23" id="note27-23">Note 27-23: (MI) MI_CompressHuffman 関数および ntrcomo.exe のハフマン圧縮不具合修正</A></H3>
<P>MI_CompressHuffman 関数及び ntrcomp.exe の不具合で、単一の値で埋められたデータが正常に圧縮されない場合がありました。<br>
この不具合は修正されました。
</P>

<HR>
<H3><A name="note27-24" id="note27-24">Note 27-24: (OS) OS_Sleep 関数の内部動作修正</A></H3>
<P>OS_Sleep 関数を呼び出して待機しているスレッドに対して OS_WakeupThreadDirect 関数を呼び出した場合にその後のアラーム処理に異常が生じるという不具合があり、これを修正しました。
</P>

<HR>
<H3><A name="note27-25" id="note27-25">Note 27-25: (OS) OS_TryLockMutex 関数不具合の修正</A></H3>
<P>OS_TryLockMutex 関数で mutex のロックを行なった際の OS 内部で保持している mutex のリスト操作を誤っていました。<br>
そのため、OS_UnlockMutex 関数で例外が発生することがあったり、mutex をロックしたままスレッドを終了させた際に不具合が発生したりしていました。これを修正しました。<br>
なお、OS_TryLockMutex 関数ではなく、OS_LockMutex 関数は正常動作しており、これらの不具合はありません。
</P>

<HR>
<H3><A name="note27-26" id="note27-26">Note 27-26: (OS) OS_YieldThread 関数の追加</A></H3>
<P>カレントスレッドと同優先度で実行可能状態になっているスレッドに対して実行機会を与えながらスレッドスケジューリングを行なう OS_YieldThread 関数を追加しました。
</P>

<HR>
<H3><A name="note27-27" id="note27-27">Note 27-27: (OS) 起動時初期化処理の内部修正</A></H3>
<P>プログラム起動時の autoload および各セグメント初期化時にキャッシュのクリーン/無効化を確実に行うよう内部処理を修正しました。
</P>

<HR>
<H3><A name="note27-28" id="note27-28">Note 27-28: (OS) 中国版起動画面処理の拡張</A></H3>
<P>中国語対応アプリケーションの起動画面表示処理自体を SDK_WEAK_SYMBOL で修飾し、OS_ShowAttentionChina 関数として公開し、外部定義によるこの実装の差し替えを可能にしました。<br>
<br>
それらとあわせて、起動時にのみ使用する画像のデータを静的リンクせずにファイルシステムからロードする方法を示すサンプルとして $NitroSDK/build/demos/os/forChina-fsを追加しました。
</P>

<HR>
<H3><A name="note27-29" id="note27-29">Note 27-29: (OS) データキャッシュのフラッシュ不具合の修正</A></H3>
<P><a href="changelog-oldver.html#note24-10">Note 24-10</a>、<a href="changelog-oldver.html#note25-16">Note 25-16</a>で扱われた不具合の原因判明にともない、DC_FlushRange 関数および DC_FlushAll 関数の内部実装を CPU の flush 命令で実現するように変更しました。<br>
具体的には、「ライトバッファがフルの状態で flush 命令を実行するとクリーンなキャッシュラインが無効化されない」という症状を回避するために flush 命令の直前と割り込みハンドラからの復帰時にライトバッファエンプティ待ち命令を挿入しました。<br>
関数仕様に変更はありません。
</P>

<HR>
<H3><A name="note27-30" id="note27-30">Note 27-30: (OS) 複数の OSMutex をロックする際の不具合修正</A></H3>
<P>OSMutex 内部で保持している mutex のリスト処理に不具合がありました。<br>
具体的には、1つのスレッドが、同時に複数の OSMutex に対して OS_LockMutex 関数や OS_TryLockMutex 関数でロックをかける際に不具合が発生します。<br>
これを修正しました。<br>
<br>
なお、1つのスレッドが同時に最大1つの OSMutex しかロックしない場合には不具合は発生しません。
</P>

<HR>
<H3><A name="note27-31" id="note27-31">Note 27-31: (OS) ヘッダファイルに関するリファレンス追加</A></H3>
<P>NITRO-SDK のヘッダファイルのうち主要なものや特殊な機能を持つものについて、説明を関数リファレンスの OS カテゴリ内に追加しました。<br>
以下のファイルに関して解説しています。
<ul>
<li>nitro.h 
<li>nitro_win32.h 
<li>nitro/sinit.h
<li>nitro/code32.h、nitro/code16.h、nitro/codereset.h
<li>nitro/dtcm_begin.h、nitro/dtcm_end.h
<li>nitro/itcm_begin.h、nitro/itcm_end.h
<li>nitro/parent_begin.h、nitro/parent_end.h
<li>nitro/version_begin.h、nitro/version_end.h
<li>nitro/wram_begin.h、nitro/wram_end.h
<li>nitro/version.h
</ul>
</P>

<HR>
<H3><A name="note27-32" id="note27-32">Note 27-32: (RTC) 日付・時刻と総経過秒の相互変換関数の追加</A></H3>
<P>RTCDate, RTCTime 型の日付・時刻データと2000年1月1日からの総経過秒との相互変換関数を RTC カテゴリに追加しました。同様に、RTCDate 型と総経過日数との交互変換関数を追加しました。<br>
動作確認用のデモは $NitroSDK/build/demos/rtc/convert-1 です。
</P>

<HR>
<H3><A name="note27-33" id="note27-33">Note 27-33: (RTC) 日付・時刻を変更する API への制限追加</A></H3>
<P>デバッグ用途を目的として、RTC の日付・時刻を変更する API を用意しておりましたが、デバッグ用途以外での誤った使用を避けるために、NITRO_FINALROM を指定した場合には RTC への書き込み要求が必ず失敗するように制限を設けました。<br>
動作が変更される API は以下の通りです。
<ul>
<li>RTC_SetDateTimeAsync
<li>RTC_SetDateTime
<li>RTC_SetTimeAsync
<li>RTC_SetTime
<li>RTC_SetDateAsync
<li>RTC_SetDate
</ul>
</P>

<HR>
<H3><A name="note27-34" id="note27-34">Note 27-34: (WBT) Wbt-fs サンプルデモの修正</A></H3>
<P>$NitroSDK/build/demos/wbt/wbt-fs のサンプルデモに以下の修正を行いました。<br>
<br>
・FS_LoadTable 関数に使用するテーブルメモリを接続と切断の繰り返しごとに解放せず確保し続けてメモリリークが発生していましたので、これを修正しました。
</P>

<HR>
<H3><A name="note27-35" id="note27-35">Note 27-35: (WBT) WBT サンプルデモの修正</A></H3>
<P>$NitroSDK/build/demos/wireless_shared/wc サンプルモジュールおよび $NitroSDK/build/demos/wbt/wbt-1 サンプルデモに以下の修正を行いました。<br>
<br>
「連続 MP 通信中の無線親機において、新たに子機が接続されると無条件に送信バッファを上書きしてしまい、タイミングによっては送信バッファにデータを書き込んでいる最中に無線ハードウェアに送られ、WBT パケットの不整合が発生していた。」うという不具合があり、これを修正しました。<br>
<br>
修正内容は、$NitroSDK/build/demos/wbt/wbt-1/src/main.c 内で WBT 親機に現在接続中の子機情報を持たせることにより、<br>
１、１台目の子機なら連続 MP 通信をはじめる。<br>
２、２台目以降の子機なら何もしない。(連続 MP 通信中なのでなにもしなくていい)<br>
３、子機がいなくなると連続 MP 通信をやめる。<br>
という処理を追加しました。<br>
<br>
また、上記処理で子機が切断されたという情報が必要になったため、$NitroSDK/build/demos/wireless_shared/wc/wc.c 内で子機が切断されたときにサンプル側のコールバックを呼ぶように修正しました。
</P>

<HR>
<H3><A name="note27-36" id="note27-36">Note 27-36: (WM) Key Sharing 関数の仕様変更と廃止予定の明記</A></H3>
<P>WM の使用メモリサイズを減らすために、ほとんど使われていない WM_StartKeySharing, WM_EndKeySharing, WM_GetKeySet の各関数の仕様を変更し、Key Sharing 用の固定バッファを WM 初期化時に確保しないようにしました。<br>
また、Key Sharing 機能は今後廃止予定ですので、代わりに WM_StartDataSharing, WM_EndDataSharing, WM_StepDataSharing の各関数を使用していただきたいという旨をドキュメントに追記しました。
</P>

<HR>
<H3><A name="note27-37" id="note27-37">Note 27-37: (WM) WM_StartScanEx 関数の内部動作の変更</A></H3>
<P>WM_StartScanEx 関数にて SSID をフィルター指定した場合でも、見つかった親機情報内の SSID が指定した SSID と異なる無効なデータとなる場合があることが分かりました。<br>
この問題への対策として、WM ライブラリ内でフィルター指定した SSID をみつかった親機情報内の SSID に必要に応じて上書きする処理を追加しました。<br>
<br>
なお、この現象はインフラストラクチャモードで通信する親機が SSID を隠蔽している場合にのみ発生します。
</P>

<HR>
<H3><A name="note27-38" id="note27-38">Note 27-38: (WM) WMTestTool.srl の更新</A></H3>
<P>NitroSDK/bin/ARM9-TS/Rom/WMTestTool.srl にあるワイヤレス通信のテスト用ツールを更新しました。<br>
これまでは Scan 時にアクセスポイントを発見すると "WLAN AP" と表示していましたが、代わりに SSID を表示するように変更しています。<br>
この変更は、Scan Test モード、ScanEx Test モードの双方に施されています。
</P>

<HR>
<H3><A name="note27-39" id="note27-39">Note 27-39: (WM) 子機が接続していない場合での MP 通信の抑止</A></H3>
<P>これまでは、ワイヤレス通信の親機が WM_StartMP 関数を呼び出すと、子機が1台も接続していない場合でも MP フレームを送信していましたが、これを送信しないように変更しました。<br>
port の送受信コールバックの挙動は基本的には変わりません。
</P>

<HR>
<H3><A name="note27-40" id="note27-40">Note 27-40: (WM) 子機切断通知の不具合修正</A></H3>
<P>MP 通信で子機が NULL 応答のみを返し続けてタイムアウトした場合に親機の WMStartParentCallback コールバックへ複数回の WM_STATECODE_DISCONNECTED 通知が発生することがあり、これを修正しました。<br>
<br>
この問題はおもに、IS-NITRO-DEBUGGER で起動させた子機を MP 通信中のまま長時間一時停止させた場合に発生します。
</P>

<HR>
<H3><A name="note27-41" id="note27-41">Note 27-41: (WM) フレームあたりの MP 通信回数制限の追加</A></H3>
<P>これまで、連続通信モードや通信の失敗が続いた後などでは、送れるだけ送りつづけるという動作をしていましたが、空データしか送受信しないような状況で、MP 回数が急に増大し子機側の受信処理が追いつかずに不具合を引き起こすことがありました。<br>
その対策として、1ピクチャフレーム中に親機が送信する MP 通信の再送なども含めた回数に6回という上限を設定しました。<br>
通常の通信をしていれば、この制限にかかることはありません。
</P>

<HR>
<H3><A name="KnownIssues_2_02_pr" id="KnownIssues_2_02_pr">SDK 2.2 PRでの既知の問題点</A></H3>
<P>　ありません。</P>

<HR>
<P style="text-align: right">NINTENDO Technical Support Center</P>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>

<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>

<BR>
<BR>
<BR>
</BODY>
</HTML>