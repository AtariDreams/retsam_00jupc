<HTML>
	<HEAD>
		<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<META http-equiv="Content-Style-Type" content="text/css">
		<TITLE>CPS用の定数</TITLE>
		<LINK rel="stylesheet" href="../../css/nitro.css">
		<BASE target="main">
	</HEAD>
	<BODY>
		<H1>CPS用の定数</H1>

		<H2>定義</H2>
		<DL>
			<DD>
				<PRE><CODE>
#include &lt;nitroWiFi/cps.h&gt;


#define tcpwritetimeout1 CPS_MilliSecondsToLTicks(2*1000)

#define tcpwritetimeout2 CPS_MilliSecondsToLTicks(20*1000)

#define tcpsyntimeout CPS_MilliSecondsToLTicks(5*1000)

#define tcpclosetimeout CPS_MilliSecondsToLTicks(5*1000)

#define arpcache_entries 8

#define fragtable_entries 8

#define	TCPIP_STACK_SIZE 2048

#define	SCAVENGER_STACK_SIZE 2048

#define DEFAULT_HELPER_THREADS_PRIORITY 16

#define MAX_IP_PAYLOAD 1480

#define SCA_SLEEP (1*1000)			// 1 second

#define ARP_TIMEOUT (2*60*1000)			// 2 minutes

#define GARP_TIMEOUT (3*1000)			// 3 seconds

#define IPFRAG_TIMEOUT (30*1000)		// 30 seconds

#define DHCP_TIMEOUT CPS_MilliSecondsToLTicks(4*1000)

#define DHCP_RETRIES 2

#define RESOLVER_TIMEOUT CPS_MilliSecondsToLTicks(5*1000)

#define RESOLVER_MAXNAMELEN 48

				</CODE></PRE>
			</DD>
		</DL>

		<H2><A name="definitions">説明</A></H2>
		<TABLE border="1">
			<TBODY>
				<TR>
					<TD width="25%"><EM><STRONG><CODE>tcpwritetimeout1</CODE></STRONG></EM></TD>
					<TD width="75%">TCPモードにおけるCPS_SocWrite()での相手のACKのタイムアウト。これを過ぎたら再送します。</TD>
				</TR>
				<TR>
					<TD><EM><STRONG><CODE>tcpwritetimeout2</CODE></STRONG></EM></TD>
					<TD>TCPモードにおけるCPS_SocWrite()での送信処理全体のタイムアウト。これを過ぎたら送信を打ち切ります。</TD>
				</TR>
				<TR>
					<TD><EM><STRONG><CODE>tcpsyntimeout</CODE></STRONG></EM></TD>
					<TD>CPS_TcpConnect()、CPS_TcpListen()のハンドシェイクの時のタイムアウト。これを過ぎたらハンドシェイクを打ち切ります。</TD>
				</TR>
				<TR>
					<TD><EM><STRONG><CODE>tcpclosetimeout</CODE></STRONG></EM></TD>
					<TD>CPS_TcpClose()のタイムアウト。これを過ぎても正常なクローズ処理が行われなかったら、強制的終了します。</TD>
				</TR>
				<TR>
					<TD><EM><STRONG><CODE>arpcache_entries</CODE></STRONG></EM></TD>
					<TD>ARPキャッシュのエントリ数。</TD>
				</TR>
				<TR>
					<TD><EM><STRONG><CODE>fragtable_entries</CODE></STRONG></EM></TD>
					<TD>フラグメント化されたIPパケットの再構成に使用されるテーブルのエントリ数。</TD>
				</TR>
				<TR>
					<TD><EM><STRONG><CODE>TCPIP_STACK_SIZE</CODE></STRONG></EM></TD>
					<TD>CPSの受信スレッド用スタックサイズ。</TD>
				</TR>
				<TR>
					<TD><EM><STRONG><CODE>SCAVENGER_STACK_SIZE</CODE></STRONG></EM></TD>
					<TD>CPSの定期処理スレッド用スタックサイズ。</TD>
				</TR>
				<TR>
					<TD><EM><STRONG><CODE>DEFAULT_HELPER_THREADS_PRIORITY</CODE></STRONG></EM></TD>
					<TD>CPSの受信スレッド、CPSの定期処理スレッドの優先度。</TD>
				</TR>
				<TR>
					<TD><EM><STRONG><CODE>MAX_IP_PAYLOAD</CODE></STRONG></EM></TD>
					<TD>IPパケットの最大長。これ以上のIPパケットはフラグメント化して送られます。</TD>
				</TR>
				<TR>
					<TD><EM><STRONG><CODE>SCA_SLEEP</CODE></STRONG></EM></TD>
					<TD>CPSの定期処理スレッドの動作頻度。</TD>
				</TR>
				<TR>
					<TD><EM><STRONG><CODE>ARP_TIMEOUT</CODE></STRONG></EM></TD>
					<TD>ARPキャッシュの寿命。</TD>
				</TR>
				<TR>
					<TD><EM><STRONG><CODE>GARP_TIMEOUT</CODE></STRONG></EM></TD>
					<TD>手動設定されたIPアドレスの重複検査の際の待ち時間。</TD>
				</TR>
				<TR>
					<TD><EM><STRONG><CODE>IPFRAG_TIMEOUT</CODE></STRONG></EM></TD>
					<TD>フラグメント化されたIPパケットを再構成する際のタイムアウト。これをすぎても再構成できないパケットは破棄されます。</TD>
				</TR>
				<TR>
					<TD><EM><STRONG><CODE>DHCP_TIMEOUT</CODE></STRONG></EM></TD>
					<TD>DHCPサーバと通信する際のタイムアウト。最初はこの値、次はこの2倍、次はそのさらに2倍、というように増加します。</TD>
				</TR>
				<TR>
					<TD><EM><STRONG><CODE>DHCP_RETRIES</CODE></STRONG></EM></TD>
					<TD>DHCPサーバと通信する際のリトライ数。</TD>
				</TR>
				<TR>
					<TD><EM><STRONG><CODE>RESOLVER_TIMEOUT</CODE></STRONG></EM></TD>
					<TD>DNSサーバと通信する際のタイムアウト。</TD>
				</TR>
				<TR>
					<TD><EM><STRONG><CODE>RESOLVER_MAXNAMELEN</CODE></STRONG></EM></TD>
					<TD>DNSサーバに問い合わせる名前の最大長。</TD>
				</TR>
			</TBODY>
		</TABLE>

		<H2>タイムアウト値について</H2>
		<P>CPSソケット内部で使用されているタイムアウト値について、以下に示します。<BR>
		タイムアウト値に関しては、上記の定数で定義されていないものも存在します。</P>
		<TABLE border="1">
			<TBODY>
				<TR>
					<TD width="25%">ARP のリトライ</TD>
					<TD width="75%">2 秒間隔で 8 回</TD>
				</TR>
				<TR>
					<TD>ARP キャッシュのタイムアウト</TD>
					<TD>最後の参照から 2 分</TD>
				</TR>
				<TR>
					<TD>IP フラグメントの廃棄時間</TD>
					<TD>30 秒</TD>
				</TR>
				<TR>
					<TD>DHCP のリトライ</TD>
					<TD>計 4 回の送信で、タイムアウト値が 2, 4, 6, 8 秒</TD>
				</TR>
				<TR>
					<TD>DNS のリトライ</TD>
					<TD>2 秒間隔で 3 回</TD>
				</TR>
				<TR>
					<TD>TCP 送信リトライ</TD>
					<TD>2 秒間隔で 20 秒が経過するまで</TD>
				</TR>
				<TR>
					<TD>TCP 接続時タイムアウト</TD>
					<TD>5 秒</TD>
				</TR>
				<TR>
					<TD>TCP 切断時タイムアウト</TD>
					<TD>5 秒</TD>
				</TR>
			</TBODY>
		</TABLE>

		<H2>履歴</H2>
		<P>
			2005/10/24 初版<BR>
		</P>

		<TABLE border="0" height="100%"><TR><TD style="background-color : white;"></TD></TR></TABLE>
	</BODY>
</HTML>
